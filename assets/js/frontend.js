(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{119:function(e,t){e.exports={DEV:{PLACES_URI:"places/?term=",AUTH_URI:"auth/",QUOTE_URI:"booking/quote/",JOURNEY_URI:"booking/journey/?id=",CLIENT_SECRET_URI:"booking/client_gateway_secret/",PAYMENT_URI:"booking/pay/",BOOKING_DETALS_URI:"booking-details/?booking_ref=",PGH_CONF:{hidePostalCode:!0},useButtons:!0},STAGING:{PLACES_URI:"places/?term=",AUTH_URI:"auth/",QUOTE_URI:"booking/quote/",JOURNEY_URI:"booking/journey/?id=",CLIENT_SECRET_URI:"booking/client_gateway_secret/",PAYMENT_URI:"booking/pay/",BOOKING_DETALS_URI:"booking-details/?booking_ref=",PGH_CONF:{hidePostalCode:!0},useButtons:!0},LIVE:{PLACES_URI:"places/?term=",AUTH_URI:"auth/",QUOTE_URI:"booking/quote/",JOURNEY_URI:"booking/journey/?id=",CLIENT_SECRET_URI:"booking/client_gateway_secret/",PAYMENT_URI:"booking/pay/",BOOKING_DETALS_URI:"booking-details/?booking_ref=",PGH_CONF:{hidePostalCode:!0},useButtons:!0}}},248:function(e,t,o){"use strict";var s=o(53);o.n(s).a},249:function(e,t,o){"use strict";var s=o(54);o.n(s).a},250:function(e,t,o){"use strict";o.r(t);var s=o(16),i=o(15),r=o(120),a=o(56),n=(o(124),o(125),o(25)),l=o(36),u=o(109),c=o(110),d=o(18),p=o.n(d),g={name:"BIQApp",version:"1.0.1",props:{biqAppURL:{type:String,required:!0,default:"//"},biqAppConfig:{type:Object,required:!0,default:function(){return{PLACES_URI:"places/",AUTH_URI:"auth/",QUOTE_URI:"booking/quote/",JOURNEY_URI:"booking/journey/?id=",CLIENT_SECRET_URI:"booking/client_gateway_secret/",PAYMENT_URI:"booking/pay/",BOOKING_DETALS_URI:"booking-details/?booking_ref=",PGH_CONF:{hidePostalCode:!0},useButtons:!0}}},biqAppDebugEnabled:{type:Boolean,default:!1}},data(){return{initialised:!1,settings:{biq_api_host:"https://api.taxicode.com/",biq_pk:"",paypal_pk:"",stripe_pk:"",stripe_cardform_style:{base:{fontFamily:"'Muli', sans-serif",fontSize:"14px",color:"#333"},invalid:{color:"red"}},quote_type:"",complete_page_text:"",custom_css:"",booking_test_mode:!1},config:this.biqAppConfig}},created(){this.getAppSettings()},computed:{...Object(i.c)(["searchDetails","hasSearchResults","displayType","displayQuotes","loadingQuotes","quotesError","quotesLoaded","zeroQuotes","journeyID","journeyDetails","journeyDate","journeyTime","journeyHasReturn","journeyReturnDate","journeyReturnTime","journeyHasVias","journeyQuotes","processed","processing","basket","quoteID","vehicleIndex","price","quoteData","quoteVehicleData","bookingRef"]),appConfig:function(){return{...this.config}},appSettings:function(){return{...this.settings}}},methods:{...Object(i.b)(["resetSearch","searchingQuotes","searchedQuotes","changeDisplayType","resetQuotes","quoting","apiQuotesError","quoted","resetCheckout","bookNow","booking","bookingFailed","booked"]),getAppSettings:function(){const e=this,t=this.biqAppURL+"settings-get/";this.biqAppDebugEnabled&&console.group(`Loading BIQ App Settings from '${t}'`),p.a.get(t).then(t=>{if(e.biqAppDebugEnabled){console.log(t),console.log({...e.settings}),console.info(typeof stripe_cardform_style),console.log(stripe_cardform_style),console.info(typeof t.data.stripe_cardform_style),console.log(t.data.stripe_cardform_style);try{console.log(JSON.parse(t.data.stripe_cardform_style))}catch(e){console.error(e)}}const o={biq_pk:t.data.taxicode_public,biq_api_host:t.data.biq_api_host,paypal_pk:t.data.paypal_public,stripe_pk:t.data.stripe_public,stripe_cardform_style:e.stripe_cardform_style,quote_type:t.data.quote_type,complete_page_text:t.data.complete_page_text,custom_css:t.data.custom_css,booking_test_mode:"1"==t.data.test_mode};"/"!==o.biq_api_host.slice(-1)&&(o.biq_api_host=o.biq_api_host+"/"),e.settings=o,e.initialised=!0,e.biqAppDebugEnabled&&(console.info("Loaded Settings"),console.log({...e.settings}),console.groupEnd())}).catch(t=>{e.biqAppDebugEnabled&&(console.info("Settings Load Error"),console.log(t),console.groupEnd()),console.error(t)})}}},h=o(12),m=Object(h.a)(g,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"biq-vue-app"}},[this.initialised?t("router-view",{attrs:{"app-config":this.appConfig,"app-settings":this.appSettings,appRESTBase:this.biqAppURL,debugging:this.biqAppDebugEnabled}}):this._e()],1)}),[],!1,null,null,null).exports,f=o(35);var _={props:{appConfig:{type:Object,required:!0,default:function(){return null}},appSettings:{type:Object,required:!0,default:function(){return null}},debugging:{type:Boolean,default:!1}}};var b={props:{validClass:{type:String,default:""},errorClass:{type:String,default:"is-invalid"},errorState:{type:String,default:null},values:{type:Object,default:function(){return{}}},debugging:{type:Boolean,default:!1}},data:()=>({fields:{}}),methods:{validate:function(){return this.validateValues()},specialValidationErrors:function(){return{}},specialInputValues:function(){return{}},errorStateClass:function(e){return null==this.fields[e].error?"":this.fields[e].error?this.errorClass:this.validClass},setFieldValues:function(){const e=this;this.debugging&&(console.group(`Setting ${this.$options._componentTag} values`),console.log(this.fields),console.log(this.values)),Object.keys(this.values).forEach(t=>{if(!e.fields.hasOwnProperty(t))return void(e.debugging&&console.info(`${e.$options._componentTag} does not contain field '${t}'`));const o=e.fields[t].hasOwnProperty("value")?"value":"selected";e.fields[t][o]=e.values[t]}),this.debugging&&(console.log(this.fields),console.groupEnd())},validateValues:function(){const e=this;let t=0;return this.debugging&&console.group(`Validating ${this.$options._componentTag} values`),Object.keys(this.fields).forEach(o=>{if(e.fields[o].error=null,!e.fields[o].required)return;const s=e.fields[o].hasOwnProperty("value")?"value":"selected";""==e.fields[o][s]?(e.fields[o].error=e.fields[o].errorMsg,e.debugging&&console.info(`Invalid field value for '${o}' -- ${e.fields[o].error}`),t++):e.fields[o].error=""}),this.debugging&&console.groupEnd(),0==t},validationErrors:function(){const e=this,t={};return Object.keys(this.fields).forEach(o=>{t[o]=e.fields[o].error}),{...this.specialValidationErrors(),...t}},inputValues:function(){const e=this,t={};return Object.keys(this.fields).forEach(o=>{const s=e.fields[o].hasOwnProperty("value")?"value":"selected";t[o]=e.fields[o][s]}),{...this.specialInputValues(),...t}}}},y=o(122),v={name:"PlacesLookup",components:{"vue-typeahead-bootstrap":o(121).a},props:{apiPlacesLookup:{type:String,required:!0,default:"//places/?term="},id:{type:String,default:"biq-places-lookup"},label:{type:String,default:"Location"},placeholder:{type:String,default:"Location postcode or place name"},value:{type:String,default:""},required:{type:Boolean,default:!1},validClass:{type:String,default:""},errorClass:{type:String,default:"is-invalid"},errorState:{type:String,default:null},debugging:{type:Boolean,default:!1}},data:()=>({locations:[],force_lookup:!0}),updated(){this.force_lookup?this.locationSearch(this.value):this.$refs.locationfield.inputValue=this.value},watch:{location:{handler:y.a.debounce((function(e){this.locationSearch(e)}),500),immediate:!0}},computed:{location:{get(){return this.value},set(e){this.$emit("input",e)}},inputID:function(){return this.id+"-input"},errorStateClass:function(){return null==this.errorState?"":this.errorState?this.errorClass:this.validClass}},methods:{locationSearch:function(e){if(null===e||"string"!=typeof e||e.length<3)return;this.debugging&&(console.info(`BIQ Places ${this.label} lookup to API '${this.apiPlacesLookup}'`),console.log(e)),this.force_lookup=!1,this.$refs.locationfield.inputValue=e;const t=this,o=`${this.apiPlacesLookup}${e}`;let s=[],i=[],r=[];p.a.get(o).then(e=>{if(t.debugging&&(console.info(`BIQ Places ${this.label} response`),console.log(e)),"OK"!=e.data.status)throw new ErrorEvent(e.data.status,{error:new Error(`BIQ Places ${t.label} lookup to API Error`),message:e.data[e.data.status.toLowerCase()]});const o=e.data.results,a=(e,t)=>({string:e,type:t});void 0!==o.STATION&&(i=o.STATION.map(e=>a(e,"station"))),void 0!==o.AIRPORT&&(s=o.AIRPORT.map(e=>a(e,"airport"))),void 0!==o.LOCATION&&(r=o.LOCATION.map(e=>a(e,"location")));const n=o.GOOGLE.map(e=>a(e.string,e.poi?"poi":"general"));t.locations=s.concat(i,r,n)}).catch(e=>{t.locations=[];const s={data:{id:t.id,URL:o,message:e.message||`Unknown BIQ Places ${t.label} lookup to API Error`,error:e}};t.$emit("biqPlacesLookupError",s)})},validate:function(){return!(this.required&&(null==this.value||""==this.value))}}},k=Object(h.a)(v,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"form-group"},[o("label",{attrs:{for:e.inputID,id:e.id}},[e._v(e._s(e.label))]),e._v(" "),o("vue-typeahead-bootstrap",{ref:"locationfield",attrs:{id:e.inputID,placeholder:e.placeholder,inputClass:e.errorStateClass,"show-all-results":!0,"show-on-focus":!0,data:e.locations,serializer:function(e){return e.string}},on:{hit:function(t){e.selectedLocation=t}},scopedSlots:e._u([{key:"suggestion",fn:function(t){var s=t.data,i=t.htmlText;return[o("div",{staticClass:"d-flex align-items-center"},["station"==s.type?o("span",[o("font-awesome-icon",{attrs:{icon:"train"}})],1):"airport"==s.type?o("span",[o("font-awesome-icon",{attrs:{icon:"plane"}})],1):o("span",[o("font-awesome-icon",{attrs:{icon:"map-marker-alt"}})],1),e._v(" "),o("span",{staticClass:"ml-4",domProps:{innerHTML:e._s(i)}})])]}}]),model:{value:e.location,callback:function(t){e.location=t},expression:"location"}})],1)}),[],!1,null,null,null).exports,C={name:"ProcessFormSubmit",props:{processing:{type:Boolean,default:!1},label:{type:String,default:"Submit"},useButtons:{type:Boolean,default:!0}},computed:{submitLabel:function(){return this.processing?"Processing":this.label}}},q=Object(h.a)(C,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.useButtons?o("button",{staticClass:"form-control btn btn-primary",attrs:{disabled:e.processing},on:{click:function(t){return e.$emit("click",t)}}},[e.processing?o("div",{staticClass:"spinner-border spinner-border-sm"}):e._e(),e._v("\n    "+e._s(e.submitLabel)+"\n")]):o("input",{staticClass:"btn btn-primary",attrs:{value:e.submitLabel,disabled:e.processing,type:"button"},on:{click:function(t){return e.$emit("click",t)}}})}),[],!1,null,null,null).exports;var S={name:"TheSearchForm",mixins:[b],components:{"biq-places-lookup":k,"biq-process-form-submit":q},props:{apiPublicKey:{type:String,required:!0,default:""},apiPlacesLookup:{type:String,required:!0,default:"//places/?term="},apiQuotesFrom:{type:String,required:!0,default:"//booking/quote/"},searchOnLoad:{type:Boolean,default:!1},useButtons:{type:Boolean,default:!0}},data:()=>({fields:{journey_type:{selected:"One Way",options:["One Way","Return"],label:"Journey type",required:!1,error:null,errorMsg:"",id:"tcplugin-journey-type",placeholder:""},pickup:{value:"",label:"Pickup",required:!0,error:null,errorMsg:"Pickup location must be set",id:"tcplugin-pickup",placeholder:"Pickup postcode or place name"},destination:{value:"",label:"Destination",required:!0,error:null,errorMsg:"Destination location must be set",id:"tcplugin-destination",placeholder:"Destination postcode or place name"},via:{value:"",label:"(Optional) Via",required:!1,error:null,errorMsg:"",id:"tcplugin-via",placeholder:"Via postcode or place name"},people:{value:"1",label:"Number of People",required:!0,error:null,errorMsg:"Invalid number of people travelling",id:"tcplugin-people",placeholder:""}},date:"",time:"",return_date:"",return_time:"",errors:{date:null,time:null,return_date:null,return_time:null}}),mounted(){this.setFieldValues(),this.searchOnLoad&&this.onSearchQuotesFormSubmit()},computed:{...Object(i.c)(["searchDetails","loadingQuotes"]),hasReturn:function(){return"Return"===this.fields.journey_type.selected}},methods:{...Object(i.b)(["searchingQuotes","apiQuotesError"]),onPlacesLookupError:function(e){this.debugging&&(console.group(e.data.message),console.log(e),console.groupEnd())},setFieldValues:function(){const e=this.searchDetails;this.debugging&&(console.group("Setting BIQ Search Form from State"),console.log(e),console.groupEnd()),this.fields.journey_type.selected=e.journey_type,this.fields.pickup.value=e.pickup,this.fields.destination.value=e.destination,this.$refs.pickupfield.inputValue=this.fields.pickup.value,this.$refs.destinationfield.inputValue=this.fields.destination.value,e.vias.length&&(this.fields.via.value=e.vias[0],this.$refs.viafield.inputValue=this.fields.via.value),this.fields.people.value=e.people,this.date=e.date,this.time=e.time,this.hasReturn&&null!==e.returning.date&&(this.return_date=e.returning.date),this.hasReturn&&null!==e.returning.time&&(this.return_time=e.returning.time)},onSearchQuotesFormSubmit:function(e){e.preventDefault(),this.validate()?this.searchApiQuotes():this.debugging&&(console.group("BIQ Search Form Validation Error"),console.log(this.validationErrors()),console.log(this.errors),console.groupEnd())},validate:function(){this.errors={date:null,time:null,return_date:null,return_time:null};let e=0;return this.validateValues()||e++,null!=this.date&&""!=this.date||(this.errors.date="Journey date is invalid",e++),null!=this.time&&""!=this.time||(this.errors.time="Journey time is invalid",e++),this.hasReturn&&(null!=this.return_date&&""!=this.return_date||(this.errors.return_date="Journey return date is invalid",e++),null!=this.return_time&&""!=this.return_time||(this.errors.return_time="Journey return time is invalid",e++)),0===e},searchApiQuotes:function(){const e=this,t=this.inputValues(),o={journey_type:t.journey_type,pickup:t.pickup,destination:t.destination,people:t.people,date:this.date,time:this.time};let s=null,i=`pickup=${o.pickup}&destination=${o.destination}&date=${o.date} ${o.time}&people=${o.people}`;this.hasReturn?(o.returning={date:this.return_date,time:this.return_time},i=`${i}&return=${o.returning.date} ${o.returning.time}`):o.returning={date:null,time:null};const r=this.fields.via.value;""!=r?(o.vias=[r],i=`${i}&via=${r}`):o.vias=[],this.searchingQuotes(o),this.debugging&&console.group(`Searching BIQ API Quotes from '${this.apiQuotesFrom}'`),p.a.get(`${this.apiQuotesFrom}?key=${this.apiPublicKey}&${i}`).then(t=>{if(e.debugging&&console.log(t),"OK"!=t.data.status)throw new ErrorEvent(t.data.status,{error:new Error("BIQ API Quotes Error"),message:t.data[t.data.status.toLowerCase()]});s=t.data.journey_id;const o={data:{journey_id:s,journey:t.data.journey,quotes:t.data.quotes}};let i="biqQuotesSearched";Object.keys(t.data.quotes).length<=0&&(i="biqZeroQuotes",o.data.error={message:t.data.warnings[0]}),e.$emit(i,o),e.debugging&&(console.info("BIQ API Quotes Searched"),console.groupEnd())}).catch(t=>{const i={data:{quotes:[],journey_id:s,journey:o,error:t}};e.$emit("biqQuotesError",i),e.debugging&&(console.info("BIQ API Quotes Search Error"),console.groupEnd())})}}},E=Object(h.a)(S,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("form",{attrs:{id:"searchform"}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:e.fields.journey_type.id+"-select",id:"fields.journey_type.id"}},[e._v(e._s(e.fields.journey_type.label))]),e._v(" "),o("b-form-select",{attrs:{options:e.fields.journey_type.options,id:e.fields.journey_type.id+"-select"},model:{value:e.fields.journey_type.selected,callback:function(t){e.$set(e.fields.journey_type,"selected",t)},expression:"fields.journey_type.selected"}})],1)]),e._v(" "),o("div",{staticClass:"col"})]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("biq-places-lookup",{key:"pickup",ref:"pickupfield",attrs:{"api-places-lookup":e.apiPlacesLookup,required:e.fields.pickup.required,"error-state":e.fields.pickup.error,id:e.fields.pickup.id,label:e.fields.pickup.label,placeholder:e.fields.pickup.placeholder,debugging:e.debugging},on:{biqPlacesLookupError:e.onPlacesLookupError},model:{value:e.fields.pickup.value,callback:function(t){e.$set(e.fields.pickup,"value",t)},expression:"fields.pickup.value"}})],1),e._v(" "),o("div",{staticClass:"col"},[o("biq-places-lookup",{key:"destination",ref:"destinationfield",attrs:{"api-places-lookup":e.apiPlacesLookup,required:e.fields.destination.required,"error-state":e.fields.destination.error,id:e.fields.destination.id,label:e.fields.destination.label,placeholder:e.fields.destination.placeholder,debugging:e.debugging},on:{biqPlacesLookupError:e.onPlacesLookupError},model:{value:e.fields.destination.value,callback:function(t){e.$set(e.fields.destination,"value",t)},expression:"fields.destination.value"}})],1)]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("biq-places-lookup",{key:"via",ref:"viafield",attrs:{"api-places-lookup":e.apiPlacesLookup,required:e.fields.via.required,"error-state":e.fields.via.error,id:e.fields.via.id,label:e.fields.via.label,placeholder:e.fields.via.placeholder,debugging:e.debugging},on:{biqPlacesLookupError:e.onPlacesLookupError},model:{value:e.fields.via.value,callback:function(t){e.$set(e.fields.via,"value",t)},expression:"fields.via.value"}})],1),e._v(" "),o("div",{staticClass:"col"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:e.fields.people.id+"-input",id:"fields.people.id"}},[e._v(e._s(e.fields.people.label))]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.fields.people.value,expression:"fields.people.value"}],staticClass:"form-control",class:e.errorStateClass("people"),attrs:{id:e.fields.people.id+"-input",placeholder:e.fields.people.placeholder,required:e.fields.people.required,type:"number",min:"1",max:"99"},domProps:{value:e.fields.people.value},on:{input:function(t){t.target.composing||e.$set(e.fields.people,"value",t.target.value)}}})])])]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("div",{staticClass:"form-group",attrs:{id:"tcplugin-date"}},[o("label",[e._v("Date")]),e._v(" "),o("b-form-datepicker",{staticClass:"form-control",attrs:{state:e.errors.date,locale:"en"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)]),e._v(" "),o("div",{staticClass:"col"},[o("div",{staticClass:"form-group",attrs:{id:"tcplugin-time"}},[o("label",[e._v("Time")]),e._v(" "),o("b-form-timepicker",{attrs:{state:e.errors.time,locale:"en"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)])]),e._v(" "),e.hasReturn?o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("div",{staticClass:"form-group",attrs:{id:"tcplugin-return-date"}},[o("label",[e._v("Return Date")]),e._v(" "),o("b-form-datepicker",{staticClass:"form-control",attrs:{state:e.errors.return_date,locale:"en"},model:{value:e.return_date,callback:function(t){e.return_date=t},expression:"return_date"}})],1)]),e._v(" "),o("div",{staticClass:"col"},[o("div",{staticClass:"form-group",attrs:{id:"tcplugin-return-time"}},[o("label",[e._v("Return Time")]),e._v(" "),o("b-form-timepicker",{attrs:{state:e.errors.return_time,locale:"en"},model:{value:e.return_time,callback:function(t){e.return_time=t},expression:"return_time"}})],1)])]):e._e(),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col"}),e._v(" "),o("div",{staticClass:"col",attrs:{id:"tcplugin-search-submit"}},[o("div",{staticClass:"form-group"},[o("biq-process-form-submit",{attrs:{processing:e.loadingQuotes,"use-buttons":e.useButtons,label:"Search"},on:{click:e.onSearchQuotesFormSubmit}})],1)])])])}),[],!1,null,null,null).exports,j={name:"BookNowC2A",props:{journeyID:{type:String,required:!0,default:""},quoteID:{type:String,required:!0,default:""},selectedVehicleIndex:{type:Number,required:!0,default:0},label:{type:String,default:"Book Now"},useButtons:{type:Boolean,default:!0}},data(){return{target:{name:"CheckoutPage",params:{journey:this.journeyID,quote:this.quoteID,vehicle:this.selectedVehicleIndex}}}},methods:{onClick:function(e){e.data={quoteID:this.quoteID,selectedVehicleIndex:this.selectedVehicleIndex},this.$emit("c2aClick",e)}}},I=Object(h.a)(j,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.useButtons?o("button",{staticClass:"form-control btn btn-primary",on:{click:e.onClick}},[e._v(e._s(e.label))]):o("router-link",{staticClass:"btn btn-primary btn-block",attrs:{to:e.target},on:{click:e.onClick}},[e._v(e._s(e.label))])}),[],!1,null,null,null).exports,P={name:"QuoteCardVehicleSelect",components:{"biq-book-now-c2a":I},props:{journeyID:{type:String,required:!0,default:""},quote:{type:Object,required:!0,default:function(){return null}},displayResultsType:{type:String,required:!0,default:""},c2aLabel:{type:String,default:"Book Now"},debugging:{type:Boolean,default:!1},useButtons:{type:Boolean,default:!0}},data(){return{quote_price:this.quote.vehicles[this.quote.selected_vehicle].price,selected_vehicle:this.quote.selected_vehicle,display_vehicle_src:this.quote.vehicles[this.quote.selected_vehicle].image}},computed:{displayPrice:function(){return"&pound;"+new Number(this.quote_price).toFixed(2)}},methods:{onQuoteVehicleChange:function(e){const t=new Number(e.target.value),o=this.quote.vehicles[t];this.debugging&&(console.group("Quote Vehicle Changed"),console.log(this.quote.quote_id),console.log(t),console.log(o.price),console.log(this.quote),console.log(o),console.log(e),console.groupEnd()),this.selected_vehicle=t,this.quote_price=o.price,this.display_vehicle_src=o.image}}},D=Object(h.a)(P,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"col-sm-auto"},[o("div",{staticClass:"card quote-card"},[o("img",{staticClass:"card-img-top",attrs:{src:e.display_vehicle_src,alt:"Vehicle type image"}}),e._v(" "),"best"==e.displayResultsType&&e.quote.highlight?o("div",{staticClass:"card-header"},[e._v(e._s(e.quote.highlight))]):e._e(),e._v(" "),o("div",{staticClass:"card-body"},[o("h5",{staticClass:"card-title"},[e._v(e._s(e.quote.company_name))]),e._v(" "),o("p",{staticClass:"card-text text-center display-4",domProps:{innerHTML:e._s(e.displayPrice)}}),e._v(" "),o("select",{staticClass:"custom-select",on:{change:e.onQuoteVehicleChange}},e._l(e.quote.vehicles,(function(t,s){return o("option",{key:s,domProps:{value:s}},[e._v(e._s(t.name))])})),0),e._v(" "),o("biq-book-now-c2a",{attrs:{journeyID:e.journeyID,quoteID:e.quote.quote_id,"selected-vehicle-index":e.selected_vehicle,label:e.c2aLabel,useButtons:e.useButtons},on:{c2aClick:function(t){return e.$emit("c2aClick",t)}}})],1)])])}),[],!1,null,null,null).exports,w={name:"QuoteCardReducedToTypeAndClass",components:{"biq-book-now-c2a":I},props:{journeyID:{type:String,required:!0,default:""},quote:{type:Object,required:!0,default:function(){return null}},type:{type:String,required:!0,default:""},c2aLabel:{type:String,default:"Book Now"},debugging:{type:Boolean,default:!1},useButtons:{type:Boolean,default:!0}},data(){return{type_map:{cheapest:"Cheapest Price",exec:"Best Executive",luxury:"Best Luxury",chauffeur:"Best Chauffeur"},quote_price:this.quote.price,selected_vehicle:this.quote.selected_vehicle,display_vehicle_src:this.quote.vehicle.image}},computed:{displayPrice:function(){return"&pound;"+new Number(this.quote_price).toFixed(2)},mappedType:function(){return this.type_map.hasOwnProperty(this.type)?this.type_map[this.type]:"undefined"},vehicleAlt:function(){return this.mappedType+" Vehicle type image"}}},T={name:"TheSearchResults",components:{"biq-quote-card-vehicle-select":D,"biq-quote-card-reduced-to-type-and-class":Object(h.a)(w,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"col-sm-auto"},[o("div",{staticClass:"card quote-card"},[o("img",{staticClass:"card-img-top",attrs:{src:e.display_vehicle_src,alt:e.vehicleAlt}}),e._v(" "),o("div",{staticClass:"card-header"},[e._v("\n            "+e._s(e.mappedType)+"\n        ")]),e._v(" "),o("div",{staticClass:"card-body"},[o("h6",{staticClass:"card-subtitle mb-2 text-muted"},[e._v(e._s(e.quote.vehicle.name))]),e._v(" "),o("div",{staticClass:"card-text d-flex justify-content-center align-items-center"},[o("div",{staticClass:"badge badge-pill badge-secondary"},[o("font-awesome-icon",{attrs:{icon:"users"}}),e._v(" "+e._s(e.quote.vehicle.passengers))],1),e._v(" "),o("div",[e._v("Â ")]),e._v(" "),o("div",{staticClass:"badge badge-pill badge-secondary"},[o("font-awesome-icon",{attrs:{icon:"suitcase"}}),e._v(" "+e._s(e.quote.vehicle.luggage_small))],1)]),e._v(" "),o("p",{staticClass:"card-text text-center display-4",domProps:{innerHTML:e._s(e.displayPrice)}}),e._v(" "),o("biq-book-now-c2a",{attrs:{journeyID:e.journeyID,quoteID:e.quote.quote_id,"selected-vehicle-index":e.selected_vehicle,label:e.c2aLabel,"use-buttons":e.useButtons},on:{c2aClick:function(t){return e.$emit("c2aClick",t)}}})],1)])])}),[],!1,null,null,null).exports},props:{displayResultsType:{type:String,required:!0,default:"type_class"},debugging:{type:Boolean,default:!1},useButtons:{type:Boolean,default:!0}},data(){return{loading_label:"Loading...",zero_quotes_error_message:"Sorry, we could not find any quotes for the selected journey.  Please try a different journey.",quote_card:"type_class"==this.displayResultsType?"biq-quote-card-reduced-to-type-and-class":"biq-quote-card-vehicle-select"}},computed:Object(i.c)(["hasSearchResults","displayQuotes","loadingQuotes","quotesError","zeroQuotes","journeyID"])},O=(o(248),{name:"HomePage",mixins:[_],components:{"the-biq-search-form":E,"the-biq-search-results":Object(h.a)(T,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"biq-search-results"}},[e.loadingQuotes?o("div",[e._t("loading-quotes",[o("div",{staticClass:"row"},[o("div",{staticClass:"spinner-border spinner-border-sm"}),e._v(e._s(e.loading_label)+"\n            ")])])],2):e._e(),e._v(" "),e.quotesError?o("div",[e._t("quotes-error",[o("p",[e._v(e._s(e.quotesError))])],{error:{message:e.quotesError}})],2):e._e(),e._v(" "),e.zeroQuotes?o("div",[e._t("zero-quotes",[o("p",[e._v(e._s(e.zero_quotes_error_message))])],{error:{message:e.zero_quotes_error_message}})],2):e._e(),e._v(" "),e.hasSearchResults?o("div",{staticClass:"row"},e._l(e.displayQuotes,(function(t,s){return o(e.quote_card,{key:"quote_"+t.quote_id+"_"+t.selected_vehicle,tag:"component",attrs:{journeyID:e.journeyID,quote:t,"display-results-type":e.displayResultsType,type:s,debugging:e.debugging,"use-buttons":e.useButtons},on:{c2aClick:function(t){return e.$emit("c2aClick",t)}}})})),1):e._e()])}),[],!1,null,"e6fa8a42",null).exports},props:{searchFormData:{type:Object,default:function(){return{}}},searchOnLoad:{type:Boolean,default:!1}},created(){this.searchOnLoad&&this.$store.commit("searchingQuotesFor",this.searchFormPropData()),this.displayType!==this.appSettings.quote_type&&this.hasSearchResults&&this.changeDisplayType(this.appSettings.quote_type)},computed:{...Object(i.c)(["hasSearchResults","displayType","loadingQuotes","quotesError","quotesLoaded","journeyID","journeyQuotes","quoteID","vehicleIndex"]),showResults:function(){return this.loadingQuotes||this.quotesError||this.quotesLoaded}},methods:{...Object(i.b)(["searchedQuotes","changeDisplayType","apiQuotesError","bookNow"]),searchFormPropData:function(){this.debugging&&(console.group("BIQ Search Form POST prop data"),console.log(this.searchFormData),console.groupEnd());const e={journey_type:void 0!==this.searchFormData.journey_type?this.searchFormData.journey_type:"",pickup:void 0!==this.searchFormData.pickup?this.searchFormData.pickup:"",vias:void 0!==this.searchFormData.via?[this.searchFormData.via]:[],destination:void 0!==this.searchFormData.destination?this.searchFormData.destination:"",date:void 0!==this.searchFormData.date?this.searchFormData.date:"",time:void 0!==this.searchFormData.time?this.searchFormData.time:"",people:void 0!==this.searchFormData.people?this.searchFormData.people:"1"};let t="",o="";return void 0!==this.searchFormData.return_date&&(t=this.searchFormData.return_date,void 0!==this.searchFormData.return_time&&(o=this.searchFormData.return_time)),e.returning={date:t,time:o},e},onQuotesSearched:function(e){this.debugging&&(console.group("BIQ Quotes Searched"),console.log(e)),this.updateSearchState(e.data),this.debugging&&console.groupEnd()},onZeroQuotes:function(e){this.debugging&&(console.group("BIQ Quotes Search Zero Results"),console.log(e)),console.error(e.data.error),this.updateSearchState(e.data),this.debugging&&console.groupEnd()},onQuotesError:function(e){this.debugging&&(console.group("BIQ Quotes Search Error"),console.log(e),console.groupEnd());const t=e.data.error.message||"Unknown BIQ Quotes API Error";console.error(e.data.error),this.apiQuotesError(t)},onBookNowClicked:function(e){this.debugging&&(console.group("BIQ Quote Book Now Clicked"),console.log(e)),e.preventDefault();const{quoteID:t,selectedVehicleIndex:o}=e.data;this.debugging&&(console.log(t),console.log(o),console.log(this.journeyQuotes[t]),console.groupEnd()),this.bookNow({quote:t,vehicle:o,quote_data:this.journeyQuotes[t]}),this.$router.push({name:"CheckoutPage",params:{journey:this.journeyID,quote:this.quoteID,vehicle:this.vehicleIndex}})},updateSearchState:function(e){this.debugging&&(console.group("BIQ Quotes Search State Updated"),console.log(e),console.log(this.appSettings.quote_type),console.groupEnd()),this.searchedQuotes({...e,display_type:this.appSettings.quote_type})}}}),B=Object(h.a)(O,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("the-biq-search-form",{attrs:{"api-public-key":this.appSettings.biq_pk,"api-places-lookup":""+e.appSettings.biq_api_host+e.appConfig.PLACES_URI,"api-quotes-from":""+e.appSettings.biq_api_host+e.appConfig.QUOTE_URI,"search-on-load":e.searchOnLoad,debugging:e.debugging,"use-buttons":e.appConfig.useButtons},on:{biqQuotesSearched:e.onQuotesSearched,biqQuotesError:e.onQuotesError,biqZeroQuotes:e.onZeroQuotes}}),e._v(" "),e.showResults?o("the-biq-search-results",{attrs:{"display-results-type":e.appSettings.quote_type,debugging:e.debugging,"use-buttons":e.appConfig.useButtons},on:{c2aClick:e.onBookNowClicked},scopedSlots:e._u([{key:"loading-quotes",fn:function(){return[o("div",{staticClass:"row"},[e._v("\n                Generating Quotes...\n            ")])]},proxy:!0},{key:"zero-quotes",fn:function(t){var s=t.error;return[o("p",[e._v(e._s(s.message))])]}}],null,!1,2758508769)}):e._e()],1)}),[],!1,null,null,null).exports,x={name:"PassengerDetailsForm",mixins:[b],props:{values:{type:Object,default:function(){return{name:"",email:"",telephone:"",flight_number:""}}}},data:()=>({heading:"Passenger Details",fields:{name:{value:"",label:"Name",required:!0,error:null,errorMsg:"Booking name must be set",id:"customer_name",placeholder:"Enter your name",help:"The name of the person travelling."},email:{value:"",label:"Email",required:!0,error:null,errorMsg:"Email location must be set",id:"customer_email",placeholder:"Enter your email",help:"We'll never share your email with anyone else."},telephone:{value:"",label:"Mobile telephone",required:!0,error:null,errorMsg:"Telephone must be set",id:"telephone",placeholder:"Enter a mobile number",help:"Valid UK mobile numbers only, please."},flight_number:{value:"",label:"Flight #",required:!1,error:null,errorMsg:"",id:"flight_number",placeholder:"Enter your flight number",help:"If this is an airport pickup or dropoff, the relevent flight number"}}})},Q=Object(h.a)(x,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"biq-passenger-details-form-section"}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("h4",{attrs:{id:"tc_plugin-passenger-heading"}},[e._v(e._s(e.heading))])])]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col",attrs:{id:"tcplugin-passenger-name"}},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:e.fields.name.id}},[e._v(e._s(e.fields.name.label))]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.fields.name.value,expression:"fields.name.value"}],staticClass:"form-control",class:e.errorStateClass("name"),attrs:{id:e.fields.name.id,placeholder:e.fields.name.placeholder,required:e.fields.name.required,type:"text","aria-describedby":"nameHelp"},domProps:{value:e.fields.name.value},on:{input:function(t){t.target.composing||e.$set(e.fields.name,"value",t.target.value)}}}),e._v(" "),o("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[e._v(e._s(e.fields.name.help))])])]),e._v(" "),o("div",{staticClass:"col"},[o("div",{staticClass:"form-group",attrs:{id:"tcplugin-email"}},[o("label",{attrs:{for:e.fields.email.id}},[e._v(e._s(e.fields.email.label))]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.fields.email.value,expression:"fields.email.value"}],staticClass:"form-control",class:e.errorStateClass("email"),attrs:{id:e.fields.email.id,placeholder:e.fields.email.placeholder,required:e.fields.email.required,type:"email","aria-describedby":"emailHelp"},domProps:{value:e.fields.email.value},on:{input:function(t){t.target.composing||e.$set(e.fields.email,"value",t.target.value)}}}),e._v(" "),o("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[e._v(e._s(e.fields.email.help))])])])]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col",attrs:{id:"tcplugin-passenger-telephone"}},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:e.fields.telephone.id}},[e._v(e._s(e.fields.telephone.label))]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.fields.telephone.value,expression:"fields.telephone.value"}],staticClass:"form-control",class:e.errorStateClass("telephone"),attrs:{id:e.fields.telephone.id,placeholder:e.fields.telephone.placeholder,required:e.fields.telephone.required,type:"text","aria-describedby":"mobileHelp"},domProps:{value:e.fields.telephone.value},on:{input:function(t){t.target.composing||e.$set(e.fields.telephone,"value",t.target.value)}}}),e._v(" "),o("small",{staticClass:"form-text text-muted",attrs:{id:"mobileHelp"}},[e._v(e._s(e.fields.telephone.label))])])]),e._v(" "),o("div",{staticClass:"col"},[o("div",{staticClass:"form-group",attrs:{id:"tcplugin-flight-number"}},[o("label",{attrs:{for:e.fields.flight_number.id}},[e._v(e._s(e.fields.flight_number.label))]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.fields.flight_number.value,expression:"fields.flight_number.value"}],staticClass:"form-control",class:e.errorStateClass("flight_number"),attrs:{id:e.fields.flight_number.id,placeholder:e.fields.flight_number.placeholder,required:e.fields.flight_number.required,type:"text","aria-describedby":"flightHelp"},domProps:{value:e.fields.flight_number.value},on:{input:function(t){t.target.composing||e.$set(e.fields.flight_number,"value",t.target.value)}}}),e._v(" "),o("small",{staticClass:"form-text text-muted",attrs:{id:"flightHelp"}},[e._v(e._s(e.fields.flight_number.help))])])])])])}),[],!1,null,null,null).exports;class R{constructor(e,t,o){this.getPublicHandler=this.getPublicHandler.bind(this),this.getHandlerName=this.getHandlerName.bind(this),this.getAmount=this.getAmount.bind(this),this.getDescriptor=this.getDescriptor.bind(this),this.setAmount=this.setAmount.bind(this),this.updateAmount=this.updateAmount.bind(this),this.getTransactionToken=this.getTransactionToken.bind(this),this.handle=this.handle.bind(this),this.country="GB",this.currency="gbp",this.transactionSuccessCB=e,this.transactionFailCB=t,this.debugging=o,this.amount=0,this.descriptor="",this.paymentHandlerName="unknown"}getPublicHandler(){return{getHandlerName:this.getHandlerName,getAmount:this.getAmount,getDescriptor:this.getDescriptor,updateAmount:this.updateAmount,getTransactionToken:this.getTransactionToken}}getHandlerName(){return this.paymentHandlerName}getAmount(){return this.amount}getDescriptor(){return this.descriptor}setAmount(e,t){this.amount=100*e,this.descriptor=t}updateAmount(e){this.amount=100*e}getTransactionToken(e,t,o,s){this.handle(this.getPublicHandler,this.transactionSuccessCB,this.transactionFailCB,{...s,key:e,quote:t,vehicle:o})}handle(e,t,o,s){o(e(),"No payment handler to handle the transaction")}}class $ extends R{constructor(e,t,o){super(e,t,o),this.getPublicHandler=this.getPublicHandler.bind(this),this.handle=this.handle.bind(this),this.initialise=this.initialise.bind(this),this.mountElement=this.mountElement.bind(this),this.unmountElement=this.unmountElement.bind(this),this.getCustomerToken=this.getCustomerToken.bind(this),this.setCustomerToken=this.setCustomerToken.bind(this),this.getClientSecretIntent=this.getClientSecretIntent.bind(this),this.paymentHandlerName="jstoken_stripe",this.customer_token=null,this.elementMounted=!1,this.elementMountedOn="stripe-card-form"}initialise(e,t,o,s,i){this.debugging&&(console.group("Stripe card form handler initialising..."),console.info(e),console.info(t),console.info(o),console.info(s),console.info(i)),this.pk=e,this.intent_secret_uri=t,this.elementMountedOn=o,this.stripe=Stripe(this.pk),this.stripeElements=this.stripe.elements();const r={style:s,hidePostalCode:void 0!==i&&!!i};this.debugging&&console.info(r),this.card=this.stripeElements.create("card",r),this.debugging&&(console.log("Stripe card form handler initialised"),console.groupEnd())}getPublicHandler(){return{...super.getPublicHandler(),mountElement:this.mountElement,unmountElement:this.unmountElement,getCustomerToken:this.getCustomerToken,setCustomerToken:this.setCustomerToken}}mountElement(){this.elementMounted||(this.debugging&&console.log("Mounting Stripe card element on "+this.elementMountedOn),this.card.mount(document.getElementById(this.elementMountedOn)),this.elementMounted=!0)}unmountElement(){this.elementMounted&&(this.debugging&&console.log("Unmounting Stripe card element from "+this.elementMountedOn),this.card.unmount(document.getElementById(this.elementMountedOn)),this.elementMounted=!1)}getCustomerToken(){return this.customer_token}setCustomerToken(e){this.customer_token=e}handle(e,t,o,s){const{key:i,quote:r,vehicle:a,cardholder_name:n,billing_postcode:l}=s,u=this.stripe,c=this.card;this.getClientSecretIntent(i,r,a).then(s=>{u.confirmCardPayment(s,{payment_method:{card:c,billing_details:{name:n,address:{postal_code:l}}}},{handleActions:!1}).then(i=>{if(i.error)o(e(),i.error);else{if(i.paymentIntent.hasOwnProperty("status")&&"succeeded"===i.paymentIntent.status)return void t(e(),i.paymentIntent);u.confirmCardPayment(s).then(s=>{s.error?o(e(),s.error):t(e(),s.paymentIntent)})}}).catch(t=>{o(e(),t)})})}getClientSecretIntent(e,t,o){const s=this.getPublicHandler(),i=this.intent_secret_uri,r=this.debugging;return this.debugging&&console.group("Getting client secret from "+i),new Promise((a,n)=>{const l=new FormData;l.append("handler",s.getHandlerName()),l.append("key",e),l.append("quote",t),l.append("vehicle",o),p()({url:i,method:"post",data:l,responseType:"json",headers:{"Content-Type":"application/application/x-www-form-urlencoded"}}).then(e=>{r&&(console.log(e),console.groupEnd()),a(e.data.response.intent.client_secret)}).catch(e=>{let t=e;t=e.response?e.response:e.request?e.request:e.message,console.error(e),r&&(console.warn(`The error message received was: '${t}'`),console.info(l),console.groupEnd()),n(t)})})}}var F={name:"StripeCardFormElement",components:{"biq-process-form-submit":q},props:{apiClientSecretFrom:{type:String,required:!0,default:"//booking/client_gateway_secret/"},stripePublicKey:{type:String,required:!0,default:""},stripeCardFormStyle:{type:Object,required:!0,default:function(){return{base:{fontFamily:"'Muli', sans-serif",fontSize:"14px",color:"#333"},invalid:{color:"red"}}}},hidePostalCode:{type:Boolean,default:!1},processing:{type:Boolean,default:!1},amount:{type:Number,required:!0,default:0},descriptor:{type:String,default:""},id:{type:String,default:"biq-stripe-card-details"},label:{type:String,default:"Card Details"},validClass:{type:String,default:""},errorClass:{type:String,default:"is-invalid"},debugging:{type:Boolean,default:!1},useButtons:{type:Boolean,default:!0}},data(){return{mount_on:"stripe-card-form",validation_run:!1,has_errors:!1,paymentHandler:new $(this.onHandlerSuccess,this.onHandlerError,this.debugging)}},computed:{errorStateClass:function(){return this.validation_run?this.has_errors?this.errorClass:this.validClass:""}},created(){this.paymentHandler.initialise(this.stripePublicKey,this.apiClientSecretFrom,this.mount_on,this.stripeCardFormStyle,this.hidePostalCode)},mounted(){this.paymentHandler.setAmount(this.amount,this.descriptor),this.paymentHandler.mountElement()},methods:{onSubmit:function(e){this.processing||(e.data={paymentHandler:this.paymentHandler.getPublicHandler()},this.$emit("submit",e))},onHandlerSuccess:function(e,t){const o={data:{paymentHandler:e,paymentIntent:t}};this.$emit("transactionSuccess",o)},onHandlerError:function(e,t){t.hasOwnProperty("message")&&t.message||(t.message="Unknown Stripe Error");const o={data:{paymentHandler:e,error:t}};this.$emit("transactionError",o)},validate:function(){this.validation_run=!0;const e=this.$refs.card.classList;return this.has_errors=e.contains("StripeElement--invalid")||e.contains("StripeElement--empty"),!this.has_errors}}},L={name:"StripeCardPayment",mixins:[b],components:{"stripe-card-form-element":Object(h.a)(F,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"col",attrs:{id:e.id}},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"control-label",attrs:{for:e.mount_on}},[e._v(e._s(e.label))]),e._v(" "),o("div",{ref:"card",staticClass:"form-control stripe-card-container",class:e.errorStateClass,attrs:{id:e.mount_on}})]),e._v(" "),o("div",{staticClass:"form-group"},[o("biq-process-form-submit",{attrs:{processing:e.processing,"use-buttons":e.useButtons,label:"Book Now"},on:{click:e.onSubmit}})],1)])}),[],!1,null,null,null).exports},props:{appConfig:{type:Object,required:!0,default:function(){return null}},appSettings:{type:Object,required:!0,default:function(){return null}},stripeCardFormStyle:{type:Object,required:!0,default:function(){return{base:{fontFamily:"'Muli', sans-serif",fontSize:"14px",color:"#333"},invalid:{color:"red"}}}},values:{type:Object,default:function(){return{cardholder_name:"",billing_postcode:""}}},processing:{type:Boolean,default:!1},amount:{type:Number,required:!0,default:0},descriptor:{type:String,default:""},id:{type:String,default:"biq-stripe-card-details"},name:{type:String,default:"stripe"},label:{type:String,default:"Card Details"}},data:()=>({fields:{cardholder_name:{value:"",label:"Cardholder Name",required:!0,error:!1,errorMsg:"Cardholder name must be set",id:"card-holder-name",placeholder:"Cardholder Name"},billing_postcode:{value:"",label:"Billing Postcode",required:!0,error:!1,errorMsg:"Billing address postcode must be set",id:"billing-postcode",placeholder:"Billing Postcode"}},card_error:!1,card_error_message:""}),methods:{onSubmit:function(e){this.processing||(this.card_error=!1,this.card_error_message="",e.data={source:this.name,...e.data},this.$emit("submit",e))},onTransactionSuccess:function(e){const{cardholder_name:t,billing_postcode:o}=this.fields;e.data={source:this.name,...e.data,formdataAppend:s=>(this.debugging&&console.log(e.data.paymentIntent),s.append("card_cardholder",t.value),s.append("postcode",o.value),s)},this.$emit("transactionSuccess",e)},onTransactionError:function(e){this.card_error=!0,this.card_error_message=e.data.error.message,e.data={source:this.name,type:"transaction",...e.data},this.$emit("transactionError",e)},specialValidationErrors:function(){const e={};return this.$refs.card.has_errors&&(e.card=this.card_error?this.card_error_message:"Please provide valid card details"),{...e}},validate:function(){let e=0;return this.$refs.card.validate()||e++,this.validateValues()||e++,0==e}}},H=(o(249),Object(h.a)(L,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"row"},[o("div",{staticClass:"col",attrs:{id:"tcplugin-cardholder-details"}},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:e.fields.cardholder_name.id}},[e._v(e._s(e.fields.cardholder_name.label))]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.fields.cardholder_name.value,expression:"fields.cardholder_name.value"}],staticClass:"form-control",class:e.errorStateClass("cardholder_name"),attrs:{id:e.fields.cardholder_name.id,placeholder:e.fields.cardholder_name.placeholder,required:e.fields.cardholder_name.required,type:"text"},domProps:{value:e.fields.cardholder_name.value},on:{input:function(t){t.target.composing||e.$set(e.fields.cardholder_name,"value",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:e.fields.billing_postcode.id}},[e._v(e._s(e.fields.billing_postcode.label))]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.fields.billing_postcode.value,expression:"fields.billing_postcode.value"}],staticClass:"form-control",class:e.errorStateClass("billing_postcode"),attrs:{id:e.fields.billing_postcode.id,placeholder:e.fields.billing_postcode.placeholder,required:e.fields.billing_postcode.required,type:"text"},domProps:{value:e.fields.billing_postcode.value},on:{input:function(t){t.target.composing||e.$set(e.fields.billing_postcode,"value",t.target.value)}}})])]),e._v(" "),o("stripe-card-form-element",{ref:"card",attrs:{"api-client-secret-from":""+e.appSettings.biq_api_host+e.appConfig.CLIENT_SECRET_URI,"stripe-public-key":e.appSettings.stripe_pk,amount:e.amount,"stripe-card-form-style":e.stripeCardFormStyle,"hide-postal-code":e.appConfig.PGH_CONF.hidePostalCode,processing:e.processing,id:e.id,label:e.label,descriptor:e.descriptor,debugging:e.debugging,"use-buttons":e.appConfig.useButtons},on:{submit:e.onSubmit,transactionSuccess:e.onTransactionSuccess,transactionError:e.onTransactionError}})],1)}),[],!1,null,"b4260268",null).exports);class A extends R{constructor(e,t,o){super(e,t,o),this.handle=this.handle.bind(this),this.paymentHandlerName="paypal"}handle(e,t,o,s){const{key:i,quote:r,vehicle:a,nonce:n}=s;this.debugging&&(console.group("Paypal payment transaction handler"),console.log(s),console.log(i),console.log(r),console.log(a),console.log(n),console.groupEnd());const l={id:n};t(e(),l)}}var N={name:"PaypalPayment",components:{"biq-process-form-submit":q},props:{authorization:{type:String,required:!0,default:""},processing:{type:Boolean,default:!1},amount:{type:Number,required:!0,default:0},descriptor:{type:String,default:""},id:{type:String,default:"biq-paypal-plugin"},name:{type:String,default:"paypal"},label:{type:String,default:"Pay With Paypal"},debugging:{type:Boolean,default:!1},useButtons:{type:Boolean,default:!0}},data(){return{setup:{flow:"checkout",amount:this.amount,currency:"GBP"},paymentHandler:new A(this.onHandlerSuccess,this.onHandlerError,this.debugging),error:!1,error_message:""}},mounted(){this.paymentHandler.setAmount(this.amount,this.descriptor)},methods:{onHandlerSuccess:function(e,t){const o={data:{source:this.name,type:"transaction",paymentHandler:e,paymentIntent:t,formdataAppend:e=>e}};this.$emit("transactionSuccess",o)},onHandlerError:function(e,t){t.hasOwnProperty("message")&&t.message||(t.message="Unknown Paypal Error");const o={data:{source:this.name,type:"transaction",paymentHandler:e,error:t}};this.$emit("transactionError",o)},onTransactionSuccess:function(e){this.debugging&&(console.group("Paypal transaction succeeded event"),console.log(e),console.groupEnd()),this.processing||(this.card_error=!1,this.card_error_message="",e.data={source:this.name,paymentHandler:this.paymentHandler.getPublicHandler()},this.$emit("submit",e))},onTransactionError:function(e){this.debugging&&(console.group("Paypal transaction error event"),console.log(e),console.groupEnd()),this.onHandlerError(this.paymentHandler.getPublicHandler(),e)},onLoadFail:function(e){this.debugging&&(console.group("Paypal loading error event"),console.log(e),console.groupEnd()),e.hasOwnProperty("message")&&e.message||(e.message="Unknown Paypal Loading Error");const t={data:{source:this.name,type:"loading",paymentHandler:this.paymentHandler.getPublicHandler(),error:e}};this.$emit("transactionError",t)}}},U=Object(h.a)(N,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"row"},[o("div",{staticClass:"col"}),e._v(" "),o("div",{staticClass:"col",attrs:{id:e.id}},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"control-label",attrs:{for:"paypal"}},[e._v(e._s(e.label))]),e._v(" "),o("v-braintree",{attrs:{authorization:e.authorization,paypal:e.setup},on:{success:e.onTransactionSuccess,error:e.onTransactionError,loadFail:e.onLoadFail},scopedSlots:e._u([{key:"button",fn:function(t){return[o("div",{staticClass:"form-group"},[o("biq-process-form-submit",{attrs:{processing:e.processing,"use-buttons":e.useButtons,label:"Book Now"},on:{click:function(e){return e.preventDefault(),t.submit(e)}}})],1)]}}])})],1)])])}),[],!1,null,null,null).exports;var V={name:"TheCheckoutForm",mixins:[b],components:{"biq-passenger-details-form-section":Q,"stripe-card-payment":H,"paypal-payment":U},props:{appConfig:{type:Object,required:!0,default:function(){return null}},appSettings:{type:Object,required:!0,default:function(){return null}},stripeCardFormStyle:{type:Object,required:!0,default:function(){return{base:{fontFamily:"'Muli', sans-serif",fontSize:"14px",color:"#333"},invalid:{color:"red"}}}},paypalClientToken:{type:String,required:!0,default:""},processing:{type:Boolean,default:!1}},data:()=>({payment_heading:"Payment Details",transaction_descriptor:"Taxi Journey",has_errors:!1,error_message:"",fields:{method:{selected:"Pay with Card",options:["Pay with Card","Pay with Paypal"],label:"Select Payment Method:",errorMsg:"Cardholder name must be set",id:"tcplugin-payament-select"}}}),computed:{...Object(i.c)(["journeyID","processed","basket","quoteID","vehicleIndex","price"]),isCardPayment:function(){return"Pay with Card"===this.fields.method.selected},isPaypalPayment:function(){return"Pay with Paypal"===this.fields.method.selected}},methods:{...Object(i.b)(["quoting","quoted","bookNow","booking","booked","bookingFailed"]),onSubmit:function(e){if(this.processing)return;if(this.booking(),!this.validate())return this.debugging&&(console.group(`BIQ CheckoutForm '${e.data.source}' Validation Error`),console.log(e),console.log(this.errors),console.groupEnd()),this.bookingFailed(),!1;this.debugging&&(console.group(`BIQ CheckoutForm '${e.data.source}' Submit Event`),console.log(e),console.groupEnd()),this.error_message="",this.has_errors=!1;let t=null;switch(e.data.source){case"paypal":return t={...e},e.data.paymentHandler.getTransactionToken(this.appSettings.biq_pk,this.quoteID,this.vehicleIndex,t);case"stripe":return t={...this.$refs.cardForm.inputValues()},e.data.paymentHandler.getTransactionToken(this.appSettings.biq_pk,this.quoteID,this.vehicleIndex,t);default:return this.$emit("submit",e)}},onTransactionSuccess:function(e){const{paymentHandler:t,paymentIntent:o,formdataAppend:s}=e.data;this.makeBooking(o.id,t.getHandlerName(),s)},onTransactionError:function(e){this.error_message=e.data.error.message,this.has_errors=!0,e.data.booking=null,this.bookingFailed(),this.$emit("checkoutError",e)},validate:function(){let e=0,t={};return this.$refs.passengerForm.validate()||(t={...t,...this.$refs.passengerForm.validationErrors()},e++),this.isCardPayment&&(this.$refs.cardForm.validate()||(t={...t,...this.$refs.cardForm.validationErrors()},e++)),this.errors=t,0==e},makeBooking:function(e,t,o){const s=this,i=this.assembleData(e,t,o),r=`${this.appSettings.biq_api_host}${this.appConfig.PAYMENT_URI}`;this.debugging&&console.info(`BIQ Checkout transaction attempt to API '${r}'`),p.a.post(r,i,{headers:{"Content-Type":"application/application/x-www-form-urlencoded"}}).then(e=>{if("OK"!=e.data.status)throw new ErrorEvent(e.data.status,{error:new Error("BIQ API Checkout Error"),message:e.data[e.data.status.toLowerCase()]});s.checkoutComplete(e.data)}).catch(o=>{s.has_errors=!0,s.error_message=o.message||"Unknown BIQ API Checkout Error",this.bookingFailed();const a={data:{type:"booking",booking:{URL:r,refunded:!1,token:e,method:t,formData:i},error:o}};s.$emit("checkoutError",a)})},assembleData:function(e,t,o){const s=new FormData,i=this.$refs.passengerForm.inputValues();return console.log(i),s.append("key",this.appSettings.biq_pk),s.append("quote",this.quoteID),s.append("vehicle",this.vehicleIndex),s.append("new_pay",!0),s.append("email",i.email),s.append("name",i.name),s.append("telephone",i.telephone),s.append("payment_token",e),s.append("method",t),"function"==typeof o&&o(s),i.flight_number&&s.append("flight_number",i.flight_number),this.appSettings.booking_test_mode&&s.append("test","1"),s},checkoutComplete:function(e){const t=this.booked,o={updateCheckoutState:()=>t({booking_ref:e.reference}),data:{booking_ref:e.reference,status:e.status}};this.$emit("checkoutComplete",o)}}},M=Object(h.a)(V,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("form",{attrs:{id:"purchaseform"}},[o("biq-passenger-details-form-section",{ref:"passengerForm",attrs:{debugging:e.debugging}}),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("h4",{attrs:{id:"tc_plugin-payment-heading"}},[e._v(e._s(e.payment_heading))])])]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col",attrs:{id:e.fields.method.id}},[e._v(e._s(e.fields.method.label))]),e._v(" "),o("div",{staticClass:"col"},[o("b-form-select",{attrs:{options:e.fields.method.options},model:{value:e.fields.method.selected,callback:function(t){e.$set(e.fields.method,"selected",t)},expression:"fields.method.selected"}})],1)]),e._v(" "),e.isCardPayment?o("stripe-card-payment",{ref:"cardForm",attrs:{"app-config":e.appConfig,"app-settings":e.appSettings,processing:e.processing,amount:e.price,descriptor:e.transaction_descriptor,"stripe-card-form-style":e.stripeCardFormStyle,debugging:e.debugging,id:"tcplugin-stripe-card-details",label:"Card Details"},on:{submit:e.onSubmit,transactionSuccess:e.onTransactionSuccess,transactionError:e.onTransactionError}}):e.isPaypalPayment?o("paypal-payment",{ref:"paypalForm",attrs:{authorization:e.paypalClientToken,processing:e.processing,amount:e.price,descriptor:e.transaction_descriptor,debugging:e.debugging,useButtons:e.appConfig.useButtons,id:"tcplugin-paypal-plugin",label:"Or Pay With Paypal"},on:{submit:e.onSubmit,transactionSuccess:e.onTransactionSuccess,transactionError:e.onTransactionError}}):o("div",{staticClass:"row"},[o("div",{staticClass:"col"}),e._v(" "),o("div",{staticClass:"col"})])],1),e._v(" "),e.has_errors?o("div",{staticClass:"row"},[e._t("checkout-error",[o("div",{staticClass:"col",attrs:{id:"tcplugin-payment-error"}},[e._v(e._s(e.error_message))])],{error:{message:e.error_message}})],2):e._e()])}),[],!1,null,null,null).exports,G={name:"QuotedJourneyDetails",props:{price:{type:Number,default:0}},computed:Object(i.c)(["journeyDetails","journeyDate","journeyTime","journeyHasReturn","journeyReturnDate","journeyReturnTime","journeyHasVias"])},z={name:"CheckoutPage",mixins:[_],components:{"the-biq-checkout-form":M,"biq-quoted-journey-details":Object(h.a)(G,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"col",attrs:{id:"tcplugin-checkout-booking-details"}},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-header"},[e._v("\n            Booking Details\n        ")]),e._v(" "),o("ul",{staticClass:"list-group list-group-flush"},[o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Date:")]),e._v(" "+e._s(e.journeyDate)+" at "+e._s(e.journeyTime)+"\n            ")]),e._v(" "),o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Travelling From:")]),e._v(" "+e._s(e.journeyDetails.pickup.string)+"\n            ")]),e._v(" "),o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Going To:")]),e._v(" "+e._s(e.journeyDetails.destination.string)+"\n            ")]),e._v(" "),e.journeyHasVias?o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Via:")]),e._v(" "+e._s(e.journeyDetails.vias[0].string)+"\n            ")]):e._e(),e._v(" "),e.journeyHasReturn?o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Returning:")]),e._v(" "+e._s(e.journeyReturnDate)+" at "+e._s(e.journeyReturnTime)+"\n            ")]):e._e(),e._v(" "),e.price>0?o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Price:")]),e._v(" Â£"+e._s(e.price.toFixed(2))+"\n            ")]):e._e()])])])}),[],!1,null,null,null).exports},props:{stripe_cardform_style:{type:Object,required:!0,default:function(){return{base:{fontFamily:"'Muli', sans-serif",fontSize:"14px",color:"#333"},invalid:{color:"red"}}}},paypalClientToken:{type:String,required:!0,default:""}},computed:{...Object(i.c)(["processing","price"])},methods:{onSubmit:function(e){this.debugging&&(console.group("BIQ Checkout Form Submit"),console.log(e),console.groupEnd())},onCheckoutSuccess:function(e){this.debugging&&(console.group("BIQ Checkout Success"),console.log(e),console.groupEnd());const t={name:"CompletePage",params:{booking_ref:e.data.booking_ref}};this.$router.replace(t,e.updateCheckoutState,e.updateCheckoutState)},onCheckoutError:function(e){this.debugging&&(console.group("BIQ Checkout Error"),console.log(e),console.groupEnd())}}},Y=Object(h.a)(z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("the-biq-checkout-form",{ref:"checkout",attrs:{"app-config":e.appConfig,"app-settings":e.appSettings,"stripe-card-form-style":e.stripe_cardform_style,"paypal-client-token":e.paypalClientToken,processing:e.processing,debugging:e.debugging},on:{submit:e.onSubmit,checkoutComplete:e.onCheckoutSuccess,checkoutError:e.onCheckoutError},scopedSlots:e._u([{key:"checkout-error",fn:function(t){var s=t.error;return[o("div",{staticClass:"col",attrs:{id:"tcplugin-payment-error"}},[e._v(e._s(s.message))])]}}])}),e._v(" "),o("div",{staticClass:"row"},[o("biq-quoted-journey-details",{attrs:{price:e.price}})],1)],1)}),[],!1,null,null,null).exports,J={name:"BookingJourneyDetails",props:{bookingDetailsFrom:{type:String,required:!0,default:"//booking-details/?booking_ref="},bookingRef:{type:String,required:!0,default:""},debugging:{type:Boolean,default:!1}},data:()=>({loaded:!1,error:!1,booking:{ref:"",name:"",passengers:1,pickup:"",destination:"",vias:[],date:null,return_date:null}}),mounted(){const e=this;this.loaded=!1,this.error=!1,e.debugging&&(console.group(`Loading Booking Details from '${this.bookingDetailsFrom}'`),console.log({...this.booking})),p.a.get(`${this.bookingDetailsFrom}${this.bookingRef}`).then(t=>{if(e.debugging&&console.log(t),"OK"!=t.data.status)throw new ErrorEvent(t.data.status,{error:new Error("Booking Details Error"),message:t.data[t.data.status.toLowerCase()]});const o={ref:e.bookingRef,name:t.data.booking.passenger.name,passengers:Number.parseInt(t.data.booking.people),pickup:t.data.booking.pickup.string,destination:t.data.booking.destination.string,vias:t.data.booking.vias,date:new Date(Date.parse(t.data.booking.date)),return_date:null};t.data.booking.return&&(o.return_date=new Date(Date.parse(t.data.booking.return))),e.booking=o,e.loaded=!0,e.debugging&&(console.log("Booking Details Loaded"),console.log({...e.booking}),console.groupEnd())}).catch(t=>{e.error=!0;const o={data:{bookingRef:e.bookingRef,URL:e.bookingDetailsFrom,error:t}};e.$emit("detailsLoadError",o),e.debugging&&(console.info("Booking Details Load Error"),console.log(o),console.groupEnd())})},computed:{journeyDate:function(){return null!==this.booking.date?this.booking.date.toDateString():""},journeyTime:function(){return null!==this.booking.date?this.booking.date.toLocaleTimeString():""},journeyReturnDate:function(){return null!==this.booking.return_date?this.booking.return_date.toDateString():""},journeyReturnTime:function(){return null!==this.booking.return_date?this.booking.return_date.toLocaleTimeString():""}}},K={name:"CompletePage",mixins:[_],components:{"biq-booking-journey-details":Object(h.a)(J,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.loaded?o("div",{staticClass:"col",attrs:{id:"biq-journey-details-booked"}},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-header"},[e._v("\n            Booking Details\n        ")]),e._v(" "),o("ul",{staticClass:"list-group list-group-flush"},[o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Booking Reference:")]),e._v(" "+e._s(e.bookingRef)+"\n            ")]),e._v(" "),o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Name:")]),e._v(" "+e._s(e.booking.name)+"\n            ")]),e._v(" "),o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Date:")]),e._v(" "+e._s(e.journeyDate)+" at "+e._s(e.journeyTime)+"\n            ")]),e._v(" "),o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Travelling From:")]),e._v(" "+e._s(e.booking.pickup)+"\n            ")]),e._v(" "),o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Going To:")]),e._v(" "+e._s(e.booking.destination)+"\n            ")])])])]):e._e()}),[],!1,null,null,null).exports},props:{appRESTBase:{type:String,default:"//"}},data(){return{page_heading:"Your booking is complete",page_text:this.appSettings.complete_page_text,booking_load_error:!1}},methods:{onDetailsLoadError:function(){this.booking_load_error=!0}}},W=Object(h.a)(K,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"completePage"}},[o("h3",[e._v(e._s(e.page_heading))]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("p",[e._v(e._s(e.page_text))])]),e._v(" "),o("biq-booking-journey-details",{attrs:{"booking-details-from":""+e.appRESTBase+e.appConfig.BOOKING_DETALS_URI,"booking-ref":""+e.$route.params.booking_ref,debugging:e.debugging},on:{detailsLoadError:e.onDetailsLoadError}})],1)])}),[],!1,null,null,null).exports;s.default.use(f.a);var Z=new f.a({routes:[{path:"/",name:"HomePage",component:B,props:{searchFormData:searchFormData,searchOnLoad:searchOnLoad}},{path:"/:journey",name:"HomePageSearched",component:B,props:{searchFormData:searchFormData,searchOnLoad:searchOnLoad}},{path:"/checkout/:journey/:quote/:vehicle",name:"CheckoutPage",component:Y,props:{stripe_cardform_style:stripe_cardform_style,paypalClientToken:paypalClientToken}},{path:"/complete/:booking_ref",name:"CompletePage",component:W}]}),X=o(118);const ee=(e,t)=>e.price>t.price?1:t.price>e.price?-1:0,te=(e,t)=>e.rating.score>t.rating.score?-1:t.rating.score>e.rating.score?1:0,oe=(e,t)=>{switch(t){case"SORT_BY_PRICE":return e.sort(ee);case"SORT_BY_RATING":return e.sort(te);default:return e}};const se=(e,t,o)=>{const s=[];return console.group("Formatting BIQ Quotes"),Object.keys(e).forEach(o=>{const i={...e[o],quote_id:o,selected_vehicle:0};("best"!=t||"best"==t&&i.highlight)&&s.push(i)}),console.log({...e}),console.log(t),console.log(o),console.groupEnd(),s},ie=e=>{console.group("Reducing BIQ Quotes to type & class only");const t=re(e);console.log({...t});const o=t.sorted,s={};return o.hasOwnProperty("recommended")&&o.recommended.length&&(s.cheapest=o.recommended[0]),o.hasOwnProperty("executive")&&o.executive.length&&(s.exec=o.executive[0]),o.hasOwnProperty("vip")&&o.vip.length&&(s.luxury=o.vip[0]),o.hasOwnProperty("chauffeur")&&o.chauffeur.length&&(s.chauffeur=o.chauffeur[0]),console.log(s),console.groupEnd(),s},re=e=>{let t={},o={};for(let s in e){let i=e[s];if(i.active){t[s]=i,i.quote_id=s;for(let e=0;e<i.vehicles.length;e++){let t={...i};t.selected_vehicle=e,t.vehicle=i.vehicles[e],t.vehicle.index=t.selected_vehicle,t.price=t.vehicle.price;let s=t.vehicle.type.class;delete t.vehicles,o.hasOwnProperty("recommended")||(o.recommended=[]),t.highlight&&(0===e?o.recommended.push(t):t.highlight=!1),o.hasOwnProperty("all")||(o.all=[]),o.all.push(t),o.hasOwnProperty(s)||(o[s]=[]),o[s].push(t)}}}for(let e in o)o[e]=oe(o[e],"SORT_BY_PRICE");return{raw:t,sorted:o}};const ae=new Date;ae.setDate(ae.getDate()+1),ae.setHours(ae.getHours()+2);const ne=e=>e<10?e="0"+e:e,le=()=>({search_details:{journey_type:"One Way",pickup:"",vias:[],destination:"",date:ae.getFullYear()+"-"+ne(ae.getMonth()+1)+"-"+ne(ae.getDate()),time:ne(ae.getHours())+":"+ne(ae.getMinutes())+":"+ne(ae.getSeconds()),people:"1",returning:{date:"",time:""}},results:!1,display_type:"",display_quotes:[]});var ue={state:le(),getters:{searchDetails:e=>e.search_details,hasSearchResults:e=>e.results,displayType:e=>e.display_type,displayQuotes:e=>e.display_quotes},actions:{resetSearch({commit:e,dispatch:t}){t("resetQuotes",null,{root:!0}),e("resetSearchState")},searchingQuotes({commit:e,dispatch:t},o){e("resetSearchState"),t("quoting",null,{root:!0}),e("searchingQuotesFor",o)},searchedQuotes({commit:e,dispatch:t},o){if(t("quoted",o,{root:!0}),Object.keys(o.quotes).length>0){e("displaying",{type:o.display_type,quotes:"type_class"==o.display_type?ie(o.quotes):se(o.quotes,o.display_type,"SORT_BY_PRICE")})}},changeDisplayType({commit:e,rootGetters:t},o){e("displaying",{type:o,quotes:"type_class"==o?ie(t.journeyQuotes):se(t.journeyQuotes,o,"SORT_BY_PRICE")})}},mutations:{resetSearchState(e){Object.assign(e,le())},searchingQuotesFor(e,t){e.search_details=t},displaying(e,t){e.display_quotes=t.quotes,e.display_type=t.type,e.results=!0}}};const ce={string:"",postcode:"",position:[0,0]},de=()=>({quoting:!1,quotes_loaded:!1,api_error:!1,journey_id:"",journey_details:{pickup:ce,destination:ce,vias:[],people:1,return:!1,date:"",distance:1,duration:116,duration_text:"1 min",quote_type:"mileage",is_airport:!1,hourly:!1},journey_quotes:{}});var pe={state:de(),getters:{loadingQuotes:e=>e.quoting,quotesError:e=>e.api_error,quotesLoaded:e=>e.quotes_loaded,zeroQuotes:e=>!!e.quotes_loaded&&0===Object.keys(e.journey_quotes).length,journeyID:e=>e.journey_id,journeyDetails:e=>e.journey_details,journeyDate:e=>new Date(Date.parse(e.journey_details.date)).toDateString(),journeyTime:e=>new Date(Date.parse(e.journey_details.date)).toLocaleTimeString(),journeyReturnDate:e=>new Date(Date.parse(e.journey_details.return)).toDateString(),journeyReturnTime:e=>new Date(Date.parse(e.journey_details.return)).toLocaleTimeString(),journeyHasReturn:e=>!!e.journey_details.return,journeyHasVias:e=>Array.isArray(e.journey_details.vias)&&e.journey_details.vias.length>0,journeyQuotes:e=>e.journey_quotes},actions:{resetQuotes({commit:e}){e("resetQuotesState")},quoting({commit:e,dispatch:t}){e("resetQuotesState"),t("resetCheckout",null,{root:!0}),e("searching")},apiQuotesError({commit:e},t){e("quotesError",{api_error:t}),e("searched")},quoted({commit:e},t){e("searched"),e("quotes",t)}},mutations:{resetQuotesState(e){Object.assign(e,de())},searching(e){e.quoting=!0},quotesError(e,t){e.api_error=t.api_error},searched(e){e.quoting=!1},quotes(e,t){e.journey_id=t.journey_id,e.journey_quotes=t.quotes,e.journey_details={pickup:t.journey.pickup,destination:t.journey.destination,vias:t.journey.vias,people:t.journey.people,return:t.journey.return,date:t.journey.date,distance:t.journey.distance,duration:t.journey.duration,duration_text:t.journey.duration_text,quote_type:t.journey.quote_type,is_airport:t.journey.is_airport,hourly:t.journey.hourly},e.quotes_loaded=!0}}};var ge={state:{processing:!1,processed:!1,basket:{quote_id:"",vehicle_index:0,amount:0},quote:{},vehicle:{},booking_ref:""},getters:{processed:e=>e.processed,processing:e=>e.processing,basket:e=>({quote:e.basket.quote_id,vehicle:e.basket.vehicle_index,price:e.basket.amount}),quoteID:e=>e.basket.quote_id,vehicleIndex:e=>e.basket.vehicle_index,price:e=>e.basket.amount,quoteData:e=>e.quote,quoteVehicleData:e=>e.vehicle,bookingRef:e=>e.booking_ref},actions:{resetCheckout({commit:e}){e("resetCheckoutState")},bookNow({commit:e},t){e("resetCheckoutState"),e("buildBasket",t)},booking({commit:e}){e("processing",{processing:!0,processed:!1})},bookingFailed({commit:e}){e("processing",{processing:!1,processed:!1})},booked({commit:e},t){e("resetCheckoutState");e("processing",{processing:!1,processed:!1}),e("booked",{booking_ref:t})}},mutations:{resetCheckoutState(e){Object.assign(e,{processing:!1,processed:!1,basket:{quote_id:"",vehicle_index:0,amount:0},quote:{},vehicle:{},booking_ref:""})},buildBasket(e,t){e.basket.quote_id=t.quote,e.basket.vehicle_index=t.vehicle,e.basket.amount=t.quote_data.vehicles[t.vehicle].price,e.quote=t.quote_data,e.vehicle=t.quote_data.vehicles[t.vehicle]},processing(e,t){e.processing=t.processing,e.processed=t.processed},booked(e,t){e.booking_ref=t.booking_ref}}};s.default.use(i.a);var he=new i.a.Store({modules:{BIQSearchStateStore:ue,BIQQuotesStateStore:pe,BIQCheckoutStateStore:ge},plugins:[Object(X.a)({paths:["BIQSearchStateStore","BIQQuotesStateStore","BIQCheckoutStateStore"],storage:window.localStorage})]}),me=o(119),fe=o.n(me);s.default.config.productionTip=!1,s.default.config.devtools=!1,s.default.use(r.a),s.default.use(a.a),n.c.add(l.b,l.d,l.a,l.e,l.c),s.default.component("font-awesome-icon",u.a),s.default.use(c.a),s.default.use(i.a),new s.default({store:he,render:e=>e(m,{props:{biqAppURL:biqAppURL,biqAppConfig:fe.a.LIVE,biqAppDebugEnabled:biq_app_debug_enabled}}),el:"#biq-vue-app",router:Z})},53:function(e,t,o){},54:function(e,t,o){}},[[250,0,1]]]);
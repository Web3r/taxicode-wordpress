(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{74:function(e,t){e.exports={DEV:{PLACES_URI:"/places/?term=",AUTH_URI:"/auth/",QUOTE_URI:"/booking/quote/",JOURNEY_URI:"/booking/journey/?id=",CLIENT_SECRET_URI:"/booking/client_gateway_secret/",PAYMENT_URI:"/booking/pay/",BOOKING_DETALS_URI:"booking-details/?booking_ref=",PGH_CONF:{hidePostalCode:!0}},STAGING:{PLACES_URI:"/places/?term=",AUTH_URI:"/auth/",QUOTE_URI:"/booking/quote/",JOURNEY_URI:"/booking/journey/?id=",CLIENT_SECRET_URI:"/booking/client_gateway_secret/",PAYMENT_URI:"/booking/pay/",BOOKING_DETALS_URI:"booking-details/?booking_ref=",PGH_CONF:{hidePostalCode:!0}},LIVE:{PLACES_URI:"/places/?term=",AUTH_URI:"/auth/",QUOTE_URI:"/booking/quote/",JOURNEY_URI:"/booking/journey/?id=",CLIENT_SECRET_URI:"/booking/client_gateway_secret/",PAYMENT_URI:"/booking/pay/",BOOKING_DETALS_URI:"booking-details/?booking_ref=",PGH_CONF:{hidePostalCode:!0}}}},78:function(e,t,o){"use strict";o.r(t);var s=o(15),i=o(17),a=o(52),n=o(36),r=(o(54),o(55),o(33)),l=o(23),c=o(29),u=o(48),d=o(49),p=o(19),h=o.n(p),m={name:"BIQApp",version:"1.0.1",props:{biq_app_url:{type:String,default:""},biq_app_debug_enabled:{type:Boolean,default:!1},biq_config:{type:Object,default:{PLACES_URI:"/places/",AUTH_URI:"/auth/",QUOTE_URI:"/booking/quote/",JOURNEY_URI:"/booking/journey/?id=",CLIENT_SECRET_URI:"/booking/client_gateway_secret/",PAYMENT_URI:"/booking/pay/"}}},data:()=>({initialised:!1,settings:{biq_api_host:"https://api.taxicode.com/",biq_pk:"",paypal_pk:"",stripe_pk:"",stripe_cardform_style:{base:{fontFamily:"'Muli', sans-serif",fontSize:"14px",color:"#333"},invalid:{color:"red"}},quote_type:"",complete_page_text:"",custom_css:"",booking_test_mode:!1},config:{PLACES_URI:"/places/?term=",AUTH_URI:"/auth/",QUOTE_URI:"/booking/quote/",JOURNEY_URI:"/booking/journey/?id=",CLIENT_SECRET_URI:"/booking/client_gateway_secret/",PAYMENT_URI:"/booking/pay/",BOOKING_DETALS_URI:"booking-details/?booking_ref="}}),created(){this.getAppSettings(),this.config=this.biq_config},computed:{...Object(i.c)(["searchDetails","displayQuotes","loadingQuotes","quotesLoaded","zeroQuotes","journeyID","journeyDetails","journeyDate","journeyTime","journeyHasReturn","journeyReturnDate","journeyReturnTime","journeyHasVias","journeyQuotes","basket","quoteID","vehicleIndex","price","quoteData","quoteVehicleData"]),appConfig:function(){return{...this.config}},appSettings:function(){return{...this.settings}}},methods:{...Object(i.b)(["resetSearch","searchingQuotes","searchedQuotes","resetQuotes","quoting","apiQuotesError","quoted","resetCheckout","bookNow","booked"]),getAppSettings:function(){const e=this,t=this.biq_app_url+"settings-get/";this.biq_app_debug_enabled&&console.info(`Loading BIQ App Settings from '${t}'`),h.a.get(t).then(t=>{if(e.biq_app_debug_enabled){console.group("Loaded Settings"),console.info({...e.settings}),console.info({...t.data}),console.log(typeof e.stripe_cardform_style),console.log(e.stripe_cardform_style),console.log(typeof t.data.stripe_cardform_style),console.log(t.data.stripe_cardform_style);try{console.log(JSON.parse(t.data.stripe_cardform_style))}catch(e){console.error(e)}}const o={biq_pk:t.data.taxicode_public,biq_api_host:t.data.biq_api_host,paypal_pk:t.data.paypal_public,stripe_pk:t.data.stripe_public,stripe_cardform_style:e.stripe_cardform_style,quote_type:t.data.quote_type,complete_page_text:t.data.complete_page_text,custom_css:t.data.custom_css,booking_test_mode:t.data.test_mode};e.settings=o,e.initialised=!0,e.biq_app_debug_enabled&&(console.info({...o}),console.info({...e.settings}),console.groupEnd())}).catch(e=>{let t="Unknown Error";e.hasOwnProperty("message")&&e.message&&(t=e.message),console.error(t),console.info({...e})})}}},g=o(14),_=Object(g.a)(m,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"biq-vue-app"}},[this.initialised?t("router-view",{attrs:{debugging:this.biq_app_debug_enabled,appRESTBaseURL:this.biq_app_url,appConfig:this.appConfig,appSettings:this.appSettings}}):this._e()],1)}),[],!1,null,"67c5c185",null).exports,v=o(28),f={name:"SearchResults",props:{quote_type:{type:String,default:"type_class"},debugging:{type:Boolean,default:!1}},data:()=>({type_map:{cheapest:"Cheapest Price",exec:"Best Executive",luxury:"Best Luxury",chauffeur:"Best Chauffeur"}}),computed:Object(i.c)(["displayQuotes","loadingQuotes","zeroQuotes","journeyID","journeyQuotes"]),methods:{...Object(i.b)(["bookNow"]),flipImage:function(e,t){const o=t.target.value,s=this.displayQuotes[e].vehicles[o].price;this.$refs[e][0].src=this.displayQuotes[e].vehicles[o].image,this.$refs[e][1].innerHTML=`&pound;${s}.00`,this.$refs[e][2].$el.setAttribute("data-vehicle",o)},onBookNowClicked:function(e,t){this.debugging&&(console.group("Book Now Clicked"),console.info(e),console.info(this.journeyQuotes[e.quote]),console.info(t),console.groupEnd()),this.bookNow({quote:this.journeyQuotes[e.quote],vehicle:e.vehicle})}}},y=Object(g.a)(f,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"biq-search-results"}},[e.loadingQuotes?o("div",[e._t("loading-quotes",[e._v("Loading...")])],2):e._e(),e._v(" "),e.zeroQuotes?o("div",[e._t("zero-quotes",[e._v("Sorry, we could not find any quotes for the selected journey.  Please try a different journey.")])],2):e._e(),e._v(" "),"type_class"!=e.quote_type?o("div",{staticClass:"row"},e._l(e.displayQuotes,(function(t,s){return o("div",{staticClass:"col-sm-auto"},["best"==e.quote_type?o("div",[t.highlight?o("div",{staticClass:"card",staticStyle:{width:"18rem"}},[o("img",{ref:s,refInFor:!0,staticClass:"card-img-top",attrs:{src:t.vehicles[0].image,alt:"Vehicle type image"}}),e._v(" "),o("div",{staticClass:"card-header"},[e._v("\n                        "+e._s(t.highlight)+"\n                    ")]),e._v(" "),o("div",{staticClass:"card-body"},[o("h5",{staticClass:"card-title"},[e._v(e._s(t.company_name))]),e._v(" "),o("p",{ref:s,refInFor:!0,staticClass:"card-text text-center display-4",attrs:{id:"selected_price"}},[e._v("£"+e._s(t.vehicles[0].price)+".00")]),e._v(" "),o("select",{staticClass:"custom-select",on:{change:function(t){return e.flipImage(s,t)}}},e._l(t.vehicles,(function(s,i){return o("option",{attrs:{"data-image":s.image,"data-price":s.price},domProps:{value:i},model:{value:t.selected_vehicle,callback:function(o){e.$set(t,"selected_vehicle",o)},expression:"quote.selected_vehicle"}},[e._v(e._s(s.name))])})),0),e._v(" "),o("router-link",{ref:s,refInFor:!0,staticClass:"btn btn-primary btn-block",attrs:{to:{name:"Checkout",params:{journey:e.journeyID,quote:t.quote_id,vehicle:t.vehicle.index}},"data-quote":t.quote_id,"data-vehicle":t.vehicle.index},nativeOn:{click:function(o){return e.onBookNowClicked({quote:t.quote_id,vehicle:t.vehicle.index},o)}}},[e._v("Book Now")])],1)]):e._e()]):o("div",{staticClass:"card",staticStyle:{width:"18rem"}},[o("img",{ref:s,refInFor:!0,staticClass:"card-img-top",attrs:{src:t.vehicles[0].image,alt:"Vehicle type image"}}),e._v(" "),o("div",{staticClass:"card-body"},[o("h5",{staticClass:"card-title"},[e._v(e._s(t.company_name))]),e._v(" "),o("p",{ref:s,refInFor:!0,staticClass:"card-text text-center display-4",attrs:{id:"selected_price"}},[e._v("£"+e._s(t.vehicles[0].price)+".00")]),e._v(" "),o("select",{staticClass:"custom-select",on:{change:function(t){return e.flipImage(s,t)}}},e._l(t.vehicles,(function(s,i){return o("option",{attrs:{"data-image":s.image,"data-price":s.price},domProps:{value:i},model:{value:t.selected_vehicle,callback:function(o){e.$set(t,"selected_vehicle",o)},expression:"quote.selected_vehicle"}},[e._v(e._s(s.name))])})),0),e._v(" "),o("router-link",{ref:s,refInFor:!0,staticClass:"btn btn-primary btn-block",attrs:{to:{name:"Checkout",params:{journey:e.journeyID,quote:t.quote_id,vehicle:t.vehicle.index}},"data-quote":t.quote_id,"data-vehicle":t.vehicle.index},nativeOn:{click:function(o){return e.onBookNowClicked({quote:t.quote_id,vehicle:t.vehicle.index},o)}}},[e._v("Book Now")])],1)])])})),0):o("div",{staticClass:"row"},e._l(e.displayQuotes,(function(t,s){return o("div",{staticClass:"col-sm-auto"},[o("div",{staticClass:"card",staticStyle:{width:"18rem"}},[o("img",{ref:t.quote_id,refInFor:!0,staticClass:"card-img-top",attrs:{src:t.vehicle.image,alt:"Vehicle type image"}}),e._v(" "),o("div",{staticClass:"card-header"},[e._v("\n                    "+e._s(e.type_map[s])+"\n                ")]),e._v(" "),o("div",{staticClass:"card-body"},[o("h6",{staticClass:"card-subtitle mb-2 text-muted"},[e._v(e._s(t.vehicle.name))]),e._v(" "),o("div",{staticClass:"card-text d-flex justify-content-center align-items-center"},[o("div",{staticClass:"badge badge-pill badge-secondary"},[o("font-awesome-icon",{attrs:{icon:"users"}}),e._v(" "+e._s(t.vehicle.passengers))],1),e._v(" "),o("div",[e._v(" ")]),e._v(" "),o("div",{staticClass:"badge badge-pill badge-secondary"},[o("font-awesome-icon",{attrs:{icon:"suitcase"}}),e._v(" "+e._s(t.vehicle.luggage_small))],1)]),e._v(" "),o("p",{ref:t.quote_id,refInFor:!0,staticClass:"card-text text-center display-4",attrs:{id:"selected_price"}},[e._v("£"+e._s(t.price)+".00")]),e._v(" "),o("router-link",{ref:t.quote_id,refInFor:!0,staticClass:"btn btn-primary btn-block",attrs:{to:{name:"Checkout",params:{journey:e.journeyID,quote:t.quote_id,vehicle:t.vehicle.index}},"data-quote":t.quote_id,"data-vehicle":t.vehicle.index},nativeOn:{click:function(o){return e.onBookNowClicked({quote:t.quote_id,vehicle:t.vehicle.index},o)}}},[e._v("Book Now")])],1)])])})),0)])}),[],!1,null,"a525defc",null).exports,b=o(34),k={name:"Home",components:{"vue-bootstrap-typeahead":r.a,"BIQ-SearchResults":y},props:{appConfig:{type:Object,required:!0,default:null},appSettings:{type:Object,required:!0,default:null},debugging:{type:Boolean,default:!1},searchFormData:{type:Object,default:{}},search_on_load:{type:Boolean,default:!1},quote_type:{type:String,default:""}},data:()=>({journey_options:["One Way","Return"],journey_type:"One Way",pickup:"",via:"",vialocations:[],pickuplocations:[],destinationlocations:[],destination:"",date:"",time:"",return_date:"",return_time:"",people:"1",errors:{pickup:!1,destination:!1,date:null,time:null,people:!1},loading_quotes_error:"Sorry, we could not find any quotes for the selected journey.  Please try a different journey."}),watch:{pickup:b.a.debounce((function(e){this.locationSearch(e,"pickup")}),500),destination:b.a.debounce((function(e){this.locationSearch(e,"destination")}),500),via:b.a.debounce((function(e){this.locationSearch(e,"via")}),500)},mounted(){this.setSearchFormState(),null!=this.searchFormData&&this.setSearchFormPropData(),this.$refs.pickupfield.inputValue=this.pickup,this.$refs.destinationfield.inputValue=this.destination,this.$refs.viafield.inputValue=this.via,this.search_on_load&&this.onSearchQuotesFormSubmit()},computed:Object(i.c)(["searchDetails","loadingQuotes","quotesLoaded","journeyID","journeyQuotes"]),methods:{...Object(i.b)(["searchingQuotes","searchedQuotes","apiQuotesError"]),setSearchFormState:function(){const e=this.searchDetails;console.log(e),this.journey_type=e.journey_type,this.pickup=e.pickup,this.destination=e.destination,e.vias.length&&(this.via=e.vias[0]),this.date=e.date,this.time=e.time,this.people=e.people,"Return"===this.journey_type&&null!==e.returning.date&&(this.return_date=e.returning.date),"Return"===this.journey_type&&null!==e.returning.time&&(this.return_time=e.returning.time)},setSearchFormPropData:function(){void 0!==this.searchFormData.journey_type&&(this.journey_type=this.searchFormData.journey_type),void 0!==this.searchFormData.pickup&&(this.pickup=this.searchFormData.pickup),void 0!==this.searchFormData.destination&&(this.destination=this.searchFormData.destination),void 0!==this.searchFormData.via&&(this.via=this.searchFormData.via),void 0!==this.searchFormData.date&&(this.date=this.searchFormData.date),void 0!==this.searchFormData.time&&(this.time=this.searchFormData.time),void 0!==this.searchFormData.people&&(this.people=this.searchFormData.people),void 0!==this.searchFormData.return_date&&(this.return_date=this.searchFormData.return_date),void 0!==this.searchFormData.return_time&&(this.return_time=this.searchFormData.return_time)},locationSearch(e,t="pickup"){if(null===e||"string"!=typeof e||e.length<3)return;let o=[],s=[],i=[];const a=`${this.appSettings.biq_api_host}${this.appConfig.PLACES_URI}`;this.debugging&&(console.info(`BIQ Places lookup to API '${a}'`),console.log(e)),h.a.get(`${a}${e}`).then(e=>{void 0!==e.data.results.STATION&&(s=e.data.results.STATION.map(e=>({string:e,type:"station"}))),void 0!==e.data.results.AIRPORT&&(o=e.data.results.AIRPORT.map(e=>({string:e,type:"airport"}))),void 0!==e.data.results.LOCATION&&(i=e.data.results.LOCATION.map(e=>({string:e,type:"location"})));const a=o.concat(s.concat(i.concat(e.data.results.GOOGLE)));switch(t){case"pickup":this.pickuplocations=a;break;case"via":this.vialocations=a;break;default:this.destinationlocations=a}}).catch(e=>{let t="Unknown BIQ Places API Error";e.hasOwnProperty("message")&&e.message&&(t=e.message),console.error(t),console.info({...e})})},onSearchQuotesFormSubmit:function(e){e.preventDefault(),this.validSearchForm()?this.searchApiQuotes():this.debugging&&(console.group("BIQSearchForm Validation Error"),console.info({...this.errors}),console.groupEnd())},validSearchForm(){this.errors={pickup:!1,destination:!1,date:null,time:null,people:!1};let e=0;return null!=this.pickup&&""!=this.pickup||(this.errors.pickup="Pickup location must be set",e++),null!=this.destination&&""!=this.destination||(this.errors.destination="Destination location must be set",e++),""==this.people&&(this.errors.people="Number of passengers must be between 1 and 99",e++),null!=this.date&&""!=this.date||(this.errors.date="Journey date is invalid",e++),null!=this.time&&""!=this.time||(this.errors.time="Journey time is invalid",e++),0==e},searchApiQuotes:function(){const e=this,t={journey_type:this.journey_type,pickup:this.pickup,destination:this.destination,date:this.date,time:this.time,people:this.people};let o=[],s=null,i=`pickup=${this.pickup}&destination=${this.destination}&date=${this.date} ${this.time}&people=${this.people}`;"Return"==this.journey_type?(i=`${i}&return=${this.return_date} ${this.return_time}`,t.returning={date:this.return_date,time:this.return_time}):t.returning={date:null,time:null},""!=this.via?(i=`${i}&via=${this.via}`,t.vias=[this.via]):t.vias=[],this.searchingQuotes(t);const a=`${this.appSettings.biq_api_host}${this.appConfig.QUOTE_URI}`;this.debugging&&console.info(`Loading BIQ Quotes from API '${a}'`),h.a.get(`${a}?key=${this.appSettings.biq_pk}&${i}`).then(t=>{e.debugging&&console.log(t),"OK"==t.data.status?(Object.keys(t.data.quotes).length>0&&(o="type_class"==e.appSettings.quote_type?e.reduceToTypeAndClass(t.data.quotes):t.data.quotes),s=t.data.journey_id,e.searchedQuotes({journey_id:s,journey_details:t.data.journey,quotes:t.data.quotes,display:o})):e.apiQuotesError(t.error)}).catch(t=>{let o="Unknown BIQ Quotes API Error";t.hasOwnProperty("message")&&t.message&&(o=t.message),console.error(o),console.info({...t}),e.apiQuotesError(o)})},reduceToTypeAndClass:function(e){const t=this.formatQuotes(e);this.debugging&&console.log(t);const o=t.sorted,s={};return o.hasOwnProperty("recommended")&&o.recommended.length&&(s.cheapest=o.recommended[0]),o.hasOwnProperty("executive")&&o.executive.length&&(s.exec=o.executive[0]),o.hasOwnProperty("vip")&&o.vip.length&&(s.luxury=o.vip[0]),o.hasOwnProperty("chauffeur")&&o.chauffeur.length&&(s.chauffeur=o.chauffeur[0]),this.debugging&&console.log(s),s},formatQuotes:function(e){let t={},o={};for(let s in e){let i=e[s];if(i.active){t[s]=i,i.quote_id=s;for(let e=0;e<i.vehicles.length;e++){let t={...i};t.vehicle=i.vehicles[e],t.vehicle.index=e,t.price=t.vehicle.price;let s=t.vehicle.type.class;delete t.vehicles,o.hasOwnProperty("recommended")||(o.recommended=[]),t.highlight&&(0===e?o.recommended.push(t):t.highlight=!1),o.hasOwnProperty("all")||(o.all=[]),o.all.push(t),o.hasOwnProperty(s)||(o[s]=[]),o[s].push(t)}}}for(let e in o)o[e]=this.sortQuotes(o[e],"SORT_BY_PRICE");return{raw:t,sorted:o}},sortQuotes:function(e,t){switch(t){case"SORT_BY_PRICE":return e.sort((e,t)=>e.price>t.price?1:t.price>e.price?-1:0);case"SORT_BY_RATING":return e.sort((e,t)=>e.rating.score>t.rating.score?-1:t.rating.score>e.rating.score?1:0);default:return e}}}},C=Object(g.a)(k,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("form",{attrs:{id:"searchform"}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-6",attrs:{id:"tcplugin-journey-type"}},[o("div",{staticClass:"form-group"},[o("label",[e._v("Journey type")]),e._v(" "),o("b-form-select",{attrs:{options:e.journey_options},model:{value:e.journey_type,callback:function(t){e.journey_type=t},expression:"journey_type"}})],1)])]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("div",{staticClass:"form-group",attrs:{id:"tcplugin-pickup"}},[o("label",[e._v("Pickup")]),e._v(" "),o("vue-bootstrap-typeahead",{ref:"pickupfield",attrs:{inputClass:e.errors.pickup?"is-invalid":"",data:e.pickuplocations,serializer:function(e){return e.string},placeholder:"Pickup postcode or place name"},on:{hit:function(t){e.selectedLocation=t}},scopedSlots:e._u([{key:"suggestion",fn:function(t){var s=t.data,i=t.htmlText;return[o("div",{staticClass:"d-flex align-items-center"},["station"==s.type?o("span",[o("font-awesome-icon",{attrs:{icon:"train"}})],1):"airport"==s.type?o("span",[o("font-awesome-icon",{attrs:{icon:"plane"}})],1):o("span",[o("font-awesome-icon",{attrs:{icon:"map-marker-alt"}})],1),e._v(" "),o("span",{staticClass:"ml-4",domProps:{innerHTML:e._s(i)}})])]}}]),model:{value:e.pickup,callback:function(t){e.pickup=t},expression:"pickup"}})],1)]),e._v(" "),o("div",{staticClass:"col"},[o("div",{staticClass:"form-group",attrs:{id:"tcplugin-destination"}},[o("label",[e._v("Destination")]),e._v(" "),o("vue-bootstrap-typeahead",{ref:"destinationfield",attrs:{inputClass:e.errors.destination?"is-invalid":"",data:e.destinationlocations,serializer:function(e){return e.string},placeholder:"Destination postcode or place name"},on:{hit:function(t){e.selectedLocation=t}},scopedSlots:e._u([{key:"suggestion",fn:function(t){var s=t.data,i=t.htmlText;return[o("div",{staticClass:"d-flex align-items-center"},["station"==s.type?o("span",[o("font-awesome-icon",{attrs:{icon:"train"}})],1):"airport"==s.type?o("span",[o("font-awesome-icon",{attrs:{icon:"plane"}})],1):o("span",[o("font-awesome-icon",{attrs:{icon:"map-marker-alt"}})],1),e._v(" "),o("span",{staticClass:"ml-4",domProps:{innerHTML:e._s(i)}})])]}}]),model:{value:e.destination,callback:function(t){e.destination=t},expression:"destination"}})],1)])]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col",attrs:{id:"tcplugin-via"}},[o("label",[e._v("(Optional) Via")]),e._v(" "),o("vue-bootstrap-typeahead",{ref:"viafield",attrs:{inputClass:e.errors.via?"is-invalid":"",data:e.vialocations,serializer:function(e){return e.string},placeholder:"Via postcode or place name"},on:{hit:function(t){e.selectedLocation=t}},scopedSlots:e._u([{key:"suggestion",fn:function(t){var s=t.data,i=t.htmlText;return[o("div",{staticClass:"d-flex align-items-center"},["station"==s.type?o("span",[o("font-awesome-icon",{attrs:{icon:"train"}})],1):"airport"==s.type?o("span",[o("font-awesome-icon",{attrs:{icon:"plane"}})],1):o("span",[o("font-awesome-icon",{attrs:{icon:"map-marker-alt"}})],1),e._v(" "),o("span",{staticClass:"ml-4",domProps:{innerHTML:e._s(i)}})])]}}]),model:{value:e.via,callback:function(t){e.via=t},expression:"via"}})],1),e._v(" "),o("div",{staticClass:"col",attrs:{id:"tcplugin-people"}},[o("div",{staticClass:"form-group"},[o("label",[e._v("Number of People")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.people,expression:"people"}],staticClass:"form-control",class:e.errors.people?"is-invalid":"",attrs:{type:"number",min:"1",max:"99",placeholder:"People"},domProps:{value:e.people},on:{input:function(t){t.target.composing||(e.people=t.target.value)}}})])])]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("div",{staticClass:"form-group",attrs:{id:"tcplugin-date"}},[o("label",[e._v("Date")]),e._v(" "),o("b-form-datepicker",{staticClass:"form-control",attrs:{state:e.errors.date,locale:"en"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)]),e._v(" "),o("div",{staticClass:"col"},[o("div",{staticClass:"form-group",attrs:{id:"tcplugin-time"}},[o("label",[e._v("Time")]),e._v(" "),o("b-form-timepicker",{attrs:{state:e.errors.time,locale:"en"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)])]),e._v(" "),"Return"==e.journey_type?o("div",{staticClass:"row"},[o("div",{staticClass:"col",attrs:{id:"tcplugin-return-date"}},[o("div",{staticClass:"form-group"},[o("label",[e._v("Return Date")]),e._v(" "),o("b-form-datepicker",{staticClass:"form-control",attrs:{state:e.errors.return_date,locale:"en"},model:{value:e.return_date,callback:function(t){e.return_date=t},expression:"return_date"}})],1)]),e._v(" "),o("div",{staticClass:"col"},[o("div",{staticClass:"form-group",attrs:{id:"tcplugin-return-time"}},[o("label",[e._v("Return Time")]),e._v(" "),o("b-form-timepicker",{attrs:{state:e.errors.return_time,locale:"en"},model:{value:e.return_time,callback:function(t){e.return_time=t},expression:"return_time"}})],1)])]):e._e(),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col"}),e._v(" "),o("div",{staticClass:"col",attrs:{id:"tcplugin-search-submit"}},[o("div",{staticClass:"form-group"},[o("button",{staticClass:"form-control btn btn-primary",on:{click:e.onSearchQuotesFormSubmit}},[e.loadingQuotes?o("div",{staticClass:"spinner-border spinner-border-sm"}):e._e(),e._v("\n                        Search\n                    ")]),e._v(" "),o("label"),e._v(" "),o("input",{staticClass:"form-control",attrs:{type:"button",value:"Search"},on:{click:e.onSearchQuotesFormSubmit}})])])])]),e._v(" "),e.loadingQuotes||e.quotesLoaded?o("BIQ-SearchResults",{attrs:{quote_type:e.appSettings.quote_type,debugging:e.debugging},scopedSlots:e._u([{key:"loading-quotes",fn:function(){return[e._v("Generating Quotes...")]},proxy:!0},{key:"zero-quotes",fn:function(){return[e._v(e._s(e.loading_quotes_error))]},proxy:!0}],null,!1,1290758814)}):e._e()],1)}),[],!1,null,"36da1c36",null).exports;class S{constructor(e,t,o,s){this.initialise=this.initialise.bind(this),this.mountElement=this.mountElement.bind(this),this.unmountElement=this.unmountElement.bind(this),this.getHandlerName=this.getHandlerName.bind(this),this.getAmount=this.getAmount.bind(this),this.getDescription=this.getDescription.bind(this),this.setAmount=this.setAmount.bind(this),this.updateAmount=this.updateAmount.bind(this),this.getCustomerToken=this.getCustomerToken.bind(this),this.setCustomerToken=this.setCustomerToken.bind(this),this.getClientSecretIntent=this.getClientSecretIntent.bind(this),this.getSourceCardToken=this.getSourceCardToken.bind(this),this.paymentHandlerName="jstoken_stripe",this.country="GB",this.currency="gbp",this.amount=0,this.description="",this.customer_token=null,this.pk=e,this.transactionSuccessCB=t,this.transactionFailCB=o,this.intent_secret_uri=s,this.stripe=Stripe(this.pk),this.stripeElements=this.stripe.elements(),this.elementCreated=!1,this.elementMounted=!1,this.elementMountedOn="card",this.handler={transactionSuccess:this.transactionSuccessCB,transactionFail:this.transactionFailCB,getClientSecretIntent:this.getClientSecretIntent,stripe:this.stripe,stripeElements:this.stripeElements},this.publicHandler={getHandlerName:this.getHandlerName,getAmount:this.getAmount,getDescription:this.getDescription,updateAmount:this.updateAmount,getCustomerToken:this.getCustomerToken,setCustomerToken:this.setCustomerToken}}initialise(e,t,o){console.group("Stripe card form handler initialising..."),console.info(e),console.info(t),console.info(o);const s={style:t,hidePostalCode:void 0!==o&&!!o};console.info(s),this.card=this.stripeElements.create("card",s),this.elementMountedOn=e,console.log("Stripe card form handler initialised"),console.groupEnd()}mountElement(){this.elementMounted||(console.log("Mounting Stripe card element on "+this.elementMountedOn),this.card.mount(document.getElementById(this.elementMountedOn)),this.elementMounted=!0)}unmountElement(){this.elementMounted&&(console.log("Unmounting Stripe card element from "+this.elementMountedOn),this.card.unmount(document.getElementById(this.elementMountedOn)),this.elementMounted=!1)}getHandlerName(){return this.paymentHandlerName}getAmount(){return this.amount}getDescription(){return this.description}setAmount(e,t){this.amount=100*e,this.description=t}updateAmount(e){this.amount=100*e}getCustomerToken(){return this.customer_token}setCustomerToken(e){this.customer_token=e}getClientSecretIntent(e,t,o){const s=this.getHandlerName(),i=this.intent_secret_uri;return new Promise((function(a,n){const r=new FormData;r.append("handler",s),r.append("key",e),r.append("quote",t),r.append("vehicle",o),h()({url:i,method:"post",data:r,responseType:"json",headers:{"Content-Type":"application/application/x-www-form-urlencoded"}}).then((function(e){console.log(e),a(e.data.response.intent.client_secret)})).catch((function(e){if(e.response){e.response}else if(e.request){e.request}else{e.message}console.group("Failed to get a client secret response from `${intent_secret_uri}`."),console.warn(`The error message received was: '${reason}'`),console.info(r),console.info(e),console.groupEnd(),n(reason)}))}))}getSourceCardToken(e,t,o,s,i){const a=this.handler,n=this.publicHandler,r=this.card;this.getClientSecretIntent(e,t,o).then((function(e){a.stripe.confirmCardPayment(e,{payment_method:{card:r,billing_details:{name:s,address:{postal_code:i}}}},{handleActions:!1}).then((function(t){if(t.error)a.transactionFail(n,t.error);else{if(t.paymentIntent.hasOwnProperty("status")&&"succeeded"===t.paymentIntent.status)return void a.transactionSuccess(n,t.paymentIntent);a.stripe.confirmCardPayment(e).then((function(e){e.error?a.transactionFail(n,e.error):a.transactionSuccess(n,e.paymentIntent)}))}})).catch((function(e){a.transactionFail(n,e)}))}))}}var j={name:"JourneyDetails",computed:Object(i.c)(["journeyDetails","journeyDate","journeyTime","journeyHasReturn","journeyReturnDate","journeyReturnTime","journeyHasVias","price"])},q=Object(g.a)(j,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"col",attrs:{id:"tcplugin-checkout-booking-details"}},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-header"},[e._v("\n            Booking Details\n        ")]),e._v(" "),o("ul",{staticClass:"list-group list-group-flush"},[o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Date:")]),e._v(" "+e._s(e.journeyDate)+" at "+e._s(e.journeyTime)+"\n            ")]),e._v(" "),o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Travelling From:")]),e._v(" "+e._s(e.journeyDetails.pickup.string)+"\n            ")]),e._v(" "),o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Going To:")]),e._v(" "+e._s(e.journeyDetails.destination.string)+"\n            ")]),e._v(" "),e.journeyHasVias?o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Via:")]),e._v(" "+e._s(e.journeyDetails.vias[0].string)+"\n            ")]):e._e(),e._v(" "),e.journeyHasReturn?o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Returning:")]),e._v(" "+e._s(e.journeyReturnDate)+" at "+e._s(e.journeyReturnTime)+"\n            ")]):e._e(),e._v(" "),o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Price:")]),e._v(" £"+e._s(e.price.toFixed(2))+"\n            ")])])])])}),[],!1,null,"c25b8298",null).exports;let I=null;var w={name:"Checkout",components:{JourneyDetails:q},props:{appConfig:{type:Object,required:!0,default:null},appSettings:{type:Object,required:!0,default:null},debugging:{type:Boolean,default:!1},stripe_cardform_style:{type:Object,default:{base:{fontFamily:"'Muli', sans-serif",fontSize:"14px",color:"#333"},invalid:{color:"red"}}},paypal_client_token:{type:String,default:""}},data:()=>({name:"",email:"",telephone:"",flight_number:null,cardholder_name:"",billing_postcode:"",payment_method:"Pay with Card",payment_options:["Pay with Card","Pay with Paypal"],loading:!1,posterror:!1,errors:{name:!1,email:!1,telephone:!1}}),mounted(){this.setupStripe(),I.mountElement()},computed:Object(i.c)(["journeyID","basket","quoteID","vehicleIndex","price"]),methods:{...Object(i.b)(["quoting","quoted","bookNow"]),isCardPayment:function(){return"Pay with Card"==this.payment_method},validate:function(){this.errors={name:!1,email:!1,telephone:!1};let e=0;return""==this.name&&(this.errors.name="Booking name must be set",e++),""==this.email&&(this.errors.email="Email location must be set",e++),""==this.telephone&&(this.errors.telephone="Telephone must be set",e++),this.isCardPayment()&&(this.errors.cardholder_name=!1,this.errors.billing_postcode=!1,""==this.cardholder_name&&(this.errors.cardholder_name="Cardholder name must be set",e++),""==this.billing_postcode&&(this.errors.billing_postcode="Billing address postcode must be set",e++)),0==e},logFormValidateError:function(e,t){this.debugging&&(console.group(e),console.info({...t}),console.groupEnd())},onMethodChanged:function(){this.isCardPayment()?this.$nextTick((function(){I.mountElement()})):I.unmountElement()},onPaypalSubmit:function(e){this.validate()?(this.posterror=!1,this.loading=1,this.makeBooking(e.nonce,"paypal")):this.logFormValidateError("BIQCheckoutForm Paypal Validation Error",this.errors)},onPaypalError:function(e){let t="BIQCheckoutForm Unknown Paypal Error";e.hasOwnProperty("message")&&e.message&&(t=e.message),console.error(t),console.info({...e})},onPaypalLoadFail:function(e){let t="BIQCheckoutForm Unknown Paypal Loading Error";e.hasOwnProperty("message")&&e.message&&(t=e.message),console.error(t),console.info({...e})},onStripeSubmit:function(){this.validate()?(this.posterror=!1,this.loading=1,I.getSourceCardToken(this.appSettings.biq_pk,this.quoteID,this.vehicleIndex,this.cardholder_name,this.billing_postcode)):this.logFormValidateError("BIQCheckoutForm Stripe Validation Error",this.errors)},setupStripe:function(){const e=this;I=new S(this.appSettings.stripe_pk,(function(t,o){e.makeBooking(o.id,t.getHandlerName(),(function(t){e.debugging&&console.log(o),t.append("card_cardholder",e.cardholder_name),t.append("postcode",e.billing_postcode)}))}),(function(t,o){let s="Unknown Stripe Error";o.hasOwnProperty("message")&&o.message&&(s=o.message),console.error(s),console.info({...o}),e.loading=0,e.hasCardErrors=!0,e.posterror=s,e.$forceUpdate()}),`${this.appSettings.biq_api_host}${this.appConfig.CLIENT_SECRET_URI}`),I.setAmount(this.price,"Taxi Journey"),I.initialise(this.$refs.card.id,this.stripe_cardform_style,this.appConfig.PGH_CONF.hidePostalCode)},makeBooking:function(e,t,o){const s=this,i=new FormData;i.append("key",this.appSettings.biq_pk),i.append("quote",this.quoteID),i.append("vehicle",this.vehicleIndex),i.append("new_pay",!0),i.append("email",this.email),i.append("name",this.name),i.append("telephone",this.telephone),i.append("payment_token",e),i.append("method",t),"function"==typeof o&&o(i),this.appSettings.booking_test_mode&&i.append("test","1");const a=`${this.appSettings.biq_api_host}${this.appConfig.PAYMENT_URI}`;this.debugging&&console.info(`BIQ Checkout transaction attempt to API '${a}'`),h.a.post(a,i,{headers:{"Content-Type":"application/application/x-www-form-urlencoded"}}).then(e=>{"OK"==e.data.status?s.$router.push({name:"Complete",params:{booking_ref:e.data.reference}}):(s.posterror=e.data.error,s.loading=0)}).catch((function(e){let t="Unknown BIQ Checkout API Error";e.hasOwnProperty("message")&&e.message&&(t=e.message),console.error(t),console.info({...e}),s.loading=0}))}}},D=Object(g.a)(w,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("form",{attrs:{id:"purchaseform"}},[e._m(0),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col",attrs:{id:"tcplugin-passenger-name"}},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"customer_name"}},[e._v("Name")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",class:e.errors.name?"is-invalid":"",attrs:{id:"customer_name",type:"text","aria-describedby":"nameHelp",placeholder:"Enter your name",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),o("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[e._v("The name of the person travelling,")])])]),e._v(" "),o("div",{staticClass:"col"},[o("div",{staticClass:"form-group",attrs:{id:"tcplugin-email"}},[o("label",{attrs:{for:"customer_email"}},[e._v("Email")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",class:e.errors.email?"is-invalid":"",attrs:{id:"customer_email",type:"email","aria-describedby":"emailHelp",placeholder:"Enter your email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._v(" "),o("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[e._v("We'll never share your email with anyone else.")])])])]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col",attrs:{id:"tcplugin-passenger-telephone"}},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"telephone"}},[e._v("Mobile telephone")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.telephone,expression:"telephone"}],staticClass:"form-control",class:e.errors.telephone?"is-invalid":"",attrs:{id:"telephone",type:"text","aria-describedby":"mobileHelp",placeholder:"Enter a mobile number",required:""},domProps:{value:e.telephone},on:{input:function(t){t.target.composing||(e.telephone=t.target.value)}}}),e._v(" "),o("small",{staticClass:"form-text text-muted",attrs:{id:"mobileHelp"}},[e._v("Valid UK mobile numbers only, please")])])]),e._v(" "),o("div",{staticClass:"col"},[o("div",{staticClass:"form-group",attrs:{id:"tcplugin-flight-number"}},[o("label",{attrs:{for:"flight_number"}},[e._v("Flight #")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.flight_number,expression:"flight_number"}],staticClass:"form-control",attrs:{id:"flight_number",type:"text","aria-describedby":"flightHelp",placeholder:"Enter your flight number"},domProps:{value:e.flight_number},on:{input:function(t){t.target.composing||(e.flight_number=t.target.value)}}}),e._v(" "),o("small",{staticClass:"form-text text-muted",attrs:{id:"flightHelp"}},[e._v("If this is an airport pickup or dropoff, the relevent flight number")])])])]),e._v(" "),e._m(1),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col",attrs:{id:"tcplugin-payament-select"}},[e._v("\n                Select Payment Method:\n            ")]),e._v(" "),o("div",{staticClass:"col"},[o("b-form-select",{attrs:{options:e.payment_options},on:{change:e.onMethodChanged},model:{value:e.payment_method,callback:function(t){e.payment_method=t},expression:"payment_method"}})],1)]),e._v(" "),"Pay with Card"==e.payment_method?o("div",{staticClass:"row"},[o("div",{staticClass:"col",attrs:{id:"tcplugin-cardholder-name"}},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"control-label",attrs:{for:"card-holder-name"}},[e._v("Cardholder Name")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.cardholder_name,expression:"cardholder_name"}],staticClass:"form-control",class:e.errors.cardholder_name?"is-invalid":"",attrs:{id:"card-holder-name",type:"text",placeholder:"Cardholder name"},domProps:{value:e.cardholder_name},on:{input:function(t){t.target.composing||(e.cardholder_name=t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"col",attrs:{id:"tcplugin-stripe-card-details"}},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"control-label",attrs:{for:"card"}},[e._v("Card Details")]),e._v(" "),o("div",{ref:"card",staticClass:"form-control",attrs:{id:"card"}})]),e._v(" "),o("div",{staticClass:"col",attrs:{id:"tcplugin-billing_postcode"}},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"control-label",attrs:{for:"billing-postcode"}},[e._v("Billing Postcode")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.billing_postcode,expression:"billing_postcode"}],staticClass:"form-control",class:e.errors.billing_postcode?"is-invalid":"",attrs:{id:"billing-postcode",type:"text",placeholder:"Billing Postcode"},domProps:{value:e.billing_postcode},on:{input:function(t){t.target.composing||(e.billing_postcode=t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"form-group"},[o("input",{staticClass:"btn btn-primary",attrs:{value:0==e.loading?"Book Now":"Processing",disabled:1==e.loading,type:"button"},on:{click:e.onStripeSubmit}})])])]):o("div",{staticClass:"row"},[o("div",{staticClass:"col"}),e._v(" "),o("div",{staticClass:"col",attrs:{id:"tcplugin-paypal-plugin"}},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"control-label",attrs:{for:"paypal"}},[e._v("Or Pay With Paypal")]),e._v(" "),o("v-braintree",{attrs:{authorization:e.paypal_client_token,paypal:{flow:"checkout",amount:e.price,currency:"GBP"}},on:{success:e.onPaypalSubmit,error:e.onPaypalError,loadFail:e.onPaypalLoadFail},scopedSlots:e._u([{key:"button",fn:function(t){return[o("div",{staticClass:"form-group"},[o("input",{staticClass:"btn btn-primary",attrs:{value:0==e.loading?"Book Now":"Processing",disabled:1==e.loading,type:"button"},on:{click:t.submit}})])]}}])})],1)])]),e._v(" "),e.posterror?o("div",{staticClass:"row"},[o("div",{staticClass:"col",attrs:{id:"tcplugin-payment-error"}},[e._v("\n                "+e._s(e.posterror)+"\n            ")])]):e._e(),e._v(" "),o("div",{staticClass:"row"},[o("JourneyDetails")],1)])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("h4",{attrs:{id:"tc_plugin-passenger-heading"}},[this._v("Passenger Details")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("h4",{attrs:{id:"tc_plugin-payment-heading"}},[this._v("Payment Details")])])])}],!1,null,"703b52ac",null).exports,E={name:"JourneyDetailsBooked",props:{bookingRef:{type:String,default:""},passengerName:{type:String,default:""},passengers:{type:Number,default:1},journeyPickup:{type:String,default:""},journeyDestination:{type:String,default:""},journeyVias:{type:Array,required:!1,default:function(){return[]}},journeyDate:{type:Date,default:function(){return new Date}},journeyReturnDate:{type:Date,required:!1,default:function(){return null}}},computed:{journey_date:function(){return null!==this.journeyDate?this.journeyDate.toDateString():""},journey_time:function(){return null!==this.journeyDate?this.journeyDate.toLocaleTimeString():""},journey_return_date:function(){return null!==this.journeyReturnDate?this.journeyReturnDate.toDateString():""},journey_return_time:function(){return null!==this.journeyReturnDate?this.journeyReturnDate.toLocaleTimeString():""}}},x={name:"Complete",components:{"JourneyDetails-Booked":Object(g.a)(E,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"col",attrs:{id:"biq-journey-details-booked"}},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-header"},[e._v("\n            Booking Details\n        ")]),e._v(" "),o("ul",{staticClass:"list-group list-group-flush"},[o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Booking Reference:")]),e._v(" "+e._s(e.bookingRef)+"\n            ")]),e._v(" "),o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Name:")]),e._v(" "+e._s(e.passengerName)+"\n            ")]),e._v(" "),o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Date:")]),e._v(" "+e._s(e.journey_date)+" at "+e._s(e.journey_time)+"\n            ")]),e._v(" "),o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Travelling From:")]),e._v(" "+e._s(e.journeyPickup)+"\n            ")]),e._v(" "),o("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[o("strong",[e._v("Going To:")]),e._v(" "+e._s(e.journeyDestination)+"\n            ")])])])])}),[],!1,null,"deed3c8e",null).exports},props:{appConfig:{type:Object,required:!0,default:null},appSettings:{type:Object,required:!0,default:null},appRESTBaseURL:{type:String,default:"//"},debugging:{type:Boolean,default:!1}},data:()=>({detailsLoaded:!1,detailsLoadError:!1,pageText:"Thank you for booking with us.",booking:{ref:"",name:"",passengers:1,pickup:"",destination:"",vias:[],date:null,return_date:null}}),created(){const e=this,t=this.$route.params.booking_ref,o=`${this.appRESTBaseURL}${this.appConfig.BOOKING_DETALS_URI}${t}`;h.a.get(o).then(s=>{e.debugging&&(console.group(`Loading Booking Details from '${o}'`),console.info({...e.booking}),console.info({...s.data}));const i={ref:t,name:s.data.booking.passenger.name,passengers:Number.parseInt(s.data.booking.people),pickup:s.data.booking.pickup.string,destination:s.data.booking.destination.string,vias:s.data.booking.vias,date:new Date(Date.parse(s.data.booking.date)),return_date:null};s.data.booking.return&&(i.return_date=new Date(Date.parse(s.data.booking.return))),e.booking=i,e.detailsLoaded=!0,e.debugging&&(console.info({...i}),console.info({...e.booking}),console.groupEnd())}).catch(t=>{let o="Unknown Booking Details Error";t.hasOwnProperty("message")&&t.message&&(o=t.message),console.error(o),console.info({...t}),e.detailsLoadError=!0}),this.pageText=this.appSettings.complete_page_text}},P=Object(g.a)(x,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"completePage"}},[o("h3",[e._v("Your booking is complete")]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("p",[e._v(e._s(e.pageText))])]),e._v(" "),e.detailsLoaded?o("JourneyDetails-Booked",{attrs:{"booking-ref":e.booking.ref,"passenger-name":e.booking.name,passengers:e.booking.passengers,"journey-pickup":e.booking.pickup,"journey-destination":e.booking.destination,"journey-vias":e.booking.vias,"journey-date":e.booking.date,"journey-return-date":e.booking.return_date}}):e._e()],1)])}),[],!1,null,"1ff6a03d",null).exports;s.default.use(v.a);var T=new v.a({routes:[{path:"/",name:"Home",component:C,props:{searchFormData:searchFormData,search_on_load:search_on_load}},{path:"/:journey",name:"HomeSearched",component:C,props:{searchFormData:searchFormData,search_on_load:search_on_load}},{path:"/checkout/:journey/:quote/:vehicle",name:"Checkout",component:D,props:{stripe_cardform_style:stripe_cardform_style,paypal_client_token:paypal_client_token}},{path:"/complete/:booking_ref",name:"Complete",component:P}]}),Q=o(51);const O=e=>e<10?e="0"+e:e,R=new Date;R.setDate(R.getDate()+1),R.setHours(R.getHours()+2);const B=()=>({search_details:{journey_type:"One Way",pickup:"",vias:[],destination:"",date:R.getFullYear()+"-"+O(R.getMonth()+1)+"-"+O(R.getDate()),time:O(R.getHours())+":"+O(R.getMinutes())+":"+O(R.getSeconds()),people:"1",returning:{date:"",time:""}},validation_errors:{},display_quotes:[]});var F={state:B(),getters:{searchDetails:e=>e.search_details,displayQuotes:e=>e.display_quotes},actions:{resetSearch({commit:e,dispatch:t}){t("resetQuotes",null,{root:!0}),e("resetSearchState")},searchingQuotes({commit:e,dispatch:t},o){e("resetSearchState"),t("quoting",null,{root:!0}),e("searchingQuotesFor",o)},searchedQuotes({commit:e,dispatch:t},o){t("quoted",o,{root:!0}),e("displaying",o.display)}},mutations:{resetSearchState(e){console.group("Resetting BIQSearchStore State"),console.info({...e}),Object.assign(e,B()),console.info({...e}),console.groupEnd()},searchingQuotesFor(e,t){console.group("BIQSearchStore search details state"),console.info({...e}),console.info(t),e.search_details=t,console.info({...e}),console.groupEnd()},displaying(e,t){console.group("BIQSearchStore displaying quotes state"),console.info({...e}),console.info({...t}),e.display_quotes=t,console.info({...e}),console.groupEnd()}}};var N={state:{quoting:!1,quotes_loaded:!1,api_error:null,journey_id:"",journey_details:{},journey_quotes:[]},getters:{loadingQuotes:e=>e.quoting,quotesLoaded:e=>e.quotes_loaded,zeroQuotes:e=>!!e.quotes_loaded&&0===e.journey_quotes.length,journeyID:e=>e.journey_id,journeyDetails:e=>e.journey_details,journeyDate:e=>new Date(Date.parse(e.journey_details.date)).toDateString(),journeyTime:e=>new Date(Date.parse(e.journey_details.date)).toLocaleTimeString(),journeyReturnDate:e=>new Date(Date.parse(e.journey_details.return)).toDateString(),journeyReturnTime:e=>new Date(Date.parse(e.journey_details.return)).toLocaleTimeString(),journeyHasReturn:e=>!!e.journey_details.return,journeyHasVias:e=>Array.isArray(e.journey_details.vias)&&e.journey_details.vias.length>0,journeyQuotes:e=>e.journey_quotes},actions:{resetQuotes({commit:e}){e("resetQuotesState")},quoting({commit:e,dispatch:t}){e("resetQuotesState"),t("resetCheckout",null,{root:!0}),e("searching")},apiQuotesError({commit:e},t){e("quotesError",{api_error:t}),e("searched")},quoted({commit:e},t){e("searched"),e("quotes",t)}},mutations:{resetQuotesState(e){console.group("Resetting BIQQuotesStore State"),console.log({...e}),Object.assign(e,{quoting:!1,quotes_loaded:!1,api_error:null,journey_id:"",journey_details:{},journey_quotes:[]}),console.log({...e}),console.groupEnd()},searching(e){console.group("BIQQuotesStore searching quotes state"),console.log({...e}),e.quoting=!0,console.log({...e}),console.groupEnd()},quotesError(e,t){console.group("BIQQuotesStore API Error state"),console.log({...e}),e.api_error=t.api_error,console.log({...e}),console.groupEnd()},searched(e){console.group("BIQQuotesStore searched quotes state"),console.log({...e}),e.quoting=!1,console.log({...e}),console.groupEnd()},quotes(e,t){console.group("BIQQuotesStore quoted state"),console.log({...e}),console.log({...t}),e.journey_id=t.journey_id,e.journey_details=t.journey_details,e.journey_quotes=t.quotes,e.quotes_loaded=!0,console.log({...e}),console.groupEnd()}}};var U={state:{quote_id:"",vehicle_index:0,amount:0,quote:{},vehicle:{}},getters:{basket:e=>({quote:e.quote_id,vehicle:e.vehicle_index,price:e.amount}),quoteID:e=>e.quote_id,vehicleIndex:e=>e.vehicle_index,price:e=>e.amount,quoteData:e=>e.quote,quoteVehicleData:e=>e.vehicle},actions:{resetCheckout({commit:e}){e("resetCheckoutState")},bookNow({commit:e},t){e("resetCheckoutState"),e("buildBasket",t)},booked({commit:e},t){e("resetCheckoutState")}},mutations:{resetCheckoutState(e){console.group("Resetting BIQCheckoutStore State"),console.log({...e}),Object.assign(e,{quote_id:"",vehicle_index:0,amount:0,quote:{},vehicle:{}}),console.log({...e}),console.groupEnd()},buildBasket(e,t){console.group("BIQCheckoutStore Build Basket state"),console.log({...e}),console.log({...t}),e.quote_id=t.quote.quote_id,e.vehicle_index=t.vehicle,e.quote=t.quote,e.vehicle=t.quote.vehicles[t.vehicle],e.amount=t.quote.vehicles[t.vehicle].price,console.log({...e}),console.groupEnd()}}};s.default.use(i.a);var A=new i.a.Store({modules:{BIQSearchStore:F,BIQQuotesStore:N,BIQCheckoutStore:U},plugins:[Object(Q.a)({paths:["BIQSearchStore","BIQQuotesStore","BIQCheckoutStore"],storage:window.localStorage})]});s.default.config.productionTip=!1,s.default.use(a.a),s.default.use(n.a),s.default.use(r.a),l.c.add(c.b,c.d,c.a,c.e,c.c),s.default.component("font-awesome-icon",u.a),s.default.use(d.a),s.default.use(i.a);const $=o(74);new s.default({store:A,render:e=>e(_,{props:{biq_app_url:biq_app_url,biq_app_debug_enabled:biq_app_debug_enabled,biq_config:$.LIVE}}),el:"#biq-vue-app",router:T})}},[[78,0,1]]]);
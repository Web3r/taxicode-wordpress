(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{80:function(t,e){t.exports={QUOTE_URL:"https://api.taxicode.com/booking/quote/",JOURNEY_URL:"https://api.taxicode.com/booking/journey/?id=",PAYMENT_URL:"https://api.taxicode.com/booking/pay/"}},84:function(t,e,a){"use strict";a.r(e);var i=a(16),s=a(30),o=a(40),n=a(39),r=a(34),l=a(22),c=a(28),d=a(55),p=a(56),u=(a(44),a(45),{name:"App"}),m=a(13),v=Object(m.a)(u,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"vue-frontend-app"}},[e("router-view")],1)}),[],!1,null,null,null).exports,_=a(26),h=a(18),g=a.n(h),f=a(37),y=a(58),b=a.n(y),C=a(36),k=a(35),w={name:"search",components:{"vue-bootstrap-typeahead":r.a,MglMap:C.b,MglMarker:C.c,MglGeojsonLayer:C.a},props:{postData:[]},data:()=>({journey_options:["One Way","Return"],type_map:{cheapest:"Cheapest Price",exec:"Best Executive",luxury:"Best Luxury",chauffeur:"Best Chauffeur"},journey_type:"One Way",pickup:"",via:"",vialocations:[],pickuplocations:[],destinationlocations:[],destination:"",date:"",time:"",return_date:"",return_time:"",people:"1",quotes:[],journey_id:"",loading:!1,errors:{pickup:!1,destination:!1,date:null,time:null,people:!1},quote_settings:"",noquotes:!1,quotesloaded:!1,mindate:new Date,accessToken:mapbox_api,mapStyle:"mapbox://styles/taxicode-testing/cke2xdy4u1chp19n2abb4516w",pickup_coords:[],destination_coords:[],geoJsonSource:{type:"geojson",data:{id:"thisIsMySource",type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[0,0]]}}},geoJsonLayer:{type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#0876BA","line-width":4,"line-opacity":1}}}),watch:{pickup:f.a.debounce((function(t){this.locationSearch(t,"pickup")}),500),destination:f.a.debounce((function(t){this.locationSearch(t,"destination")}),500),via:f.a.debounce((function(t){this.locationSearch(t,"via")}),500)},created(){this.postData=postData,this.mapPostToForm(),this.quote_settings=quote_settings,this.mapbox=b.a},mounted(){this.$refs.pickupfield.inputValue=this.pickup,this.$refs.destinationfield.inputValue=this.destination,this.$refs.viafield.inputValue=this.via,this.postData.search_on_load&&this.submitForm()},methods:{mapPostToForm:function(){void 0!==this.postData.journey_type&&(this.journey_type=this.postData.journey_type),void 0!==this.postData.pickup&&(this.pickup=this.postData.pickup),void 0!==this.postData.destination&&(this.destination=this.postData.destination),void 0!==this.postData.via&&(this.via=this.postData.via),void 0!==this.postData.date&&(this.date=this.postData.date),void 0!==this.postData.time&&(this.time=this.postData.time),void 0!==this.postData.people&&(this.people=this.postData.people),void 0!==this.postData.return_date&&(this.return_date=this.postData.return_date),void 0!==this.postData.return_time&&(this.return_time=this.postData.return_time)},setPrice:function(t){this.$store.commit("setPrice",t)},queryApi:function(){this.loading=!0,this.noquotes=!1,this.quotesloaded=!1;let t=config.QUOTE_URL+"?key="+tc_public_key+"&pickup="+this.pickup+"&destination="+this.destination+"&date="+this.date+" "+this.time+"&people="+this.people;"Return"==this.journey_type&&(t=t+"&return="+this.return_date+" "+this.return_time),""!=this.via&&(t=t+"&via="+this.via),g.a.get(t).then(function(t){this.loading=!1,0!=t.data.quotes.length?("type_class"==this.quote_settings?this.quotes=this.reduceToTypeAndClass(t.data.quotes):this.quotes=t.data.quotes,this.journey_id=t.data.journey_id,this.pickup_coords=[t.data.journey.pickup.position[1],t.data.journey.pickup.position[0]],this.destination_coords=[t.data.journey.destination.position[1],t.data.journey.destination.position[0]],this.quotesloaded=!0):(this.quotes=[],this.noquotes=!0,this.quotesloaded=!1)}.bind(this))},async onMapLoaded(t){const e=t.component.actions;await e.fitBounds([this.pickup_coords,this.destination_coords]),await e.zoomOut();var a="https://api.mapbox.com/directions/v5/mapbox/driving/"+(this.pickup_coords.join(",")+";"+this.destination_coords.join(","))+"?geometries=geojson&access_token="+this.accessToken;g.a.get(a).then(function(t){this.geoJsonSource.data.geometry.coordinates=t.data.routes[0].geometry.coordinates}.bind(this))},reduceToTypeAndClass:function(t){let e=this.formatQuotes(t);console.log(e);let a={};return a.cheapest=e.sorted.recommended[0],a.exec=e.sorted.executive[0],a.luxury=e.sorted.vip[0],a.chauffeur=e.sorted.chauffeur[0],console.log(a),a},formatQuotes:function(t){let e={},a={};for(let i in t){let s=t[i];if(s.active){e[i]=s,s.quote_id=i;for(let t=0;t<s.vehicles.length;t++){let e={...s};e.vehicle=s.vehicles[t],e.vehicle.index=t,e.price=e.vehicle.price;let i=e.vehicle.type.class;delete e.vehicles,a.hasOwnProperty("recommended")||(a.recommended=[]),e.highlight&&(0===t?a.recommended.push(e):e.highlight=!1),a.hasOwnProperty("all")||(a.all=[]),a.all.push(e),a.hasOwnProperty(i)||(a[i]=[]),a[i].push(e)}}}for(let t in a)a[t]=this.sortQuotes(a[t],"SORT_BY_PRICE");return{raw:e,sorted:a}},sortQuotes:function(t,e){switch(e){case"SORT_BY_PRICE":return t.sort((function(t,e){return t.price>e.price?1:e.price>t.price?-1:0}));case"SORT_BY_RATING":return t.sort((function(t,e){return t.rating.score>e.rating.score?-1:e.rating.score>t.rating.score?1:0}));default:return t}},submitForm:function(){this.validQuote()&&this.queryApi()},validQuote(){var t=!0;return""==this.pickup?(this.errors.pickup="Pickup location must be set",t=!1):this.errors.pickup=!1,""==this.destination?(this.errors.destination="Pickup location must be set",t=!1):this.errors.destination=!1,""==this.date?(this.errors.date=!1,t=!1):this.errors.date=null,""==this.time?(this.errors.time=!1,t=!1):this.errors.time=null,""==this.people?(this.errors.people,t=!1):this.errors.people=!1,t},flipImage:function(t,e){let a=this.quotes[t].vehicles[e.target.value].price;this.$refs[t][2].$el.setAttribute("data-price",a),this.$refs[t][0].src=this.quotes[t].vehicles[e.target.value].image,this.$refs[t][1].innerHTML="&pound;"+a+".00",this.setPrice(a+".00")},setPriceBeforeTransition:function(t,e){this.setPrice(e.target.dataset.price+".00")},locationSearch(t,e="pickup"){let a=[],i=[],s=[];g.a.get("https://api.taxicode.com/places/?term="+t).then(o=>{void 0!==o.data.results.STATION&&(i=o.data.results.STATION.map((function(t){return{string:t,type:"station"}}))),void 0!==o.data.results.AIRPORT&&(a=o.data.results.AIRPORT.map((function(t){return{string:t,type:"airport"}}))),void 0!==o.data.results.LOCATION&&(s=o.data.results.LOCATION.map((function(e){let a=Object(k.a)(t);if(a.length>0){let t=Object(k.a)(e);if(t.length>0&&a[0].indexOf(" ")>=0){let a=Object(k.b)(t[0]);e=e.replace(t[0],a)}}return{string:e,type:"location"}})));const n=a.concat(i.concat(s.concat(o.data.results.GOOGLE)));"pickup"==e?this.pickuplocations=n:"via"==e?this.vialocations=n:this.destinationlocations=n})}}},x=Object(m.a)(w,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("form",{attrs:{id:"searchform"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6",attrs:{id:"tcplugin-journey-type"}},[a("div",{staticClass:"form-group"},[a("label",[t._v("Journey type")]),t._v(" "),a("b-form-select",{attrs:{options:t.journey_options},model:{value:t.journey_type,callback:function(e){t.journey_type=e},expression:"journey_type"}})],1)])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group",attrs:{id:"tcplugin-pickup"}},[a("label",[t._v("Pickup")]),t._v(" "),a("vue-bootstrap-typeahead",{ref:"pickupfield",attrs:{inputClass:t.errors.pickup?"is-invalid":"",data:t.pickuplocations,serializer:function(t){return t.string},placeholder:"Pickup postcode or place name","max-matches":30},on:{hit:function(e){t.selectedLocation=e}},scopedSlots:t._u([{key:"suggestion",fn:function(e){var i=e.data,s=e.htmlText;return[a("div",{staticClass:"d-flex align-items-center"},["station"==i.type?a("span",[a("font-awesome-icon",{attrs:{icon:"train"}})],1):"airport"==i.type?a("span",[a("font-awesome-icon",{attrs:{icon:"plane"}})],1):a("span",[a("font-awesome-icon",{attrs:{icon:"map-marker-alt"}})],1),t._v(" "),a("span",{staticClass:"ml-4",domProps:{innerHTML:t._s(s)}})])]}}]),model:{value:t.pickup,callback:function(e){t.pickup=e},expression:"pickup"}})],1)]),t._v(" "),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group",attrs:{id:"tcplugin-destination"}},[a("label",[t._v("Destination")]),t._v(" "),a("vue-bootstrap-typeahead",{ref:"destinationfield",attrs:{inputClass:t.errors.destination?"is-invalid":"",data:t.destinationlocations,serializer:function(t){return t.string},placeholder:"Destination postcode or place name","max-matches":30},on:{hit:function(e){t.selectedLocation=e}},scopedSlots:t._u([{key:"suggestion",fn:function(e){var i=e.data,s=e.htmlText;return[a("div",{staticClass:"d-flex align-items-center"},["station"==i.type?a("span",[a("font-awesome-icon",{attrs:{icon:"train"}})],1):"airport"==i.type?a("span",[a("font-awesome-icon",{attrs:{icon:"plane"}})],1):a("span",[a("font-awesome-icon",{attrs:{icon:"map-marker-alt"}})],1),t._v(" "),a("span",{staticClass:"ml-4",domProps:{innerHTML:t._s(s)}})])]}}]),model:{value:t.destination,callback:function(e){t.destination=e},expression:"destination"}})],1)])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",attrs:{id:"tcplugin-via"}},[a("label",[t._v("(Optional) Via")]),t._v(" "),a("vue-bootstrap-typeahead",{ref:"viafield",attrs:{inputClass:t.errors.via?"is-invalid":"",data:t.vialocations,serializer:function(t){return t.string},placeholder:"Via postcode or place name","max-matches":30},on:{hit:function(e){t.selectedLocation=e}},scopedSlots:t._u([{key:"suggestion",fn:function(e){var i=e.data,s=e.htmlText;return[a("div",{staticClass:"d-flex align-items-center"},["station"==i.type?a("span",[a("font-awesome-icon",{attrs:{icon:"train"}})],1):"airport"==i.type?a("span",[a("font-awesome-icon",{attrs:{icon:"plane"}})],1):a("span",[a("font-awesome-icon",{attrs:{icon:"map-marker-alt"}})],1),t._v(" "),a("span",{staticClass:"ml-4",domProps:{innerHTML:t._s(s)}})])]}}]),model:{value:t.via,callback:function(e){t.via=e},expression:"via"}})],1),t._v(" "),a("div",{staticClass:"col",attrs:{id:"tcplugin-people"}},[a("div",{staticClass:"form-group"},[a("label",[t._v("Number of People")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.people,expression:"people"}],staticClass:"form-control",class:t.errors.people?"is-invalid":"",attrs:{type:"number",placeholder:"People"},domProps:{value:t.people},on:{input:function(e){e.target.composing||(t.people=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group",attrs:{id:"tcplugin-date"}},[a("label",[t._v("Date")]),t._v(" "),a("b-form-datepicker",{staticClass:"form-control",attrs:{locale:"en",min:t.mindate,state:t.errors.date},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[a("template",{slot:"button-content"},[a("img",{attrs:{src:"https://www.x0101.co.uk/clients/travaroo/wp-content/uploads/2020/07/form-date.png"}})])],2)],1)]),t._v(" "),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group",attrs:{id:"tcplugin-time"}},[a("label",[t._v("Time")]),t._v(" "),a("b-form-timepicker",{attrs:{locale:"en",state:t.errors.time},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}},[a("template",{slot:"button-content"},[a("img",{attrs:{src:"https://www.x0101.co.uk/clients/travaroo/wp-content/uploads/2020/07/form-time.png"}})])],2)],1)])]),t._v(" "),"Return"==t.journey_type?a("div",{staticClass:"row"},[a("div",{staticClass:"col",attrs:{id:"tcplugin-return-date"}},[a("div",{staticClass:"form-group"},[a("label",[t._v("Return Date")]),t._v(" "),a("b-form-datepicker",{staticClass:"form-control",attrs:{locale:"en",min:t.mindate,state:t.errors.return_date},model:{value:t.return_date,callback:function(e){t.return_date=e},expression:"return_date"}})],1)]),t._v(" "),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group",attrs:{id:"tcplugin-return-time"}},[a("label",[t._v("Return Time")]),t._v(" "),a("b-form-timepicker",{attrs:{locale:"en",state:t.errors.return_time},model:{value:t.return_time,callback:function(e){t.return_time=e},expression:"return_time"}})],1)])]):t._e(),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"}),t._v(" "),a("div",{staticClass:"col",attrs:{id:"tcplugin-search-submit"}},[a("div",{staticClass:"form-group"},[a("label"),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"button",value:"Get a quote"},on:{click:t.submitForm}})])])])]),t._v(" "),a("div",{attrs:{id:"results"}},[t.loading?a("div",[t._v("\n            Loading...\n        ")]):t._e(),t._v(" "),t.noquotes?a("div",[t._v("\n            Sorry, we could not find any quotes for the selected journey.  Please try a different journey.\n        ")]):t._e(),t._v(" "),t.quotesloaded?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("MglMap",{attrs:{accessToken:t.accessToken,mapStyle:t.mapStyle},on:{load:t.onMapLoaded}},[a("MglMarker",{attrs:{coordinates:t.pickup_coords,color:"blue"}}),t._v(" "),a("MglMarker",{attrs:{coordinates:t.destination_coords,color:"blue"}}),t._v(" "),a("MglGeojsonLayer",{attrs:{sourceId:t.geoJsonSource.data.id,source:t.geoJsonSource,layerId:"myLayer",layer:t.geoJsonLayer}})],1)],1),t._v(" "),a("div",{staticClass:"col-md-8"},["type_class"!=t.quote_settings?a("div",{staticClass:"row"},t._l(t.quotes,(function(e,i){return a("div",{staticClass:"col-sm-auto"},["best"==t.quote_settings?a("div",[e.highlight?a("div",{staticClass:"card",staticStyle:{width:"18rem"}},[a("img",{ref:i,refInFor:!0,staticClass:"card-img-top",attrs:{src:e.vehicles[0].image,alt:"Vehicle type image"}}),t._v(" "),a("div",{staticClass:"card-header"},[t._v("\n                                    "+t._s(e.highlight)+"\n                                ")]),t._v(" "),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(e.company_name))]),t._v(" "),a("p",{ref:i,refInFor:!0,staticClass:"card-text text-center display-4",attrs:{id:"selected_price"}},[t._v("£"+t._s(e.vehicles[0].price)+".00")]),t._v(" "),a("select",{staticClass:"custom-select",on:{change:function(e){return t.flipImage(i,e)}}},t._l(e.vehicles,(function(i,s){return a("option",{attrs:{"data-image":i.image,"data-price":i.price},domProps:{value:s},model:{value:e.selected_vehicle,callback:function(a){t.$set(e,"selected_vehicle",a)},expression:"quote.selected_vehicle"}},[t._v("\n                                            "+t._s(i.name)+"\n                                        ")])})),0),t._v(" "),a("router-link",{ref:i,refInFor:!0,staticClass:"btn btn-primary btn-block",attrs:{"data-price":e.vehicles[0].price,to:{name:"Checkout",params:{quote_id:i,journey_id:t.journey_id}}},nativeOn:{click:function(e){return t.setPriceBeforeTransition(i,e)}}},[t._v("Book Now")])],1)]):t._e()]):a("div",{staticClass:"card",staticStyle:{width:"18rem"}},[a("img",{ref:i,refInFor:!0,staticClass:"card-img-top",attrs:{src:e.vehicles[0].image,alt:"Vehicle type image"}}),t._v(" "),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(e.company_name))]),t._v(" "),a("p",{ref:i,refInFor:!0,staticClass:"card-text text-center display-4",attrs:{id:"selected_price"}},[t._v("£"+t._s(e.vehicles[0].price)+".00")]),t._v(" "),a("select",{staticClass:"custom-select",on:{change:function(e){return t.flipImage(i,e)}}},t._l(e.vehicles,(function(i,s){return a("option",{attrs:{"data-image":i.image,"data-price":i.price},domProps:{value:s},model:{value:e.selected_vehicle,callback:function(a){t.$set(e,"selected_vehicle",a)},expression:"quote.selected_vehicle"}},[t._v("\n                                        "+t._s(i.name)+"\n                                    ")])})),0),t._v(" "),a("router-link",{ref:i,refInFor:!0,staticClass:"btn btn-primary btn-block",attrs:{"data-price":e.vehicles[0].price,to:{name:"Checkout",params:{quote_id:i,journey_id:t.journey_id}}},nativeOn:{click:function(e){return t.setPriceBeforeTransition(i,e)}}},[t._v("Book Now")])],1)])])})),0):a("div",{staticClass:"row"},t._l(t.quotes,(function(e,i){return a("div",{staticClass:"col-sm-auto"},[a("div",{staticClass:"card",staticStyle:{width:"18rem"}},[a("img",{ref:e.quote_id,refInFor:!0,staticClass:"card-img-top",attrs:{src:e.vehicle.image,alt:"Vehicle type image"}}),t._v(" "),a("div",{staticClass:"card-header"},[t._v("\n                                "+t._s(t.type_map[i])+"\n                            ")]),t._v(" "),a("div",{staticClass:"card-body"},[a("h6",{staticClass:"card-subtitle mb-2 text-muted"},[t._v(t._s(e.vehicle.name))]),t._v(" "),a("div",{staticClass:"card-text d-flex justify-content-center align-items-center"},[a("div",{staticClass:"badge badge-pill badge-secondary"},[a("font-awesome-icon",{attrs:{icon:"users"}}),t._v(" "+t._s(e.vehicle.passengers))],1),t._v(" "),a("div",[t._v(" ")]),t._v(" "),a("div",{staticClass:"badge badge-pill badge-secondary"},[a("font-awesome-icon",{attrs:{icon:"suitcase"}}),t._v(" "+t._s(e.vehicle.luggage_small))],1)]),t._v(" "),a("p",{ref:e.quote_id,refInFor:!0,staticClass:"card-text text-center display-4",attrs:{id:"selected_price"}},[t._v("£"+t._s(e.price)+".00")]),t._v(" "),a("router-link",{ref:e.quote_id,refInFor:!0,staticClass:"btn btn-primary btn-block",attrs:{"data-price":e.price,to:{name:"Checkout",params:{quote_id:e.quote_id,journey_id:t.journey_id}}},nativeOn:{click:function(e){return t.setPriceBeforeTransition(t.id,e)}}},[t._v("Book Now")])],1)])])})),0)])]):t._e()])])}),[],!1,null,null,null).exports,j={name:"Checkout",props:{card_created:{type:Boolean,default:!0}},computed:{price(){return this.$store.state.price}},data:()=>({name:"",email:"",telephone:"",flight_number:null,quote_id:null,journey_id:null,vehicle:0,journey_data:{},cardholder_name:"",errors:{name:!1,email:!1,telephone:!1},test_mode:0,loading:!1,payment_method:"Pay with card",payment_options:["Pay with card","Pay with Paypal"],posterror:!1}),created(){this.paypal_token=paypal_token,this.test_mode=test_mode,this.quote_id=this.$route.params.quote_id,this.journey_id=this.$route.params.journey_id,g.a.get(config.JOURNEY_URL+this.journey_id+"&include_quote=true").then(function(t){console.log(t.data),this.journey_data=t.data.journey}.bind(this))},mounted:function(){card=elements.create("card"),card.mount(this.$refs.card),this.card_created=!0},methods:{validate:function(){var t=!0;return""==this.name?(this.errors.name="Booking name must be set",t=!1):this.errors.name=!1,""!=this.email&&this.validEmail(this.email)?this.errors.email=!1:(this.errors.email="Valid email must be set",t=!1),""==this.telephone?(this.errors.telephone="Telephone must be set",t=!1):this.errors.telephone=!1,""==this.cardholder_name?(this.errors.cardholder_name="Cardholder name must be set",t=!1):this.errors.cardholder_name=!1,t},validEmail:function(t){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},onPaypalSubmit:function(t){this.validate()&&(this.posterror=!1,this.loading=1,this.makeBooking(t.nonce,"paypal"))},onPaypalError:function(t){},onLoadFail:function(t){console.log(t)},makeBooking:function(t,e){let a=new FormData;a.append("email",this.email),a.append("name",this.name),a.append("telephone",this.telephone),a.append("key",tc_public_key),a.append("quote",this.quote_id),a.append("vehicle",this.vehicle),a.append("test",this.test_mode),a.append("new_pay",!0),a.append("payment_token",t),"stripe"==e?a.append("method","googlepay"):a.append("method","paypal"),g.a.post(config.PAYMENT_URL,a,{headers:{"Content-Type":"application/application/x-www-form-urlencoded"}}).then(function(t){"OK"==t.data.status?this.$router.push({name:"Complete",params:{booking_ref:t.data.reference}}):(this.posterror=t.data.error,this.loading=0)}.bind(this)).catch(function(t){this.loading=0}.bind(this))},onSubmit:function(){this.validate()&&("Pay with card"==this.payment_method?this.onStripeSubmit():this.onPaypalSubmit())},onStripeSubmit:function(){this.posterror=!1,this.loading=1;var t=this;stripe.createToken(card).then(function(e){if(e.error)return this.loading=0,t.hasCardErrors=!0,void t.$forceUpdate();let a=e.token.id;this.makeBooking(a,"stripe")}.bind(this))},mountStripe:function(){"Pay with card"==this.payment_method?this.$nextTick((function(){this.card_created||(console.log("creting card"),card=elements.create("card"),this.card_created=!0),console.log("mounting card"),card.mount(this.$refs.card)})):card.unmount(this.$refs.card)}}},P=Object(m.a)(j,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("form",{attrs:{id:"purchaseform"}},[t._m(0),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",attrs:{id:"tcplugin-passenger-name"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"customer_name"}},[t._v("Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",class:t.errors.name?"is-invalid":"",attrs:{type:"text",id:"customer_name","aria-describedby":"nameHelp",placeholder:"Enter your name",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("The name of the person travelling,")])])]),t._v(" "),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group",attrs:{id:"tcplugin-email"}},[a("label",{attrs:{for:"customer_email"}},[t._v("Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",class:t.errors.email?"is-invalid":"",attrs:{type:"email",id:"customer_email","aria-describedby":"emailHelp",placeholder:"Enter your email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),a("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[t._v("We'll never share your email with anyone else.")])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",attrs:{id:"tcplugin-passenger-telephone"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"telephone"}},[t._v("Mobile telephone")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.telephone,expression:"telephone"}],staticClass:"form-control",class:t.errors.telephone?"is-invalid":"",attrs:{type:"text",id:"telephone","aria-describedby":"mobileHelp",placeholder:"Enter a mobile number",required:""},domProps:{value:t.telephone},on:{input:function(e){e.target.composing||(t.telephone=e.target.value)}}}),t._v(" "),a("small",{staticClass:"form-text text-muted",attrs:{id:"mobileHelp"}},[t._v("Valid UK mobile numbers only, please")])])]),t._v(" "),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group",attrs:{id:"tcplugin-flight-number"}},[a("label",{attrs:{for:"flight_number"}},[t._v("Flight #")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.flight_number,expression:"flight_number"}],staticClass:"form-control",attrs:{type:"text",id:"flight_number","aria-describedby":"flightHelp",placeholder:"Enter your flight number"},domProps:{value:t.flight_number},on:{input:function(e){e.target.composing||(t.flight_number=e.target.value)}}}),t._v(" "),a("small",{staticClass:"form-text text-muted",attrs:{id:"flightHelp"}},[t._v("If this is an airport pickup or dropoff, the relevent flight number")])])])]),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",attrs:{id:"tcplugin-payament-select"}},[t._v("\n                Select Payment Method:\n            ")]),t._v(" "),a("div",{staticClass:"col"},[a("b-form-select",{attrs:{options:t.payment_options},on:{change:t.mountStripe},model:{value:t.payment_method,callback:function(e){t.payment_method=e},expression:"payment_method"}})],1)]),t._v(" "),"Pay with card"==t.payment_method?a("div",{staticClass:"row"},[a("div",{staticClass:"col",attrs:{id:"tcplugin-cardholder-name"}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",attrs:{for:"card-holder-name"}},[t._v("Cardholder Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cardholder_name,expression:"cardholder_name"}],staticClass:"form-control",class:t.errors.cardholder_name?"is-invalid":"",attrs:{id:"card-holder-name",type:"text",placeholder:"Cardholder name"},domProps:{value:t.cardholder_name},on:{input:function(e){e.target.composing||(t.cardholder_name=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col",attrs:{id:"tcplugin-stripe-card-details"}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",attrs:{for:"card"}},[t._v("Card Details")]),t._v(" "),a("div",{ref:"card",staticClass:"form-control",attrs:{id:"card"}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("input",{staticClass:"btn btn-primary",attrs:{type:"button",value:0==t.loading?"Book Now":"Processing",disabled:1==t.loading},on:{click:t.onSubmit}})])])]):a("div",{staticClass:"row"},[a("div",{staticClass:"col"}),t._v(" "),a("div",{staticClass:"col",attrs:{id:"tcplugin-paypal-plugin"}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",attrs:{for:"paypal"}},[t._v("Or Pay With Paypal")]),t._v(" "),a("v-braintree",{attrs:{authorization:t.paypal_token,paypal:{flow:"checkout",amount:t.price,currency:"GBP"}},on:{success:t.onPaypalSubmit,error:t.onPaypalError,loadFail:t.onLoadFail},scopedSlots:t._u([{key:"button",fn:function(e){return[a("div",{staticClass:"form-group"},[a("input",{staticClass:"btn btn-primary",attrs:{type:"button",value:0==t.loading?"Book Now":"Processing",disabled:1==t.loading},on:{click:e.submit}})])]}}])})],1)])]),t._v(" "),t.posterror?a("div",{staticClass:"row"},[a("div",{staticClass:"col",attrs:{id:"tcplugin-payment-error"}},[t._v("\n                "+t._s(t.posterror)+"\n            ")])]):t._e(),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col",attrs:{id:"tcplugin-checkout-booking-details"}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[t._v("\n                        Booking Details\n                    ")]),t._v(" "),a("ul",{staticClass:"list-group list-group-flush"},[a("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[a("strong",[t._v("Date:")]),t._v(" "+t._s(t.journey_data.date)+" at "+t._s(t.journey_data.time)+"\n                        ")]),t._v(" "),a("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[a("strong",[t._v("Travelling From:")]),t._v(" "+t._s(t.journey_data.pickup)+"\n                        ")]),t._v(" "),a("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[a("strong",[t._v("Going To:")]),t._v(" "+t._s(t.journey_data.destination)+"\n                        ")]),t._v(" "),t.journey_data.via?a("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[a("strong",[t._v("Via:")]),t._v(" "+t._s(t.journey_data.vias[0].string)+"\n                        ")]):t._e(),t._v(" "),t.journey_data.return?a("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[a("strong",[t._v("Returning:")]),t._v(" "+t._s(t.journey_data.return)+" at "+t._s(t.journey_data.return_time)+"\n                        ")]):t._e(),t._v(" "),a("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[a("strong",[t._v("Price:")]),t._v(" £"+t._s(t.price)+"\n                        ")])])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("h4",{attrs:{id:"tc_plugin-passenger-heading"}},[this._v("Passenger Details")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("h4",{attrs:{id:"tc_plugin-payment-heading"}},[this._v("Payment Details")])])])}],!1,null,"127f0d32",null).exports,q={name:"Complete.vue",data:()=>({booking_ref:"",booking_name:"",booking_date:"",booking_from:"",booking_to:"",complete_page_text:""}),created(){this.complete_page_text=complete_page_text,this.complete_page_url=complete_page_url,this.booking_ref=this.$route.params.booking_ref,g.a.get(this.complete_page_url+this.booking_ref).then(function(t){this.booking_name=t.data.booking.passenger.name,this.booking_date=t.data.booking.date_elements.day+" "+t.data.booking.date_elements.month+" "+t.data.booking.date_elements.year+" at "+t.data.booking.date_elements.hours+":"+t.data.booking.date_elements.minutes,this.booking_from=t.data.booking.pickup.string,this.booking_to=t.data.booking.destination.string}.bind(this))}},T=Object(m.a)(q,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"completePage"}},[a("h3",[t._v("Your booking is complete")]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("p",[t._v(t._s(t.complete_page_text))])]),t._v(" "),a("div",{staticClass:"col"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[t._v("\n                    Booking Details\n                ")]),t._v(" "),a("ul",{staticClass:"list-group list-group-flush"},[a("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[a("strong",[t._v("Booking Reference:")]),t._v(" "+t._s(t.booking_ref)+"\n                    ")]),t._v(" "),a("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[a("strong",[t._v("Name:")]),t._v(" "+t._s(t.booking_name)+"\n                    ")]),t._v(" "),a("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[a("strong",[t._v("Date:")]),t._v(" "+t._s(t.booking_date)+"\n                    ")]),t._v(" "),a("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[a("strong",[t._v("Travelling From:")]),t._v(" "+t._s(t.booking_from)+"\n                    ")]),t._v(" "),a("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[a("strong",[t._v("Going To:")]),t._v(" "+t._s(t.booking_to)+"\n                    ")])])])])])])}),[],!1,null,"b40e9eaa",null).exports;i.default.use(_.a);var S=new _.a({routes:[{path:"/",name:"Home",component:x},{path:"/checkout/:quote_id/:journey_id",name:"Checkout",component:P},{path:"/complete/:booking_ref",name:"Complete",component:T}]}),O=a(60),D=a(41);i.default.use(s.a);var L=new s.a.Store({state:{price:0},mutations:{setPrice(t,e){t.price=e}},plugins:[Object(O.a)({getState:t=>D.getJSON(t),setState:(t,e)=>D.set(t,e,{expires:3,secure:!0})})]});l.c.add(c.b,c.d,c.a,c.e,c.c),i.default.component("font-awesome-icon",d.a);const $=a(80);window.config=$,i.default.use(o.a),i.default.use(n.a),i.default.use(s.a),i.default.use(r.a),i.default.use(p.a),i.default.config.productionTip=!1,new i.default({el:"#vue-frontend-app",router:S,store:L,render:t=>t(v)})}},[[84,0,1]]]);
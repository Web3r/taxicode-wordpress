(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{257:function(e,o,t){"use strict";const s={props:{appConfig:{type:Object,required:!0,default:function(){return null}},appSettings:{type:Object,required:!0,default:function(){return null}},debugging:{type:Boolean,default:!1}}};o.a=s},259:function(e,o,t){},266:function(e,o,t){"use strict";var s=t(259);t.n(s).a},277:function(e,o,t){"use strict";t.r(o);var s=t(21),n=t(257),a=t(80);var r={name:"HomePage",props:{...{searchFormData:{type:Object,default:function(){return{}}},searchOnLoad:{type:Boolean,default:!1}}},computed:{...{...Object(s.c)(["hasSearchResults","displayType","loadingQuotes","quotesError","quotesLoaded","journeyID","journeyDetails","journeyQuotes","quoteID","vehicleIndex"]),showResults:function(){return this.loadingQuotes||this.quotesError||this.quotesLoaded},showRecommendedUpgrade:function(){return this.appSettings.recommend_upgrade&&this.show_upgrade}}},methods:{...{...Object(s.b)(["searchedQuotes","changeDisplayType","apiQuotesError","bookNow"]),searchFormPropData:function(){this.debugging&&console.log("BIQ Search Form POST prop data",this.searchFormData);const e={journey_type:void 0!==this.searchFormData.journey_type?this.searchFormData.journey_type:"",pickup:void 0!==this.searchFormData.pickup?this.searchFormData.pickup:"",vias:void 0!==this.searchFormData.via?[this.searchFormData.via]:[],destination:void 0!==this.searchFormData.destination?this.searchFormData.destination:"",date:void 0!==this.searchFormData.date?this.searchFormData.date:"",time:void 0!==this.searchFormData.time?this.searchFormData.time:"",people:void 0!==this.searchFormData.people?this.searchFormData.people:"1"};let o="",t="";return void 0!==this.searchFormData.return_date&&(o=this.searchFormData.return_date,void 0!==this.searchFormData.return_time&&(t=this.searchFormData.return_time)),e.returning={date:o,time:t},e},onQuotesSearched:function(e){this.debugging&&(console.group("BIQ Quotes Searched"),console.log(e)),this.updateSearchState(e.data),this.debugging&&console.groupEnd()},onZeroQuotes:function(e){this.debugging&&(console.group("BIQ Quotes Search Zero Results"),console.log(e)),console.error(e.data.error),this.updateSearchState(e.data),this.debugging&&console.groupEnd()},onQuotesError:function(e){this.debugging&&(console.group("BIQ Quotes Search Error"),console.log(e),console.groupEnd());const o=e.data.error.message||"Unknown BIQ Quotes API Error";console.error(e.data.error),this.apiQuotesError(o)},onBookNowClicked:function(e){this.debugging&&(console.group("BIQ Quote Book Now Clicked"),console.log(e)),e.preventDefault();const{quoteID:o,selectedVehicleIndex:t}=e.data;this.debugging&&(console.log("Quote ID",o),console.log("Vehicle Index",t),console.log("Quote",this.journeyQuotes[o]),console.log("Vehicle",this.journeyQuotes[o].vehicles[t]),console.groupEnd());const s={journey:this.journeyID,quote:{id:o,vehicle:t}};return this.selected=s,this.appSettings.recommend_upgrade?this.show_upgrade=!0:this.gotoCheckout()},onUpgradeUnavailable:function(e){this.debugging&&console.log("No Quote Upgrade Available Event",e),this.show_upgrade=!1,this.gotoCheckout()},onUpgradeModalCancel:function(e){this.debugging&&console.log("Cancel Upgrade Modal Event",e),this.show_upgrade=!1,this.gotoCheckout()},onUpgradeModalConfirm:function(e){this.debugging&&console.log("Confirm Modal Event",e);const o=e.recommendedUpgrade;this.debugging&&(console.group("Quote Upgrade Recommendation Accepted"),console.log("recommendedUpgrade",o),console.groupEnd()),this.show_upgrade=!1,this.selected.quote={id:o.upgradeQuoteId,vehicle:o.upgradeVehicleIndex},this.gotoCheckout()},gotoCheckout:function(){this.bookNow({quote:this.selected.quote.id,vehicle:this.selected.quote.vehicle,quote_data:this.journeyQuotes[this.selected.quote.id]}),this.$router.push({name:"CheckoutPage",params:{journey:this.journeyID,quote:this.quoteID,vehicle:this.vehicleIndex}})},updateSearchState:function(e){this.debugging&&(console.group("BIQ Quotes Search State Updated"),console.log("Search data",e),console.log("Quote type",this.appSettings.quote_type),console.groupEnd()),this.searchedQuotes({...e,display_type:this.appSettings.quote_type})}}},mixins:[n.a],components:{"the-biq-search-form":a.a,"the-biq-search-results":()=>t.e(12).then(t.bind(null,278)),"biq-quote-upgrade-offer-modal":()=>t.e(10).then(t.bind(null,274))},data:()=>({selected:{journey:"",quote:{id:"",vehicle:0}},show_upgrade:!1}),created(){this.searchOnLoad&&this.$store.commit("searchingQuotesFor",this.searchFormPropData()),this.displayType!==this.appSettings.quote_type&&this.hasSearchResults&&this.changeDisplayType(this.appSettings.quote_type)}},i=(t(266),t(19)),u=Object(i.a)(r,(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("the-biq-search-form",{attrs:{"biq-public-key":e.appSettings.biq_pk,"biq-places-lookup":""+e.appSettings.biq_api_host+e.appConfig.biq.PLACES_URI,"biq-quotes-from":""+e.appSettings.biq_api_host+e.appConfig.biq.QUOTE_URI,"search-on-load":e.searchOnLoad,debugging:e.debugging,"use-buttons":e.appConfig.biq.useButtons,layout:"column"},on:{biqQuotesSearched:e.onQuotesSearched,biqZeroQuotes:e.onZeroQuotes,biqQuotesError:e.onQuotesError}}),e._v(" "),e.showResults?t("the-biq-search-results",{attrs:{"display-results-type":e.appSettings.quote_type,debugging:e.debugging,"use-buttons":e.appConfig.biq.useButtons},on:{biqQuoteBookNow:e.onBookNowClicked},scopedSlots:e._u([{key:"loading-quotes",fn:function(){return[t("div",{staticClass:"row"},[e._v("\n                Generating Quotes...\n            ")])]},proxy:!0}],null,!1,4198224566)}):e._e(),e._v(" "),e.showRecommendedUpgrade?t("biq-quote-upgrade-offer-modal",{attrs:{journey:e.selected.journey,quote:e.selected.quote.id,vehicle:e.selected.quote.vehicle,debugging:e.debugging},on:{unavailable:e.onUpgradeUnavailable,cancel:e.onUpgradeModalCancel,confirm:e.onUpgradeModalConfirm},scopedSlots:e._u([{key:"body",fn:function(o){return[t("p",[e._v(e._s(o.upgrade.description))])]}}],null,!1,2651137853)}):e._e()],1)}),[],!1,null,"032ce13a",null);o.default=u.exports},80:function(e,o,t){"use strict";var s=t(15);const n={column:{name:"column",tag:"the-biq-search-form-column",component:()=>Promise.all([t.e(0),t.e(13)]).then(t.bind(null,279))},compact:{name:"compact",tag:"the-biq-search-form-compact",component:()=>Promise.all([t.e(0),t.e(14)]).then(t.bind(null,280))}};var a={name:"TheSearchForm",components:{...(e=>{const o=Object.keys(e).map(o=>[e[o].tag,e[o].component]);return Object.fromEntries(o)})(n)},props:{biqPublicKey:{type:String,required:!0,default:""},biqPlacesLookup:{type:String,required:!0,default:"//places/?term="},biqQuotesFrom:{type:String,required:!0,default:"//booking/quote/"},layout:{type:String,default:n.compact.name,required:!0,validator:e=>Object.keys(n).indexOf(e)>-1},searchOnLoad:{type:Boolean,default:!1},debugging:{type:Boolean,default:!1},useButtons:{type:Boolean,default:!0}},computed:{useLayout:function(){switch(this.layout){case n.compact.name:return n.compact.tag;case n.column.name:return n.column.tag}}},methods:{onBiqQuotesSearched:function(e){this.$emit(s.f.biqQuotesSearched.name,e)},onBiqZeroQuotes:function(e){this.$emit(s.f.biqZeroQuotes.name,e)},onBiqQuotesError:function(e){this.$emit(s.f.biqQuotesError.name,e)}}},r=t(19),i=Object(r.a)(a,(function(){var e=this,o=e.$createElement;return(e._self._c||o)(e.useLayout,{tag:"component",attrs:{"biq-public-key":e.biqPublicKey,"biq-places-lookup":e.biqPlacesLookup,"biq-quotes-from":e.biqQuotesFrom,"search-on-load":e.searchOnLoad,debugging:e.debugging,"use-buttons":e.useButtons,"id-prefix":"biq"},on:{biqQuotesSearched:e.onBiqQuotesSearched,biqZeroQuotes:e.onBiqZeroQuotes,biqQuotesError:e.onBiqQuotesError}})}),[],!1,null,null,null);o.a=i.exports}},0,[10,12]]);
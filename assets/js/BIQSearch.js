(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{224:function(e,t,i){"use strict";i.d(t,"b",(function(){return g}));var o=i(24),n=i(43),s=i(33),a=i(23),r=i(227),l=i(225);const u={name:"input"},c={name:"biqPlacesLookupError"};var d={name:"PlacesLookup",components:{"vue-typeahead-bootstrap":l.a},props:{biqPlacesLookup:{type:String,required:!0,default:"//places/?term="},biqPublicKey:{type:String,required:!0,default:""},id:{type:String,default:"biq-places-lookup"},placeholder:{type:String,default:"Location postcode or place name"},label:{type:String,default:""},value:{type:String,default:""},required:{type:Boolean,default:!1},size:{type:String,default:null,validator:e=>["lg","sm"].indexOf(e)>-1},containerClass:{type:String,default:""},validClass:{type:String,default:""},errorClass:{type:String,default:"is-invalid"},errorState:{type:String,default:null},debugging:{type:Boolean,default:!1}},data:()=>({locations:[],force_lookup:!0}),updated(){this.force_lookup?this.locationSearch(this.value):this.$refs.locationfield.inputValue=this.value},watch:{location:{handler:r.a.debounce((function(e){this.locationSearch(e)}),500),immediate:!0}},computed:{location:{get(){return this.value},set(e){this.$emit(u.name,e)}},inputID:function(){return this.id+"-input"},errorStateClass:function(){const e=null==this.errorState?"":this.errorState?this.errorClass:this.validClass;return`${this.id} ${e}`},minLength:function(){return this.debugging?1:3}},methods:{locationSearch:function(e){if(null===e||"string"!=typeof e||e.length<this.minLength)return;this.debugging&&console.log(`BIQ Places ${this.label} lookup to API '${this.biqPlacesLookup}'`,e),this.force_lookup=!1,this.$refs.locationfield.inputValue=e;const t=this;Object(a.d)(this.biqPlacesLookup,this.biqPublicKey,e,(e,t)=>({string:e,type:t}),this.debugging).then(e=>{t.locations=e}).catch(e=>{t.locations=[],t.$emit(c.name,e)})},validate:function(){return!(this.required&&(null==this.value||""==this.value))}}},h=i(18),p=Object(h.a)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.containerClass},[e.label?i("label",{attrs:{id:e.inputID,for:e.id}},[e._v(e._s(e.label))]):e._e(),e._v(" "),i("vue-typeahead-bootstrap",{ref:"locationfield",attrs:{id:e.id,placeholder:e.placeholder,size:e.size,inputClass:e.errorStateClass,"show-all-results":!0,"show-on-focus":!0,data:e.locations,serializer:function(e){return e.string}},on:{hit:function(t){e.selectedLocation=t}},scopedSlots:e._u([{key:"suggestion",fn:function(t){var o=t.data,n=t.htmlText;return[i("div",{staticClass:"d-flex align-items-center"},["station"==o.type?i("span",[i("font-awesome-icon",{attrs:{icon:"train"}})],1):"airport"==o.type?i("span",[i("font-awesome-icon",{attrs:{icon:"plane"}})],1):i("span",[i("font-awesome-icon",{attrs:{icon:"map-marker-alt"}})],1),e._v(" "),i("span",{staticClass:"ml-4",domProps:{innerHTML:e._s(n)}})])]}}]),model:{value:e.location,callback:function(t){e.location=t},expression:"location"}},[i("template",{slot:"prepend"}),e._v(" "),e._v(" "),i("template",{slot:"append"})],2)],1)}),[],!1,null,null,null).exports;const g={biqPublicKey:{type:String,required:!0,default:""},biqPlacesLookup:{type:String,required:!0,default:"//places/?term="},biqQuotesFrom:{type:String,required:!0,default:"//booking/quote/"},idPrefix:{type:String,default:"biq"},useLabels:{type:Boolean,default:!0},searchOnLoad:{type:Boolean,default:!1},debugging:{type:Boolean,default:!1}},m={...n.c},b={hasReturn:function(){return this.fields.journey_type.selected===s.a},datePickerIconAsset:function(){return i(277)},timePickerIconAsset:function(){return i(278)}},f={props:{...n.a.props,...g},components:{"biq-places-lookup":p,"biq-process-form-submit":()=>i.e(10).then(i.bind(null,413))},data(){return{fields:Object(s.c)(this.idPrefix),date:"",time:"",return_date:"",return_time:"",errors:{date:null,time:null,return_date:null,return_time:null},date_picker_formats:{short:{year:"numeric",month:"short",day:"2-digit"},medium:{year:"numeric",month:"short",day:"2-digit",weekday:"short"}}}},mounted(){this.setFieldValues(),this.searchOnLoad&&this.onSearchQuotesFormSubmit({})},computed:{...Object(o.c)(["searchDetails","loadingQuotes"]),...b},methods:{...n.a.methods,journeyDateTimeErrorState:function(e){return null!==this.errors[e]?!this.errors[e].length:null},onPlacesLookupError:function(e){},setFieldValues:function(){const e=this.searchDetails;this.debugging&&console.log("BIQ Search Form from State",e),this.fields.journey_type.selected=e.journey_type,this.fields.pickup.value=e.pickup,this.fields.destination.value=e.destination,e.vias.length&&(this.fields.via.value=e.vias[0]),this.fields.people.value=e.people,this.date=e.date,this.time=e.time,this.hasReturn&&null!==e.returning.date&&(this.return_date=e.returning.date),this.hasReturn&&null!==e.returning.time&&(this.return_time=e.returning.time),this.$nextTick(()=>{this.$refs.pickupfield.inputValue=this.fields.pickup.value,this.$refs.destinationfield.inputValue=this.fields.destination.value,this.$refs.viafield.inputValue=this.fields.via.value})},onSearchQuotesFormSubmit:function(e){e.data={validate:()=>this.validate(),formValues:()=>this.formValues()},this.$emit(m.submit.name,e)},validate:function(){this.errors={date:null,time:null,return_date:null,return_time:null};let e=0;this.validateValues()||e++,null!=this.date&&""!=this.date||(this.errors.date="Journey date is invalid",e++),null!=this.time&&""!=this.time||(this.errors.time="Journey time is invalid",e++),this.hasReturn&&(null!=this.return_date&&""!=this.return_date||(this.errors.return_date="Journey return date is invalid",e++),null!=this.return_time&&""!=this.return_time||(this.errors.return_time="Journey return time is invalid",e++));const t=0===e;return this.emitValidationEvent(t),t},emitValidationEvent:function(e){let t=m.validated.name;const i={data:{values:{...this.inputValues()}}};e||(t=m.validationError.name,i.data.errors={...this.validationErrors(),...this.errors},this.debugging&&(console.group("BIQ Search Form Validation Error"),console.log("Validation Error Fields",{...this.validationErrors()}),console.log("Validation Error",i.data.errors),console.groupEnd())),this.$emit(t,i)},formValues:function(){const e=this.inputValues(),t={journey_type:e.journey_type,pickup:e.pickup,destination:e.destination,people:e.people,date:this.date,time:this.time,hasReturn:this.hasReturn};t.hasReturn?t.returning={date:this.return_date,time:this.return_time}:t.returning={date:null,time:null};const i=this.fields.via.value;return t.vias=""!=i?[i]:[],t}}};t.a=f},226:function(e,t,i){"use strict";var o=i(23),n=i(224),s=i(43),a=i(22);const r={column:{name:"column",tag:"the-biq-search-form-column",component:()=>i.e(16).then(i.bind(null,439))},compact:{name:"compact",tag:"the-biq-search-form-compact",component:()=>i.e(17).then(i.bind(null,435))},"compact-row":{name:"compact-row",tag:"the-biq-search-form-compact-row",component:()=>i.e(19).then(i.bind(null,441))},"compact-column":{name:"compact-column",tag:"the-biq-search-form-compact-column",component:()=>i.e(18).then(i.bind(null,442))}},l={...n.b,layout:{type:String,default:r.compact.name,required:!0,validator:e=>Object.keys(r).indexOf(e)>-1}},u={...s.c,...a.e};var c={name:"TheSearchForm",props:l,computed:{useLayout:function(){return r[this.layout].tag}},methods:{onSubmit:function(e){e.data.defaultAction=()=>{const{validate:t,formValues:i}=e.data;t()&&this.searchApiQuotes(i())},e.data.searchApiQuotes=e=>this.searchApiQuotes(e),this.$emit(u.submit.name,e)},onValidated:function(e){this.$emit(u.validated.name,e)},onValidationError:function(e){this.$emit(u.validationError.name,e)},searchApiQuotes:function(e){const t=this;this.debugging&&console.group(`Searching BIQ API Quotes from '${this.biqQuotesFrom}'`),Object(o.e)(this.biqQuotesFrom,this.biqPublicKey,e,this.debugging).then(e=>{const i=e.count?u.biqQuotesSearched.name:u.biqZeroQuotes.name;t.$emit(i,e),t.debugging&&(console.info("BIQ API Quotes Searched"),console.groupEnd())}).catch(e=>{t.$emit(u.biqQuotesError.name,e),t.debugging&&console.groupEnd()})},onBiqQuotesSearched:function(e){this.$emit(u.biqQuotesSearched.name,e)},onBiqZeroQuotes:function(e){this.$emit(u.biqZeroQuotes.name,e)},onBiqQuotesError:function(e){this.$emit(u.biqQuotesError.name,e)}},components:{...(e=>{const t=Object.keys(e).map(t=>[e[t].tag,e[t].component]);return Object.fromEntries(t)})(r)}},d=i(18),h=Object(d.a)(c,(function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.useLayout,{tag:"component",attrs:{"biq-public-key":e.biqPublicKey,"biq-places-lookup":e.biqPlacesLookup,"biq-quotes-from":e.biqQuotesFrom,"use-labels":e.useLabels,"search-on-load":e.searchOnLoad,debugging:e.debugging,"id-prefix":"biq"},on:{submit:e.onSubmit,validated:e.onValidated,validationError:e.onValidationError}})}),[],!1,null,null,null);t.a=h.exports},277:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAyIDc5LjE2NDM2MCwgMjAyMC8wMi8xMy0wMTowNzoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkI2MTEyRDE3RTJFOTExRUFBOTQxRkY4M0E2NDM1MDlEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkI2MTEyRDE4RTJFOTExRUFBOTQxRkY4M0E2NDM1MDlEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjYxMTJEMTVFMkU5MTFFQUE5NDFGRjgzQTY0MzUwOUQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjYxMTJEMTZFMkU5MTFFQUE5NDFGRjgzQTY0MzUwOUQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz548pm8AAACB0lEQVR42myU24vNURTHz5n5HUMcco0yoplyyRDTKOX2hBdFmZJEnqbx4GW8YJ5ELi/8BabGpZQm00SRIrc0jUtDXkhhaGQolya3wWfpM7X9zK8+57f2b6+91t5rffcp9rWsLCRPHXTAGnjttyMwFzYlft2wD64Of8h8r4eNsABqoQ3eOrcWynDK8ShoMEEvXIu5CLQTTrrwu87zoFq7bMIGx5W+Z8Ik18+p4OcQXIfZsEOnDTBfuuCJwYPF8BH2QA2cgP0RaAZcga9wx8yPk3q0wJZkPAhR2AvwG25AMbY8lNTqG/QU/n36Cv8/jxK7BL8qcg5jYYWTVdqjrUvY4/RbBhPThflAi+AiTIdZcMkuTvD7Ev3Owuqk81VZLlC3Cwfi3BbzvbVYCG+ShIPaL+BuPlCMJ8MHA02xQyGLV/qEWOvhpxq6DcvzgepVayh5DNyzNvdNcFrxfnG+Uvm05gPFwqUeoaj93MJ3ON6q74A1OxpizgcKKXyKdhoo7B9qaxU0wnnbfxN2WccD+a5FW58q/1rtGlUfAS8nCZuhyZ2WMzMP6RCXcB30K42wX9qxTO18hsPu8oH1/DsZx5hqoCjirWSHw3aPEjgI2+GchFjbwy8CdcJueDfCdSi6uzjSXgsbxzwD4z3eNNicWbCSf1SlEe7VM49xzE7FJT5uOR7CtrjkfwQYAH0jdMQPI4K4AAAAAElFTkSuQmCC"},278:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAYAAACN1PRVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAyIDc5LjE2NDM2MCwgMjAyMC8wMi8xMy0wMTowNzoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlEMDEzQzlDRTM3MTExRUFCOEVGOEI5Q0U4ODRDQjYxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlEMDEzQzlERTM3MTExRUFCOEVGOEI5Q0U4ODRDQjYxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUQwMTNDOUFFMzcxMTFFQUI4RUY4QjlDRTg4NENCNjEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUQwMTNDOUJFMzcxMTFFQUI4RUY4QjlDRTg4NENCNjEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5xcNB2AAAEmElEQVR42qyWa2xURRTH/3dfXdptt08ECqWEYgsCEUoor4JgiCABgkUxqS8iJTH4TDG+Ej74Af3QYvxAokaBSHw0KSIaQ4tEKZH6oIIKVASxGCjSSNnS7bb76O71f+beLsuyXVvCSX7JvXPnzpk58z9nRrtYXY5hWDoZSdLINfIPCQ71Z9sQ+iwkj5DFpCjuW4gcI41kF2lLNpDlf5wcJU2kKoEjMTspI1vIWbKbjB6OM1ntNnKIzBpGiK1mBFrJA0Nx5iD7yAtEw61ZJqknzyRzJoN/Qu433izQrHakzV2F7Mdeh2azq3dnSRlyN9bCUThNvQs567fCedcC9Sz/mWO9TSoHE8jz0eVrGlKKZsBZXIaUSTNhzRoF98pNiPh9cIwrYVspXIE+9F+5wLFt7FsKzemCo2AyAmdaEDh3fMDhe+S4GVpopvTzyWnikpe0spVwr3oaEd81aA4ntBEuhK9egh4KwOLKhjUjB+GuDkT6fHRmgS2vQPXVQ35odie8h+vQ8+3HA4s4ZCo5urIXBxypZFr6OPytR+CpewOuxZVwTpmHK+9w4f0hOKeVI2N5Fbr21CJ47lfVP++5d9Hz3R74TzQhs2Iz0hc9HOvsHrKUfC3OnOSJGzYyNYOh+AU6B/dxkN6fG6AHetU3/6lmhC6cRri7E3o4pNo6d76KSE8X34MI/n2KYZ0Zr40NA85kie4bPkXCFLLVeOzzAoK5l3p/AP2dl9SzQtcR9lw2Z0lxWG2qLc5WSE6KdOYnFLDZ31E4Famzlqln5+S5KqRiqaX3wTF+qvE8ewVsdxSaIrZEJxpjUt6mi7M7kcSbLXesUpkqF6MmwD56YnQStpEFRvuYibCMYNmMRKCTQWySzUzCm00zcrq3pUEh5v3mo+jnrvoaDOSjt3GHET61p0eUkBJYlvQIJwujc8p8NXPvwQ9VuCS5fc2fGysaWwzXggpKf5xqD1I43oO7qcz6Qat+Z9LioyVucEyYjuzKLSrRQ+2swXpEqdA+pohpsY1tZ+J/7JA9+z2ZEwmLrEqF9KevuKq9VJ0VGcs2UO4eXKXsRY2Bsy3o/OAlWNIyWRA2JRrxD3F2OFkYRYmZFdVGst/7KFwLH4LVlUXh5KOnqY5p0I6U4tlwr34WVncefD98AXv+TZr7V0qWhJE7inazZF0Xh25spZFTRr0OXf4LejDA4BsFNxL0myLar9JCszugM6wJ8uwzmb44E62+RWqulxCrqnFiwbbfFFGlmd8lhK7ytSy8R+H7fh8dNqocy31qIwv0xfgYbY+tjdvN82e8cnD+JFyL1iHS20285v5pXLBFlajAn8fQfWAnsta9jJyqGvT++KWaQNq8NdwzNzyfbo11JsfWidiqL7aa7JU2qeKZa6ujCRy7Yillnro3WaibGbo5SF9Sqaq+JHSoow3dDe+zPrYqddKkjt0tSox3JiZTegW3x6RyL48VYPy14DVSexscUSVYE690SwLBbybrSc8tOpJTeQ45MNSrnNwBS8iOYVxCO8xDeAY5OdxLquTek+YePkiWyDFh3gvlyPCQ8+bdcr9JINls/hNgAAOliYAWqbCaAAAAAElFTkSuQmCC"},412:function(e,t,i){"use strict";var o=i(29);const n={props:{appConfig:{type:Object,required:!0,default:function(){return null}},appSettings:{type:Object,required:!0,default:function(){return null}},appRESTBase:{...o.a.appURL},appAssetURL:{...o.a.appAssetURL},debugging:{...o.a.appDebugEnabled}}};t.a=n},43:function(e,t,i){"use strict";i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return s}));const o={validClass:{type:String,default:""},errorClass:{type:String,default:"is-invalid"},errorState:{type:String,default:null},values:{type:Object,default:function(){return{}}},debugging:{type:Boolean,default:!1}},n={submit:{name:"submit"},validated:{name:"validated"},validationError:{name:"validationError"}},s={props:o,methods:{validate:function(){return this.validateValues()},specialValidationErrors:function(){return{}},specialInputValues:function(){return{}},errorStateClass:function(e){return null==this.fields[e].error?"":this.fields[e].error?this.errorClass:this.validClass},setFieldValues:function(){const e=this;this.debugging&&(console.group(`Setting ${this.$options._componentTag} values`),console.log("Fields Before",{...this.fields}),console.log("Values",this.values)),Object.keys(this.values).forEach(t=>{if(!e.fields.hasOwnProperty(t))return void(e.debugging&&console.info(`${e.$options._componentTag} does not contain field '${t}'`));const i=e.fields[t].hasOwnProperty("value")?"value":"selected";e.fields[t][i]=e.values[t]}),this.debugging&&(console.log("Fields After",{...this.fields}),console.groupEnd())},validateValues:function(){const e=this;let t=0;return this.debugging&&console.group(`Validating ${this.$options._componentTag} values`),Object.keys(this.fields).forEach(i=>{if(e.fields[i].error=null,!e.fields[i].required)return;const o=e.fields[i].hasOwnProperty("value")?"value":"selected";""==e.fields[i][o]?(e.fields[i].error=e.fields[i].errorMsg,e.debugging&&console.info(`Invalid field value for '${i}' -- ${e.fields[i].error}`),t++):e.fields[i].error=""}),this.debugging&&console.groupEnd(),0==t},validationErrors:function(){const e=this,t={};return Object.keys(this.fields).forEach(i=>{t[i]=e.fields[i].error}),{...this.specialValidationErrors(),...t}},inputValues:function(){const e=this,t={};return Object.keys(this.fields).forEach(i=>{const o=e.fields[i].hasOwnProperty("value")?"value":"selected";t[i]=e.fields[i][o]}),{...this.specialInputValues(),...t}}},data:()=>({fields:{}})};t.b=s},438:function(e,t,i){"use strict";i.r(t);var o=i(24),n=i(412),s=i(226);var a={name:"HomePage",computed:{...Object(o.c)(["searchOnLoad","searchDetails","hasSearchResults","displayType","loadingQuotes","quotesError","quotesLoaded","journeyID","journeyQuotes","journeyDetails","quoteID","vehicleIndex"]),placesLookup:function(){return`${this.appSettings.biq_api_host}${this.appConfig.biq.PLACES_URI}`},quotesFrom:function(){return`${this.appSettings.biq_api_host}${this.appConfig.biq.QUOTE_URI}`},showResults:function(){return this.loadingQuotes||this.quotesError||this.quotesLoaded},showRecommendedUpgrade:function(){return this.appSettings.recommend_upgrade&&this.show_upgrade},quotePickup:function(){return this.journeyDetails.pickup},quoteDestination:function(){return this.journeyDetails.destination}},methods:{...Object(o.b)(["searchingQuotes","searchedQuotes","changeDisplayType","apiQuotesError","bookNow"]),onQuotesSearchSubmit:function(e){if(e.data.validate()){const t=e.data.formValues();this.searchingQuotes(t),e.data.searchApiQuotes(t)}},onQuotesSearched:function(e){this.debugging&&(console.group("BIQ Quotes Searched"),console.log(e)),this.updateSearchState(e),this.debugging&&console.groupEnd()},onZeroQuotes:function(e){this.debugging&&(console.group("BIQ Quotes Search Zero Results"),console.log(e)),console.error(e.warnings[0]),this.updateSearchState(e),this.debugging&&console.groupEnd()},onQuotesError:function(e){const t=e.getCulprit().message||"Unknown BIQ Quotes API Error";this.apiQuotesError(t)},onBookNowClicked:function(e){this.debugging&&(console.group("BIQ Quote Book Now Clicked"),console.log(e)),e.preventDefault();const{quoteID:t,selectedVehicleIndex:i}=e.data;this.debugging&&(console.log("Quote ID",t),console.log("Vehicle Index",i),console.log("Quote",this.journeyQuotes[t]),console.log("Vehicle",this.journeyQuotes[t].vehicles[i]),console.groupEnd());const o={journey:this.journeyID,quote:{id:t,vehicle:i}};return this.selected=o,this.appSettings.recommend_upgrade?this.show_upgrade=!0:this.gotoCheckout()},onUpgradeUnavailable:function(e){this.debugging&&console.log("No Quote Upgrade Available Event",e),this.show_upgrade=!1,this.gotoCheckout()},onUpgradeModalCancel:function(e){this.debugging&&console.log("Cancel Upgrade Modal Event",e),this.show_upgrade=!1,this.gotoCheckout()},onUpgradeModalConfirm:function(e){this.debugging&&console.log("Confirm Modal Event",e);const t=e.data.recommendedUpgrade;this.debugging&&(console.group("Quote Upgrade Recommendation Accepted"),console.log("recommendedUpgrade",t),console.groupEnd()),this.show_upgrade=!1,this.selected.quote={id:t.upgradeQuoteId,vehicle:t.upgradeVehicleIndex},this.gotoCheckout()},gotoCheckout:function(){this.bookNow({quote:this.selected.quote.id,vehicle:this.selected.quote.vehicle,quote_data:this.journeyQuotes[this.selected.quote.id]}),this.$router.push({name:"CheckoutPage",params:{journey:this.journeyID,quote:this.quoteID,vehicle:this.vehicleIndex}})},updateSearchState:function(e){this.debugging&&(console.group("BIQ Quotes Search State Updated"),console.log("Search data",e),console.log("Quote type",this.appSettings.quote_type),console.groupEnd()),this.searchedQuotes({...e,display_type:this.appSettings.quote_type})}},mixins:[n.a],components:{"the-biq-journey-route-map":()=>Promise.all([i.e(0),i.e(9)]).then(i.bind(null,429)),"the-biq-search-form":s.a,"the-biq-journey-outline":()=>i.e(8).then(i.bind(null,433)),"the-biq-search-results":()=>i.e(15).then(i.bind(null,443)),"biq-quote-upgrade-offer-modal":()=>i.e(13).then(i.bind(null,431))},data:()=>({search_form_layout:"compact-row",use_search_labels:!1,selected:{journey:"",quote:{id:"",vehicle:0}},show_upgrade:!1,map_error:!1}),created(){this.hasSearchResults&&this.displayType!==this.appSettings.quote_type&&this.changeDisplayType(this.appSettings.quote_type)}},r=i(18),l=Object(r.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"biq-search-page"}},[i("the-biq-search-form",{attrs:{layout:e.search_form_layout,"biq-public-key":e.appSettings.biq_pk,"biq-places-lookup":e.placesLookup,"biq-quotes-from":e.quotesFrom,"use-labels":e.use_search_labels,"search-on-load":e.searchOnLoad,debugging:e.debugging},on:{submit:e.onQuotesSearchSubmit,biqQuotesSearched:e.onQuotesSearched,biqZeroQuotes:e.onZeroQuotes,biqQuotesError:e.onQuotesError}}),e._v(" "),i("the-biq-journey-outline",{attrs:{"journey-type":e.searchDetails.journey_type,pickup:e.searchDetails.pickup,destination:e.searchDetails.destination,date:e.searchDetails.date,time:e.searchDetails.time,passengers:e.searchDetails.people,id:"biq-journey-outline"}}),e._v(" "),i("div",{attrs:{id:"biq-journey-search"}},[e.map_error?e._e():i("div",{staticClass:"col-lg-4 pr-3 d-lg-block",attrs:{id:"biq-journey-route-map-container"}},[i("the-biq-journey-route-map",{ref:"map",attrs:{"mapbox-public-key":e.appSettings.mapbox_pk,"mapbox-style":e.appSettings.mapbox_style,pickup:e.quotePickup,destination:e.quoteDestination,"loading-journey":e.loadingQuotes,"journey-error":e.quotesError,"journey-loaded":e.quotesLoaded,debugging:e.debugging},on:{directionsError:function(t){e.map_error=!0}}})],1),e._v(" "),e.showResults?i("the-biq-search-results",{attrs:{"display-results-type":e.appSettings.quote_type,debugging:e.debugging},on:{biqQuoteBookNow:e.onBookNowClicked},scopedSlots:e._u([{key:"loading-quotes",fn:function(){return[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"spinner-border"}),e._v(" Generating Quotes...\n                ")])]},proxy:!0}],null,!1,168310144)}):e._e(),e._v(" "),e.showRecommendedUpgrade?i("biq-quote-upgrade-offer-modal",{attrs:{journey:e.selected.journey,quote:e.selected.quote.id,vehicle:e.selected.quote.vehicle,debugging:e.debugging},on:{unavailable:e.onUpgradeUnavailable,cancel:e.onUpgradeModalCancel,confirm:e.onUpgradeModalConfirm},scopedSlots:e._u([{key:"body",fn:function(t){var o=t.upgrade;return[i("p",[e._v(e._s(o.description))])]}}],null,!1,99690981)}):e._e()],1)],1)}),[],!1,null,null,null);t.default=l.exports}},0,[0,9,8,10,13,15]]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{16:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"f",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"b",(function(){return p}));const i={base:{fontFamily:"'Muli', sans-serif",fontSize:"14px",color:"#333"},invalid:{color:"red"}},s=(t,e)=>{if(e){console.log("stripe_cardform_style",t.stripe_cardform_style),console.info("type",typeof t.stripe_cardform_style);try{console.log("parse attempt",JSON.parse(t.stripe_cardform_style))}catch(t){console.error(t)}}return{biq_pk:t.taxicode_public,biq_api_host:t.biq_api_host,paypal_pk:t.paypal_public,stripe_pk:t.stripe_public,stripe_cardform_style:t.stripe_cardform_style,booking_test_mode:"1"==t.test_mode,quote_type:t.quote_type,recommend_upgrade:"1"==t.recommend_upgrade,complete_page_text:t.complete_page_text}},o=t=>({headers:{"X-WP-Nonce":t}}),a=function(t,e){this.appDebugEnabled&&(console.group("Updating BIQ App Settings"),console.log("BIQ App Settings",{...this.settings}),console.log("New BIQ Settings",t));const n="function"==typeof e?e.call(this,t):s(t,this.appDebugEnabled);this.settings=n,this.appDebugEnabled&&(console.info("Updated Settings"),console.log("Settings",n),console.log("BIQ App Settings",{...this.settings}),console.groupEnd())},p={LIVE_API_HOST:"https://api.taxicode.com/",TEST_API_HOST:"https://api.stagingtaxis.co.uk/",PLACES_URI:"places/?term=",AUTH_URI:"auth/",QUOTE_URI:"booking/quote/",JOURNEY_URI:"booking/journey/?id=",CLIENT_SECRET_URI:"booking/client_gateway_secret/",PAYMENT_URI:"booking/pay/",PGH_CONF:{hidePostalCode:!0}};e.d=p},262:function(t,e,n){"use strict";n.r(e);var i=n(13);var s=function(t){var e=jQuery;let n=e("#toplevel_page_"+t),i=window.location.href,s=i.substr(i.indexOf("admin.php"));n.on("click","a",(function(){var t=e(this);e("ul.wp-submenu li",n).removeClass("current"),t.hasClass("wp-has-submenu")?e("li.wp-first-item",n).addClass("current"):t.parents("li").addClass("current")})),e("ul.wp-submenu a",n).each((function(t,n){e(n).attr("href")!==s||e(n).parent().addClass("current")}))},o=n(32),a=n(16);var p={name:"BIQAdminApp",version:"1.0.1",props:{adminNonce:{type:String,default:""}},computed:{},methods:{appSettingsUpdated:a.e,getAdminSettings:function(){this.getAppSettings(()=>Object(a.f)(this.adminNonce),t=>({...Object(a.c)(t,this.appDebugEnabled),biq_sk:t.taxicode_private,search_target_permalink:t.search_target_permalink,custom_css:t.custom_css}))}},mixins:[o.a],data(){return{app_title:"Booking Instant Quotes Admin v1.0.1",settings:{biq_api_host:a.b.LIVE_API_HOST,biq_pk:"",paypal_pk:"",stripe_pk:"",stripe_cardform_style:a.a,booking_test_mode:!1,quote_type:"",recommend_upgrade:!1,complete_page_text:"",biq_sk:"",search_target_permalink:"/booking-instant-quotes/",custom_css:""},admin_nonce:this.adminNonce}},created(){this.getAdminSettings()}},r=n(19),c=Object(r.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"biq-admin-vue-app"}},[n("h1",[t._v(t._s(t.app_title))]),t._v(" "),t.initialised?n("router-view",{attrs:{"admin-nonce":t.admin_nonce,"app-settings":t.appSettings,appRESTBaseURL:t.appURL,debugging:t.appDebugEnabled},on:{appSettingsUpdated:t.appSettingsUpdated}}):t._e()],1)}),[],!1,null,null,null).exports,d=n(42);i.default.use(d.a);var l=new d.a({routes:[{path:"/",name:"SettingsPage",component:()=>n.e(2).then(n.bind(null,274))}]});i.default.config.productionTip=!1,i.default.config.devtools=!1,s("taxicode-app"),window.axios=n(25),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",new i.default({render:t=>t(c,{props:{adminNonce:admin_nonce,appURL:biqAppURL,appDebugEnabled:biqAppDebugEnabled}}),el:"#biq-admin-vue-app",router:l})},32:function(t,e,n){"use strict";var i=n(25),s=n.n(i);const o={props:{appURL:{type:String,required:!0,default:"//"},appDebugEnabled:{type:Boolean,default:!1}},computed:{appSettings:function(){return{...this.settings}}},methods:{getAppSettings:function(t,e){const n=this,i=this.appURL+"settings/";this.appDebugEnabled&&console.group(`Loading App Settings from '${i}'`);const o="function"==typeof t?t.call(this):{};s.a.get(i,o).then(t=>{n.appSettingsUpdated(t.data,e),n.initialised=!0}).catch(t=>{n.appDebugEnabled&&(console.info("Updated Settings Error"),console.log(t)),console.error(t)}).finally(()=>{n.appDebugEnabled&&console.groupEnd()})},appSettingsUpdated:function(t,e){this.appDebugEnabled&&(console.group("Updating App Settings"),console.log("App Settings",{...this.settings}),console.log("New Settings",t));const n="function"==typeof e?e.call(this,t):{...t};this.settings=n,this.appDebugEnabled&&(console.info("Updated Settings"),console.log("Settings",n),console.log("App Settings",{...this.settings}),console.groupEnd())}},data:()=>({initialised:!1,settings:{}})};e.a=o}},[[262,1,0]]]);
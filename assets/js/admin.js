(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{254:function(e,t,p){"use strict";p.r(t);var i=p(15);var s=function(e){var t=jQuery;let p=t("#toplevel_page_"+e),i=window.location.href,s=i.substr(i.indexOf("admin.php"));p.on("click","a",(function(){var e=t(this);t("ul.wp-submenu li",p).removeClass("current"),e.hasClass("wp-has-submenu")?t("li.wp-first-item",p).addClass("current"):e.parents("li").addClass("current")})),t("ul.wp-submenu a",p).each((function(e,p){t(p).attr("href")!==s||t(p).parent().addClass("current")}))},o={name:"BIQAdminApp",version:"1.0.1",props:{biqAppURL:{type:String,required:!0,default:"//"},biqAppDebugEnabled:{type:Boolean,default:!1}},data:()=>({app_title:"Taxicode Booking Instant Quotes Admin",initialised:!1,settings:{biq_api_host:"https://api.taxicode.com/",biq_pk:"",paypal_pk:"",stripe_pk:"",stripe_cardform_style:{base:{fontFamily:"'Muli', sans-serif",fontSize:"14px",color:"#333"},invalid:{color:"red"}},booking_test_mode:!1,quote_type:"",recommend_upgrade:!1,complete_page_text:""}}),created(){this.getAppSettings()},computed:{appSettings:function(){return{...this.settings}}},methods:{getAppSettings:function(){const e=this,t=this.biqAppURL+"settings-get/";this.biqAppDebugEnabled&&console.group(`Loading BIQ App Settings from '${t}'`),axios.get(t).then(t=>{e.appSettingsUpdated(t.data),e.initialised=!0}).catch(t=>{e.biqAppDebugEnabled&&(console.info("Updated Settings"),console.log(t)),console.error(t)}).finally(()=>{e.biqAppDebugEnabled&&console.groupEnd()})},appSettingsUpdated:function(e){if(this.biqAppDebugEnabled){console.group("Updating BIQ App Settings"),console.log("App Settings",{...this.settings}),console.log("New Settings",e),console.log("stripe_cardform_style",e.stripe_cardform_style),console.info("type",typeof e.stripe_cardform_style);try{console.log("parse attempt",JSON.parse(e.stripe_cardform_style))}catch(e){console.error(e)}}const t={biq_pk:e.taxicode_public,biq_api_host:e.biq_api_host,paypal_pk:e.paypal_public,stripe_pk:e.stripe_public,stripe_cardform_style:e.stripe_cardform_style,booking_test_mode:"1"==e.test_mode,quote_type:e.quote_type,recommend_upgrade:"1"==e.recommend_upgrade,complete_page_text:e.complete_page_text};this.settings=t,this.biqAppDebugEnabled&&(console.info("Updated Settings"),console.log("Settings",t),console.log("App Settings",{...this.settings}),console.groupEnd())}}},n=p(14),a=Object(n.a)(o,(function(){var e=this,t=e.$createElement,p=e._self._c||t;return p("div",{attrs:{id:"biq-admin-vue-app"}},[p("h1",[e._v(e._s(e.app_title))]),e._v(" "),e.initialised?p("router-view",{attrs:{debugging:e.biqAppDebugEnabled,"app-settings":e.appSettings,appRESTBaseURL:e.biqAppURL},on:{appSettingsUpdated:e.appSettingsUpdated}}):e._e()],1)}),[],!1,null,null,null).exports,r=p(35);i.default.use(r.a);var l=new r.a({routes:[{path:"/",name:"SettingsPage",component:()=>p.e(2).then(p.bind(null,259)),props:{biq_sk:biq_sk,custom_css:custom_css}}]});i.default.config.productionTip=!1,i.default.config.devtools=!1,s("taxicode-app"),window.axios=p(28),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",new i.default({render:e=>e(a,{props:{biqAppURL:biqAppURL,biqAppDebugEnabled:biq_app_debug_enabled}}),el:"#biq-admin-vue-app",router:l})}},[[254,0,1]]]);
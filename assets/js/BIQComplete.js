(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{268:function(e,n,o){"use strict";const t={props:{appConfig:{type:Object,required:!0,default:function(){return null}},appSettings:{type:Object,required:!0,default:function(){return null}},debugging:{type:Boolean,default:!1}}};n.a=t},274:function(e,n,o){},275:function(e,n,o){},279:function(e,n,o){"use strict";o.r(n);var t=o(268),i=o(12),s=o(16),a=o.n(s);const r=(e,n,o,t)=>{const s=e=>new Date(Date.parse(e));return new Promise((r,l)=>{a.a.get(`${e}${o}&key=${n}`).then(o=>Object(i.d)(e,n,o,t)).then(e=>e.booking).then(e=>{const n={ref:o,name:e.passenger.name,passengers:Number.parseInt(e.people),pickup:e.pickup,destination:e.destination,vias:e.vias,date:s(e.date),return_date:null};e.return&&(n.return_date=s(e.return)),r(n)}).catch(t=>{const s=t.message||"Unknown",a=Object(i.e)(e,n,t,"BIQ API Booking Details Load Error - "+s);a.data.bookingRef=o,l(a)})})};var l=o(20);const g={header:"Booking Details",booking:{...l.d,name:"Name : ",ref:"Booking Reference : "}},u={li_css:"list-group-item d-flex justify-content-between align-items-center"};var d={name:"BookingJourneyDetails",props:{booking:{type:Object,default:function(){return{ref:"",name:"",passengers:1,pickup:"",destination:"",vias:[],date:null,return_date:null}}},labels:{type:Object,default:function(){return g}}},computed:{journeyDate:function(){return Object(l.f)(this.booking.date)},journeyTime:function(){return Object(l.g)(this.booking.date)},journeyReturnDate:function(){return Object(l.f)(this.booking.return_date)},journeyReturnTime:function(){return Object(l.g)(this.booking.return_date)}},data:()=>({...u})},b=o(22),c=Object(b.a)(d,(function(){var e=this,n=e.$createElement,o=e._self._c||n;return o("div",{staticClass:"flex-fill"},[o("h4",{staticClass:"card-header"},[e._v(e._s(e.labels.header))]),e._v(" "),o("ul",{staticClass:"card list-group list-group-flush"},[o("li",{class:e.li_css},[o("strong",[e._v(e._s(e.labels.booking.ref))]),e._v(" "),o("span",[e._v(e._s(e.booking.ref))])]),e._v(" "),o("li",{class:e.li_css},[o("strong",[e._v(e._s(e.labels.booking.name))]),e._v(" "),o("span",[e._v(e._s(e.booking.name))])]),e._v(" "),o("li",{class:e.li_css},[o("strong",[e._v(e._s(e.labels.booking.date))]),e._v(" "),o("span",[e._v(e._s(e.journeyDate)+" @ "+e._s(e.journeyTime))])]),e._v(" "),o("li",{class:e.li_css},[o("strong",[e._v(e._s(e.labels.booking.pickup))]),e._v(" "),o("span",[e._v(e._s(e.booking.pickup))])]),e._v(" "),o("li",{class:e.li_css},[o("strong",[e._v(e._s(e.labels.booking.destination))]),e._v(" "),o("span",[e._v(e._s(e.booking.destination))])])])])}),[],!1,null,null,null).exports;const p={header:"Booking Details",booking:{...l.d,name:"Name : ",ref:"Booking Reference : "}},k={loaded:!1,error:!1,booking:{ref:"",name:"",passengers:1,pickup:"",destination:"",vias:[],date:null,return_date:null}},_={biqPublicKey:{type:String,required:!0,default:""},bookingDetailsFrom:{type:String,required:!0,default:"//booking-details/?booking_ref="},bookingRef:{type:String,required:!0,default:""},labels:{type:Object,default:function(){return p}},styleClass:{type:String,default:"flex-sm-fill"},debugging:{type:Boolean,default:!1}},f={name:"detailsLoadError"};var m={name:"AsyncBookingJourneyDetails",props:_,methods:{getBookingDetails:function(){const e=this;this.loaded=!1,this.error=!1,this.debugging&&(console.group(`Loading Booking Details from '${this.bookingDetailsFrom}'`),console.log("Booking Details",{...this.booking})),r(this.bookingDetailsFrom,this.biqPublicKey,this.bookingRef,this.debugging).then(n=>{e.booking={...n,pickup:n.pickup.string,destination:n.destination.string},e.loaded=!0,e.debugging&&(console.log("Booking Details Loaded",{...e.booking}),console.groupEnd())}).catch(n=>{e.error=!0,e.debugging&&console.error(n.data.message,n.data),e.$emit(f.name,n),e.debugging&&console.groupEnd()})}},components:{"biq-booking-journey-details":c},data:()=>({...k}),mounted(){this.getBookingDetails()}},v=Object(b.a)(m,(function(){var e=this,n=e.$createElement,o=e._self._c||n;return e.loaded?o("div",{class:e.styleClass},[e._t("booking-journey-details",[o("biq-booking-journey-details",{attrs:{booking:e.booking,labels:e.labels}})],{booking:e.booking,labels:e.labels})],2):o("div",{class:e.styleClass},[e._t("loading",[o("div",{staticClass:"spinner-border"})])],2)}),[],!1,null,null,null).exports;o(274),o(275);const h={page_heading:"Your booking is complete",page_text:"Thank you for booking with us.",booking_details_labels:{header:"Booking Details",booking:{pickup:"Travelling From : ",destination:"Going To : ",passengers:"",via:"",date:"Date : ",return_date:"",name:"Name : ",ref:"Booking Reference : "}},loading_details:{ref:"...",name:"...",passengers:1,pickup:"...",destination:"...",vias:[],date:null,return_date:null},booking_load_error:!1};var y={name:"CompletePage",props:{appRESTBase:{type:String,default:"//"}},computed:{bookingDetailsFrom:function(){return`${this.appRESTBase}${this.appConfig.BOOKING_DETALS_URI}`}},methods:{onDetailsLoadError:function(){this.booking_load_error=!0}},mixins:[t.a],components:{"async-biq-booking-journey-details":v,"biq-booking-journey-details":c},data(){return{...h,page_text:this.appSettings.complete_page_text}}},j=Object(b.a)(y,(function(){var e=this,n=e.$createElement,o=e._self._c||n;return o("div",{attrs:{id:"biq-complete-page"}},[o("h3",[e._v(e._s(e.page_heading))]),e._v(" "),o("div",{staticClass:"d-flex flex-wrap"},[o("div",{staticClass:"flex-sm-fill"},[o("p",[e._v(e._s(e.page_text))])]),e._v(" "),o("async-biq-booking-journey-details",{attrs:{"booking-details-from":e.bookingDetailsFrom,"biq-public-key":e.appSettings.biq_pk,"booking-ref":e.$route.params.booking_ref,labels:e.booking_details_labels,debugging:e.debugging,id:"biq-journey-details-booked"},on:{detailsLoadError:e.onDetailsLoadError},scopedSlots:e._u([{key:"loading",fn:function(){return[o("biq-booking-journey-details",{attrs:{booking:e.loading_details,labels:e.booking_details_labels}})]},proxy:!0}])})],1)])}),[],!1,null,null,null);n.default=j.exports}}]);